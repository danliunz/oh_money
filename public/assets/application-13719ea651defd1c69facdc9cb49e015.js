function init_item_type_autocomplete(){init_autocomplete($(".item-types-panel input"),$(".item-types-panel .dropdown"),"/item_types/suggestions.json",display_item_type_suggestions)}function display_item_type_suggestions(e){var t=$(".item-types-panel .dropdown");show_autocomplete_suggestions(e,t)}function init_tag_autocomplete(){init_autocomplete($("#tag_input"),$(".tag-input-panel .dropdown"),"/tags/suggestions.json",display_tag_suggestions)}function display_tag_suggestions(e){var t=$(".tag-input-panel .dropdown");show_autocomplete_suggestions(e,t)}function init_autocomplete(e,t,i,n){e.on("input",function(e){var t=$(this).val().trim();t?$.get(i,{prefix:t},n):n([])});var a=t.find(".dropdown-menu");e.keydown(function(e){40===e.which&&a.find("li:first-child a").focus()}),a.on("click","a",function(t){e.val($(this).text()).focus()})}function show_autocomplete_suggestions(e,t){if(e.length<=0)t.removeClass("open");else{var i=t.find(".dropdown-menu");i.empty(),$.each(e,function(e,t){i.append('<li><a href="javascript:void(0)">'+t+"</a></li>")}),t.addClass("open")}}if(function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function i(e){var t=e.length,i=ae.type(e);return"function"===i||ae.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e}function n(e,t,i){if(ae.isFunction(t))return ae.grep(e,function(e,n){return!!t.call(e,n,e)!==i});if(t.nodeType)return ae.grep(e,function(e){return e===t!==i});if("string"==typeof t){if(ue.test(t))return ae.filter(t,e,i);t=ae.filter(t,e)}return ae.grep(e,function(e){return ae.inArray(e,t)>=0!==i})}function a(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function r(e){var t=_e[e]={};return ae.each(e.match(ve)||[],function(e,i){t[i]=!0}),t}function s(){fe.addEventListener?(fe.removeEventListener("DOMContentLoaded",o,!1),e.removeEventListener("load",o,!1)):(fe.detachEvent("onreadystatechange",o),e.detachEvent("onload",o))}function o(){(fe.addEventListener||"load"===event.type||"complete"===fe.readyState)&&(s(),ae.ready())}function l(e,t,i){if(void 0===i&&1===e.nodeType){var n="data-"+t.replace(Me,"-$1").toLowerCase();if(i=e.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Te.test(i)?ae.parseJSON(i):i}catch(a){}ae.data(e,t,i)}else i=void 0}return i}function d(e){var t;for(t in e)if(("data"!==t||!ae.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function h(e,t,i,n){if(ae.acceptData(e)){var a,r,s=ae.expando,o=e.nodeType,l=o?ae.cache:e,d=o?e[s]:e[s]&&s;if(d&&l[d]&&(n||l[d].data)||void 0!==i||"string"!=typeof t)return d||(d=o?e[s]=q.pop()||ae.guid++:s),l[d]||(l[d]=o?{}:{toJSON:ae.noop}),("object"==typeof t||"function"==typeof t)&&(n?l[d]=ae.extend(l[d],t):l[d].data=ae.extend(l[d].data,t)),r=l[d],n||(r.data||(r.data={}),r=r.data),void 0!==i&&(r[ae.camelCase(t)]=i),"string"==typeof t?(a=r[t],null==a&&(a=r[ae.camelCase(t)])):a=r,a}}function c(e,t,i){if(ae.acceptData(e)){var n,a,r=e.nodeType,s=r?ae.cache:e,o=r?e[ae.expando]:ae.expando;if(s[o]){if(t&&(n=i?s[o]:s[o].data)){ae.isArray(t)?t=t.concat(ae.map(t,ae.camelCase)):t in n?t=[t]:(t=ae.camelCase(t),t=t in n?[t]:t.split(" ")),a=t.length;for(;a--;)delete n[t[a]];if(i?!d(n):!ae.isEmptyObject(n))return}(i||(delete s[o].data,d(s[o])))&&(r?ae.cleanData([e],!0):ie.deleteExpando||s!=s.window?delete s[o]:s[o]=null)}}}function u(){return!0}function p(){return!1}function f(){try{return fe.activeElement}catch(e){}}function m(e){var t=Oe.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function g(e,t){var i,n,a=0,r=typeof e.getElementsByTagName!==ke?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==ke?e.querySelectorAll(t||"*"):void 0;if(!r)for(r=[],i=e.childNodes||e;null!=(n=i[a]);a++)!t||ae.nodeName(n,t)?r.push(n):ae.merge(r,g(n,t));return void 0===t||t&&ae.nodeName(e,t)?ae.merge([e],r):r}function x(e){je.test(e.type)&&(e.defaultChecked=e.checked)}function y(e,t){return ae.nodeName(e,"table")&&ae.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function v(e){return e.type=(null!==ae.find.attr(e,"type"))+"/"+e.type,e}function _(e){var t=$e.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function b(e,t){for(var i,n=0;null!=(i=e[n]);n++)ae._data(i,"globalEval",!t||ae._data(t[n],"globalEval"))}function w(e,t){if(1===t.nodeType&&ae.hasData(e)){var i,n,a,r=ae._data(e),s=ae._data(t,r),o=r.events;if(o){delete s.handle,s.events={};for(i in o)for(n=0,a=o[i].length;a>n;n++)ae.event.add(t,i,o[i][n])}s.data&&(s.data=ae.extend({},s.data))}}function k(e,t){var i,n,a;if(1===t.nodeType){if(i=t.nodeName.toLowerCase(),!ie.noCloneEvent&&t[ae.expando]){a=ae._data(t);for(n in a.events)ae.removeEvent(t,n,a.handle);t.removeAttribute(ae.expando)}"script"===i&&t.text!==e.text?(v(t).text=e.text,_(t)):"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),ie.html5Clone&&e.innerHTML&&!ae.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&je.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.defaultSelected=t.selected=e.defaultSelected:("input"===i||"textarea"===i)&&(t.defaultValue=e.defaultValue)}}function T(t,i){var n,a=ae(i.createElement(t)).appendTo(i.body),r=e.getDefaultComputedStyle&&(n=e.getDefaultComputedStyle(a[0]))?n.display:ae.css(a[0],"display");return a.detach(),r}function M(e){var t=fe,i=Qe[e];return i||(i=T(e,t),"none"!==i&&i||(Ze=(Ze||ae("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Ze[0].contentWindow||Ze[0].contentDocument).document,t.write(),t.close(),i=T(e,t),Ze.detach()),Qe[e]=i),i}function C(e,t){return{get:function(){var i=e();if(null!=i)return i?void delete this.get:(this.get=t).apply(this,arguments)}}}function S(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,a=ut.length;a--;)if(t=ut[a]+i,t in e)return t;return n}function P(e,t){for(var i,n,a,r=[],s=0,o=e.length;o>s;s++)n=e[s],n.style&&(r[s]=ae._data(n,"olddisplay"),i=n.style.display,t?(r[s]||"none"!==i||(n.style.display=""),""===n.style.display&&Pe(n)&&(r[s]=ae._data(n,"olddisplay",M(n.nodeName)))):(a=Pe(n),(i&&"none"!==i||!a)&&ae._data(n,"olddisplay",a?i:ae.css(n,"display"))));for(s=0;o>s;s++)n=e[s],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?r[s]||"":"none"));return e}function A(e,t,i){var n=lt.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function j(e,t,i,n,a){for(var r=i===(n?"border":"content")?4:"width"===t?1:0,s=0;4>r;r+=2)"margin"===i&&(s+=ae.css(e,i+Se[r],!0,a)),n?("content"===i&&(s-=ae.css(e,"padding"+Se[r],!0,a)),"margin"!==i&&(s-=ae.css(e,"border"+Se[r]+"Width",!0,a))):(s+=ae.css(e,"padding"+Se[r],!0,a),"padding"!==i&&(s+=ae.css(e,"border"+Se[r]+"Width",!0,a)));return s}function D(e,t,i){var n=!0,a="width"===t?e.offsetWidth:e.offsetHeight,r=et(e),s=ie.boxSizing&&"border-box"===ae.css(e,"boxSizing",!1,r);if(0>=a||null==a){if(a=tt(e,t,r),(0>a||null==a)&&(a=e.style[t]),nt.test(a))return a;n=s&&(ie.boxSizingReliable()||a===e.style[t]),a=parseFloat(a)||0}return a+j(e,t,i||(s?"border":"content"),n,r)+"px"}function L(e,t,i,n,a){return new L.prototype.init(e,t,i,n,a)}function I(){return setTimeout(function(){pt=void 0}),pt=ae.now()}function F(e,t){var i,n={height:e},a=0;for(t=t?1:0;4>a;a+=2-t)i=Se[a],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function E(e,t,i){for(var n,a=(vt[t]||[]).concat(vt["*"]),r=0,s=a.length;s>r;r++)if(n=a[r].call(i,t,e))return n}function O(e,t,i){var n,a,r,s,o,l,d,h,c=this,u={},p=e.style,f=e.nodeType&&Pe(e),m=ae._data(e,"fxshow");i.queue||(o=ae._queueHooks(e,"fx"),null==o.unqueued&&(o.unqueued=0,l=o.empty.fire,o.empty.fire=function(){o.unqueued||l()}),o.unqueued++,c.always(function(){c.always(function(){o.unqueued--,ae.queue(e,"fx").length||o.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],d=ae.css(e,"display"),h="none"===d?ae._data(e,"olddisplay")||M(e.nodeName):d,"inline"===h&&"none"===ae.css(e,"float")&&(ie.inlineBlockNeedsLayout&&"inline"!==M(e.nodeName)?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",ie.shrinkWrapBlocks()||c.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in t)if(a=t[n],mt.exec(a)){if(delete t[n],r=r||"toggle"===a,a===(f?"hide":"show")){if("show"!==a||!m||void 0===m[n])continue;f=!0}u[n]=m&&m[n]||ae.style(e,n)}else d=void 0;if(ae.isEmptyObject(u))"inline"===("none"===d?M(e.nodeName):d)&&(p.display=d);else{m?"hidden"in m&&(f=m.hidden):m=ae._data(e,"fxshow",{}),r&&(m.hidden=!f),f?ae(e).show():c.done(function(){ae(e).hide()}),c.done(function(){var t;ae._removeData(e,"fxshow");for(t in u)ae.style(e,t,u[t])});for(n in u)s=E(f?m[n]:0,n,c),n in m||(m[n]=s.start,f&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}}function B(e,t){var i,n,a,r,s;for(i in e)if(n=ae.camelCase(i),a=t[n],r=e[i],ae.isArray(r)&&(a=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),s=ae.cssHooks[n],s&&"expand"in s){r=s.expand(r),delete e[n];for(i in r)i in e||(e[i]=r[i],t[i]=a)}else t[n]=a}function N(e,t,i){var n,a,r=0,s=yt.length,o=ae.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var t=pt||I(),i=Math.max(0,d.startTime+d.duration-t),n=i/d.duration||0,r=1-n,s=0,l=d.tweens.length;l>s;s++)d.tweens[s].run(r);return o.notifyWith(e,[d,r,i]),1>r&&l?i:(o.resolveWith(e,[d]),!1)},d=o.promise({elem:e,props:ae.extend({},t),opts:ae.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:pt||I(),duration:i.duration,tweens:[],createTween:function(t,i){var n=ae.Tween(e,d.opts,t,i,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(n),n},stop:function(t){var i=0,n=t?d.tweens.length:0;if(a)return this;for(a=!0;n>i;i++)d.tweens[i].run(1);return t?o.resolveWith(e,[d,t]):o.rejectWith(e,[d,t]),this}}),h=d.props;for(B(h,d.opts.specialEasing);s>r;r++)if(n=yt[r].call(d,e,h,d.opts))return n;return ae.map(h,E,d),ae.isFunction(d.opts.start)&&d.opts.start.call(e,d),ae.fx.timer(ae.extend(l,{elem:e,anim:d,queue:d.opts.queue})),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always)}function W(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,a=0,r=t.toLowerCase().match(ve)||[];if(ae.isFunction(i))for(;n=r[a++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function Y(e,t,i,n){function a(o){var l;return r[o]=!0,ae.each(e[o]||[],function(e,o){var d=o(t,i,n);return"string"!=typeof d||s||r[d]?s?!(l=d):void 0:(t.dataTypes.unshift(d),a(d),!1)}),l}var r={},s=e===Ht;return a(t.dataTypes[0])||!r["*"]&&a("*")}function z(e,t){var i,n,a=ae.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((a[n]?e:i||(i={}))[n]=t[n]);return i&&ae.extend(!0,e,i),e}function X(e,t,i){for(var n,a,r,s,o=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===a&&(a=e.mimeType||t.getResponseHeader("Content-Type"));if(a)for(s in o)if(o[s]&&o[s].test(a)){l.unshift(s);break}if(l[0]in i)r=l[0];else{for(s in i){if(!l[0]||e.converters[s+" "+l[0]]){r=s;break}n||(n=s)}r=r||n}return r?(r!==l[0]&&l.unshift(r),i[r]):void 0}function H(e,t,i,n){var a,r,s,o,l,d={},h=e.dataTypes.slice();if(h[1])for(s in e.converters)d[s.toLowerCase()]=e.converters[s];for(r=h.shift();r;)if(e.responseFields[r]&&(i[e.responseFields[r]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=h.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(s=d[l+" "+r]||d["* "+r],!s)for(a in d)if(o=a.split(" "),o[1]===r&&(s=d[l+" "+o[0]]||d["* "+o[0]])){s===!0?s=d[a]:d[a]!==!0&&(r=o[0],h.unshift(o[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(c){return{state:"parsererror",error:s?c:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}function R(e,t,i,n){var a;if(ae.isArray(t))ae.each(t,function(t,a){i||$t.test(e)?n(e,a):R(e+"["+("object"==typeof a?t:"")+"]",a,i,n)});else if(i||"object"!==ae.type(t))n(e,t);else for(a in t)R(e+"["+a+"]",t[a],i,n)}function V(){try{return new e.XMLHttpRequest}catch(t){}}function U(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $(e){return ae.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var q=[],G=q.slice,K=q.concat,J=q.push,Z=q.indexOf,Q={},ee=Q.toString,te=Q.hasOwnProperty,ie={},ne="1.11.1",ae=function(e,t){return new ae.fn.init(e,t)},re=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,oe=/-([\da-z])/gi,le=function(e,t){return t.toUpperCase()};ae.fn=ae.prototype={jquery:ne,constructor:ae,selector:"",length:0,toArray:function(){return G.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:G.call(this)},pushStack:function(e){var t=ae.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ae.each(this,e,t)},map:function(e){return this.pushStack(ae.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(G.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(0>e?t:0);return this.pushStack(i>=0&&t>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:q.sort,splice:q.splice},ae.extend=ae.fn.extend=function(){var e,t,i,n,a,r,s=arguments[0]||{},o=1,l=arguments.length,d=!1;for("boolean"==typeof s&&(d=s,s=arguments[o]||{},o++),"object"==typeof s||ae.isFunction(s)||(s={}),o===l&&(s=this,o--);l>o;o++)if(null!=(a=arguments[o]))for(n in a)e=s[n],i=a[n],s!==i&&(d&&i&&(ae.isPlainObject(i)||(t=ae.isArray(i)))?(t?(t=!1,r=e&&ae.isArray(e)?e:[]):r=e&&ae.isPlainObject(e)?e:{},s[n]=ae.extend(d,r,i)):void 0!==i&&(s[n]=i));return s},ae.extend({expando:"jQuery"+(ne+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ae.type(e)},isArray:Array.isArray||function(e){return"array"===ae.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!ae.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==ae.type(e)||e.nodeType||ae.isWindow(e))return!1;try{if(e.constructor&&!te.call(e,"constructor")&&!te.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(ie.ownLast)for(t in e)return te.call(e,t);for(t in e);return void 0===t||te.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Q[ee.call(e)]||"object":typeof e},globalEval:function(t){t&&ae.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(se,"ms-").replace(oe,le)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var a,r=0,s=e.length,o=i(e);if(n){if(o)for(;s>r&&(a=t.apply(e[r],n),a!==!1);r++);else for(r in e)if(a=t.apply(e[r],n),a===!1)break}else if(o)for(;s>r&&(a=t.call(e[r],r,e[r]),a!==!1);r++);else for(r in e)if(a=t.call(e[r],r,e[r]),a===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(re,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?ae.merge(n,"string"==typeof e?[e]:e):J.call(n,e)),n},inArray:function(e,t,i){var n;if(t){if(Z)return Z.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,t){for(var i=+t.length,n=0,a=e.length;i>n;)e[a++]=t[n++];if(i!==i)for(;void 0!==t[n];)e[a++]=t[n++];return e.length=a,e},grep:function(e,t,i){for(var n,a=[],r=0,s=e.length,o=!i;s>r;r++)n=!t(e[r],r),n!==o&&a.push(e[r]);return a},map:function(e,t,n){var a,r=0,s=e.length,o=i(e),l=[];if(o)for(;s>r;r++)a=t(e[r],r,n),null!=a&&l.push(a);else for(r in e)a=t(e[r],r,n),null!=a&&l.push(a);return K.apply([],l)},guid:1,proxy:function(e,t){var i,n,a;return"string"==typeof t&&(a=e[t],t=e,e=a),ae.isFunction(e)?(i=G.call(arguments,2),n=function(){return e.apply(t||this,i.concat(G.call(arguments)))},n.guid=e.guid=e.guid||ae.guid++,n):void 0},now:function(){return+new Date},support:ie}),ae.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Q["[object "+t+"]"]=t.toLowerCase()});var de=function(e){function t(e,t,i,n){var a,r,s,o,l,d,c,p,f,m;if((t?t.ownerDocument||t:Y)!==L&&D(t),t=t||L,i=i||[],!e||"string"!=typeof e)return i;if(1!==(o=t.nodeType)&&9!==o)return[];if(F&&!n){if(a=ye.exec(e))if(s=a[1]){if(9===o){if(r=t.getElementById(s),!r||!r.parentNode)return i;if(r.id===s)return i.push(r),i}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(s))&&N(t,r)&&r.id===s)return i.push(r),i}else{if(a[2])return Q.apply(i,t.getElementsByTagName(e)),i;if((s=a[3])&&b.getElementsByClassName&&t.getElementsByClassName)return Q.apply(i,t.getElementsByClassName(s)),i}if(b.qsa&&(!E||!E.test(e))){if(p=c=W,f=t,m=9===o&&e,1===o&&"object"!==t.nodeName.toLowerCase()){for(d=M(e),(c=t.getAttribute("id"))?p=c.replace(_e,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=d.length;l--;)d[l]=p+u(d[l]);f=ve.test(e)&&h(t.parentNode)||t,m=d.join(",")}if(m)try{return Q.apply(i,f.querySelectorAll(m)),i}catch(g){}finally{c||t.removeAttribute("id")}}}return S(e.replace(le,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>w.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[W]=!0,e}function a(e){var t=L.createElement("div");try{return!!e(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var i=e.split("|"),n=e.length;n--;)w.attrHandle[i[n]]=t}function s(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||q)-(~e.sourceIndex||q);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function o(e){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===e}}function l(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function d(e){return n(function(t){return t=+t,n(function(i,n){for(var a,r=e([],i.length,t),s=r.length;s--;)i[a=r[s]]&&(i[a]=!(n[a]=i[a]))})})}function h(e){return e&&typeof e.getElementsByTagName!==$&&e}function c(){}function u(e){for(var t=0,i=e.length,n="";i>t;t++)n+=e[t].value;return n}function p(e,t,i){var n=t.dir,a=i&&"parentNode"===n,r=X++;return t.first?function(t,i,r){for(;t=t[n];)if(1===t.nodeType||a)return e(t,i,r)}:function(t,i,s){var o,l,d=[z,r];if(s){for(;t=t[n];)if((1===t.nodeType||a)&&e(t,i,s))return!0}else for(;t=t[n];)if(1===t.nodeType||a){if(l=t[W]||(t[W]={}),(o=l[n])&&o[0]===z&&o[1]===r)return d[2]=o[2];if(l[n]=d,d[2]=e(t,i,s))return!0}}}function f(e){return e.length>1?function(t,i,n){for(var a=e.length;a--;)if(!e[a](t,i,n))return!1;return!0}:e[0]}function m(e,i,n){for(var a=0,r=i.length;r>a;a++)t(e,i[a],n);return n}function g(e,t,i,n,a){for(var r,s=[],o=0,l=e.length,d=null!=t;l>o;o++)(r=e[o])&&(!i||i(r,n,a))&&(s.push(r),d&&t.push(o));return s}function x(e,t,i,a,r,s){return a&&!a[W]&&(a=x(a)),r&&!r[W]&&(r=x(r,s)),n(function(n,s,o,l){var d,h,c,u=[],p=[],f=s.length,x=n||m(t||"*",o.nodeType?[o]:o,[]),y=!e||!n&&t?x:g(x,u,e,o,l),v=i?r||(n?e:f||a)?[]:s:y;if(i&&i(y,v,o,l),a)for(d=g(v,p),a(d,[],o,l),h=d.length;h--;)(c=d[h])&&(v[p[h]]=!(y[p[h]]=c));if(n){if(r||e){if(r){for(d=[],h=v.length;h--;)(c=v[h])&&d.push(y[h]=c);r(null,v=[],d,l)}for(h=v.length;h--;)(c=v[h])&&(d=r?te.call(n,c):u[h])>-1&&(n[d]=!(s[d]=c))}}else v=g(v===s?v.splice(f,v.length):v),r?r(null,s,v,l):Q.apply(s,v)})}function y(e){for(var t,i,n,a=e.length,r=w.relative[e[0].type],s=r||w.relative[" "],o=r?1:0,l=p(function(e){return e===t},s,!0),d=p(function(e){return te.call(t,e)>-1},s,!0),h=[function(e,i,n){return!r&&(n||i!==P)||((t=i).nodeType?l(e,i,n):d(e,i,n))}];a>o;o++)if(i=w.relative[e[o].type])h=[p(f(h),i)];else{if(i=w.filter[e[o].type].apply(null,e[o].matches),i[W]){for(n=++o;a>n&&!w.relative[e[n].type];n++);return x(o>1&&f(h),o>1&&u(e.slice(0,o-1).concat({value:" "===e[o-2].type?"*":""})).replace(le,"$1"),i,n>o&&y(e.slice(o,n)),a>n&&y(e=e.slice(n)),a>n&&u(e))}h.push(i)}return f(h)}function v(e,i){var a=i.length>0,r=e.length>0,s=function(n,s,o,l,d){var h,c,u,p=0,f="0",m=n&&[],x=[],y=P,v=n||r&&w.find.TAG("*",d),_=z+=null==y?1:Math.random()||.1,b=v.length;for(d&&(P=s!==L&&s);f!==b&&null!=(h=v[f]);f++){if(r&&h){for(c=0;u=e[c++];)if(u(h,s,o)){l.push(h);break}d&&(z=_)}a&&((h=!u&&h)&&p--,n&&m.push(h))}if(p+=f,a&&f!==p){for(c=0;u=i[c++];)u(m,x,s,o);if(n){if(p>0)for(;f--;)m[f]||x[f]||(x[f]=J.call(l));x=g(x)}Q.apply(l,x),d&&!n&&x.length>0&&p+i.length>1&&t.uniqueSort(l)}return d&&(z=_,P=y),m};return a?n(s):s}var _,b,w,k,T,M,C,S,P,A,j,D,L,I,F,E,O,B,N,W="sizzle"+-new Date,Y=e.document,z=0,X=0,H=i(),R=i(),V=i(),U=function(e,t){return e===t&&(j=!0),0},$="undefined",q=1<<31,G={}.hasOwnProperty,K=[],J=K.pop,Z=K.push,Q=K.push,ee=K.slice,te=K.indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(this[t]===e)return t;return-1},ie="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ae="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re=ae.replace("w","w#"),se="\\["+ne+"*("+ae+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",oe=":("+ae+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+se+")*)|.*)\\)|)",le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),de=new RegExp("^"+ne+"*,"+ne+"*"),he=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),ue=new RegExp(oe),pe=new RegExp("^"+re+"$"),fe={ID:new RegExp("^#("+ae+")"),CLASS:new RegExp("^\\.("+ae+")"),TAG:new RegExp("^("+ae.replace("w","w*")+")"),ATTR:new RegExp("^"+se),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+ie+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,xe=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,_e=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Q.apply(K=ee.call(Y.childNodes),Y.childNodes),K[Y.childNodes.length].nodeType}catch(ke){Q={apply:K.length?function(e,t){Z.apply(e,ee.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}b=t.support={},T=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},D=t.setDocument=function(e){var t,i=e?e.ownerDocument||e:Y,n=i.defaultView;return i!==L&&9===i.nodeType&&i.documentElement?(L=i,I=i.documentElement,F=!T(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){D()},!1):n.attachEvent&&n.attachEvent("onunload",function(){D()})),b.attributes=a(function(e){return e.className="i",!e.getAttribute("className")}),b.getElementsByTagName=a(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),b.getElementsByClassName=xe.test(i.getElementsByClassName)&&a(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),b.getById=a(function(e){return I.appendChild(e).id=W,!i.getElementsByName||!i.getElementsByName(W).length}),b.getById?(w.find.ID=function(e,t){if(typeof t.getElementById!==$&&F){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}},w.filter.ID=function(e){var t=e.replace(be,we);return function(e){return e.getAttribute("id")===t}}):(delete w.find.ID,w.filter.ID=function(e){var t=e.replace(be,we);return function(e){var i=typeof e.getAttributeNode!==$&&e.getAttributeNode("id");return i&&i.value===t}}),w.find.TAG=b.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==$?t.getElementsByTagName(e):void 0}:function(e,t){var i,n=[],a=0,r=t.getElementsByTagName(e);if("*"===e){for(;i=r[a++];)1===i.nodeType&&n.push(i);return n}return r},w.find.CLASS=b.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==$&&F?t.getElementsByClassName(e):void 0},O=[],E=[],(b.qsa=xe.test(i.querySelectorAll))&&(a(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&E.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||E.push("\\["+ne+"*(?:value|"+ie+")"),e.querySelectorAll(":checked").length||E.push(":checked")}),a(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&E.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||E.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),E.push(",.*:")})),(b.matchesSelector=xe.test(B=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&a(function(e){b.disconnectedMatch=B.call(e,"div"),B.call(e,"[s!='']:x"),O.push("!=",oe)}),E=E.length&&new RegExp(E.join("|")),O=O.length&&new RegExp(O.join("|")),t=xe.test(I.compareDocumentPosition),N=t||xe.test(I.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return j=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!b.sortDetached&&t.compareDocumentPosition(e)===n?e===i||e.ownerDocument===Y&&N(Y,e)?-1:t===i||t.ownerDocument===Y&&N(Y,t)?1:A?te.call(A,e)-te.call(A,t):0:4&n?-1:1)}:function(e,t){if(e===t)return j=!0,0;var n,a=0,r=e.parentNode,o=t.parentNode,l=[e],d=[t];if(!r||!o)return e===i?-1:t===i?1:r?-1:o?1:A?te.call(A,e)-te.call(A,t):0;if(r===o)return s(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)d.unshift(n);for(;l[a]===d[a];)a++;return a?s(l[a],d[a]):l[a]===Y?-1:d[a]===Y?1:0},i):L},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==L&&D(e),i=i.replace(ce,"='$1']"),b.matchesSelector&&F&&(!O||!O.test(i))&&(!E||!E.test(i)))try{var n=B.call(e,i);if(n||b.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(a){}return t(i,L,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==L&&D(e),N(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==L&&D(e);var i=w.attrHandle[t.toLowerCase()],n=i&&G.call(w.attrHandle,t.toLowerCase())?i(e,t,!F):void 0;return void 0!==n?n:b.attributes||!F?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,a=0;if(j=!b.detectDuplicates,A=!b.sortStable&&e.slice(0),e.sort(U),j){for(;t=e[a++];)t===e[a]&&(n=i.push(a));for(;n--;)e.splice(i[n],1)}return A=null,e},k=t.getText=function(e){var t,i="",n=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=k(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[n++];)i+=k(t);return i},w=t.selectors={cacheLength:50,createPseudo:n,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,we),e[3]=(e[3]||e[4]||e[5]||"").replace(be,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&ue.test(i)&&(t=M(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==$&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(a){var r=t.attr(a,e);return null==r?"!="===i:i?(r+="","="===i?r===n:"!="===i?r!==n:"^="===i?n&&0===r.indexOf(n):"*="===i?n&&r.indexOf(n)>-1:"$="===i?n&&r.slice(-n.length)===n:"~="===i?(" "+r+" ").indexOf(n)>-1:"|="===i?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,i,n,a){var r="nth"!==e.slice(0,3),s="last"!==e.slice(-4),o="of-type"===t;return 1===n&&0===a?function(e){return!!e.parentNode}:function(t,i,l){var d,h,c,u,p,f,m=r!==s?"nextSibling":"previousSibling",g=t.parentNode,x=o&&t.nodeName.toLowerCase(),y=!l&&!o;if(g){if(r){for(;m;){for(c=t;c=c[m];)if(o?c.nodeName.toLowerCase()===x:1===c.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&y){for(h=g[W]||(g[W]={}),d=h[e]||[],p=d[0]===z&&d[1],u=d[0]===z&&d[2],c=p&&g.childNodes[p];c=++p&&c&&c[m]||(u=p=0)||f.pop();)if(1===c.nodeType&&++u&&c===t){h[e]=[z,p,u];break}}else if(y&&(d=(t[W]||(t[W]={}))[e])&&d[0]===z)u=d[1];else for(;(c=++p&&c&&c[m]||(u=p=0)||f.pop())&&((o?c.nodeName.toLowerCase()!==x:1!==c.nodeType)||!++u||(y&&((c[W]||(c[W]={}))[e]=[z,u]),c!==t)););return u-=a,u===n||u%n===0&&u/n>=0}}},PSEUDO:function(e,i){var a,r=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return r[W]?r(i):r.length>1?(a=[e,e,"",i],w.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,a=r(e,i),s=a.length;s--;)n=te.call(e,a[s]),e[n]=!(t[n]=a[s])}):function(e){return r(e,0,a)}):r}},pseudos:{not:n(function(e){var t=[],i=[],a=C(e.replace(le,"$1"));return a[W]?n(function(e,t,i,n){for(var r,s=a(e,null,n,[]),o=e.length;o--;)(r=s[o])&&(e[o]=!(t[o]=r))}):function(e,n,r){return t[0]=e,a(t,null,r,i),!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:n(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,we).toLowerCase(),function(t){var i;do if(i=F?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===e||0===i.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===I},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:d(function(){return[0]}),last:d(function(e,t){return[t-1]}),eq:d(function(e,t,i){return[0>i?i+t:i]}),even:d(function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e}),odd:d(function(e,t){for(var i=1;t>i;i+=2)e.push(i);return e}),lt:d(function(e,t,i){for(var n=0>i?i+t:i;--n>=0;)e.push(n);return e}),gt:d(function(e,t,i){for(var n=0>i?i+t:i;++n<t;)e.push(n);return e})}},w.pseudos.nth=w.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[_]=o(_);for(_ in{submit:!0,reset:!0})w.pseudos[_]=l(_);return c.prototype=w.filters=w.pseudos,w.setFilters=new c,M=t.tokenize=function(e,i){var n,a,r,s,o,l,d,h=R[e+" "];if(h)return i?0:h.slice(0);
for(o=e,l=[],d=w.preFilter;o;){(!n||(a=de.exec(o)))&&(a&&(o=o.slice(a[0].length)||o),l.push(r=[])),n=!1,(a=he.exec(o))&&(n=a.shift(),r.push({value:n,type:a[0].replace(le," ")}),o=o.slice(n.length));for(s in w.filter)!(a=fe[s].exec(o))||d[s]&&!(a=d[s](a))||(n=a.shift(),r.push({value:n,type:s,matches:a}),o=o.slice(n.length));if(!n)break}return i?o.length:o?t.error(e):R(e,l).slice(0)},C=t.compile=function(e,t){var i,n=[],a=[],r=V[e+" "];if(!r){for(t||(t=M(e)),i=t.length;i--;)r=y(t[i]),r[W]?n.push(r):a.push(r);r=V(e,v(a,n)),r.selector=e}return r},S=t.select=function(e,t,i,n){var a,r,s,o,l,d="function"==typeof e&&e,c=!n&&M(e=d.selector||e);if(i=i||[],1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(s=r[0]).type&&b.getById&&9===t.nodeType&&F&&w.relative[r[1].type]){if(t=(w.find.ID(s.matches[0].replace(be,we),t)||[])[0],!t)return i;d&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(a=fe.needsContext.test(e)?0:r.length;a--&&(s=r[a],!w.relative[o=s.type]);)if((l=w.find[o])&&(n=l(s.matches[0].replace(be,we),ve.test(r[0].type)&&h(t.parentNode)||t))){if(r.splice(a,1),e=n.length&&u(r),!e)return Q.apply(i,n),i;break}}return(d||C(e,c))(n,t,!F,i,ve.test(e)&&h(t.parentNode)||t),i},b.sortStable=W.split("").sort(U).join("")===W,b.detectDuplicates=!!j,D(),b.sortDetached=a(function(e){return 1&e.compareDocumentPosition(L.createElement("div"))}),a(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,i){return i?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),b.attributes&&a(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,i){return i||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),a(function(e){return null==e.getAttribute("disabled")})||r(ie,function(e,t,i){var n;return i?void 0:e[t]===!0?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);ae.find=de,ae.expr=de.selectors,ae.expr[":"]=ae.expr.pseudos,ae.unique=de.uniqueSort,ae.text=de.getText,ae.isXMLDoc=de.isXML,ae.contains=de.contains;var he=ae.expr.match.needsContext,ce=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ue=/^.[^:#\[\.,]*$/;ae.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?ae.find.matchesSelector(n,e)?[n]:[]:ae.find.matches(e,ae.grep(t,function(e){return 1===e.nodeType}))},ae.fn.extend({find:function(e){var t,i=[],n=this,a=n.length;if("string"!=typeof e)return this.pushStack(ae(e).filter(function(){for(t=0;a>t;t++)if(ae.contains(n[t],this))return!0}));for(t=0;a>t;t++)ae.find(e,n[t],i);return i=this.pushStack(a>1?ae.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(n(this,e||[],!1))},not:function(e){return this.pushStack(n(this,e||[],!0))},is:function(e){return!!n(this,"string"==typeof e&&he.test(e)?ae(e):e||[],!1).length}});var pe,fe=e.document,me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ge=ae.fn.init=function(e,t){var i,n;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:me.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||pe).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof ae?t[0]:t,ae.merge(this,ae.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:fe,!0)),ce.test(i[1])&&ae.isPlainObject(t))for(i in t)ae.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}if(n=fe.getElementById(i[2]),n&&n.parentNode){if(n.id!==i[2])return pe.find(e);this.length=1,this[0]=n}return this.context=fe,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ae.isFunction(e)?"undefined"!=typeof pe.ready?pe.ready(e):e(ae):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ae.makeArray(e,this))};ge.prototype=ae.fn,pe=ae(fe);var xe=/^(?:parents|prev(?:Until|All))/,ye={children:!0,contents:!0,next:!0,prev:!0};ae.extend({dir:function(e,t,i){for(var n=[],a=e[t];a&&9!==a.nodeType&&(void 0===i||1!==a.nodeType||!ae(a).is(i));)1===a.nodeType&&n.push(a),a=a[t];return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}}),ae.fn.extend({has:function(e){var t,i=ae(e,this),n=i.length;return this.filter(function(){for(t=0;n>t;t++)if(ae.contains(this,i[t]))return!0})},closest:function(e,t){for(var i,n=0,a=this.length,r=[],s=he.test(e)||"string"!=typeof e?ae(e,t||this.context):0;a>n;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&ae.find.matchesSelector(i,e))){r.push(i);break}return this.pushStack(r.length>1?ae.unique(r):r)},index:function(e){return e?"string"==typeof e?ae.inArray(this[0],ae(e)):ae.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ae.unique(ae.merge(this.get(),ae(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ae.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ae.dir(e,"parentNode")},parentsUntil:function(e,t,i){return ae.dir(e,"parentNode",i)},next:function(e){return a(e,"nextSibling")},prev:function(e){return a(e,"previousSibling")},nextAll:function(e){return ae.dir(e,"nextSibling")},prevAll:function(e){return ae.dir(e,"previousSibling")},nextUntil:function(e,t,i){return ae.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return ae.dir(e,"previousSibling",i)},siblings:function(e){return ae.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ae.sibling(e.firstChild)},contents:function(e){return ae.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ae.merge([],e.childNodes)}},function(e,t){ae.fn[e]=function(i,n){var a=ae.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(a=ae.filter(n,a)),this.length>1&&(ye[e]||(a=ae.unique(a)),xe.test(e)&&(a=a.reverse())),this.pushStack(a)}});var ve=/\S+/g,_e={};ae.Callbacks=function(e){e="string"==typeof e?_e[e]||r(e):ae.extend({},e);var t,i,n,a,s,o,l=[],d=!e.once&&[],h=function(r){for(i=e.memory&&r,n=!0,s=o||0,o=0,a=l.length,t=!0;l&&a>s;s++)if(l[s].apply(r[0],r[1])===!1&&e.stopOnFalse){i=!1;break}t=!1,l&&(d?d.length&&h(d.shift()):i?l=[]:c.disable())},c={add:function(){if(l){var n=l.length;!function r(t){ae.each(t,function(t,i){var n=ae.type(i);"function"===n?e.unique&&c.has(i)||l.push(i):i&&i.length&&"string"!==n&&r(i)})}(arguments),t?a=l.length:i&&(o=n,h(i))}return this},remove:function(){return l&&ae.each(arguments,function(e,i){for(var n;(n=ae.inArray(i,l,n))>-1;)l.splice(n,1),t&&(a>=n&&a--,s>=n&&s--)}),this},has:function(e){return e?ae.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=d=i=void 0,this},disabled:function(){return!l},lock:function(){return d=void 0,i||c.disable(),this},locked:function(){return!d},fireWith:function(e,i){return!l||n&&!d||(i=i||[],i=[e,i.slice?i.slice():i],t?d.push(i):h(i)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},ae.extend({Deferred:function(e){var t=[["resolve","done",ae.Callbacks("once memory"),"resolved"],["reject","fail",ae.Callbacks("once memory"),"rejected"],["notify","progress",ae.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ae.Deferred(function(i){ae.each(t,function(t,r){var s=ae.isFunction(e[t])&&e[t];a[r[1]](function(){var e=s&&s.apply(this,arguments);e&&ae.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r[0]+"With"](this===n?i.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ae.extend(e,n):n}},a={};return n.pipe=n.then,ae.each(t,function(e,r){var s=r[2],o=r[3];n[r[1]]=s.add,o&&s.add(function(){i=o},t[1^e][2].disable,t[2][2].lock),a[r[0]]=function(){return a[r[0]+"With"](this===a?n:this,arguments),this},a[r[0]+"With"]=s.fireWith}),n.promise(a),e&&e.call(a,a),a},when:function(e){var t,i,n,a=0,r=G.call(arguments),s=r.length,o=1!==s||e&&ae.isFunction(e.promise)?s:0,l=1===o?e:ae.Deferred(),d=function(e,i,n){return function(a){i[e]=this,n[e]=arguments.length>1?G.call(arguments):a,n===t?l.notifyWith(i,n):--o||l.resolveWith(i,n)}};if(s>1)for(t=new Array(s),i=new Array(s),n=new Array(s);s>a;a++)r[a]&&ae.isFunction(r[a].promise)?r[a].promise().done(d(a,n,r)).fail(l.reject).progress(d(a,i,t)):--o;return o||l.resolveWith(n,r),l.promise()}});var be;ae.fn.ready=function(e){return ae.ready.promise().done(e),this},ae.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ae.readyWait++:ae.ready(!0)},ready:function(e){if(e===!0?!--ae.readyWait:!ae.isReady){if(!fe.body)return setTimeout(ae.ready);ae.isReady=!0,e!==!0&&--ae.readyWait>0||(be.resolveWith(fe,[ae]),ae.fn.triggerHandler&&(ae(fe).triggerHandler("ready"),ae(fe).off("ready")))}}}),ae.ready.promise=function(t){if(!be)if(be=ae.Deferred(),"complete"===fe.readyState)setTimeout(ae.ready);else if(fe.addEventListener)fe.addEventListener("DOMContentLoaded",o,!1),e.addEventListener("load",o,!1);else{fe.attachEvent("onreadystatechange",o),e.attachEvent("onload",o);var i=!1;try{i=null==e.frameElement&&fe.documentElement}catch(n){}i&&i.doScroll&&!function a(){if(!ae.isReady){try{i.doScroll("left")}catch(e){return setTimeout(a,50)}s(),ae.ready()}}()}return be.promise(t)};var we,ke="undefined";for(we in ae(ie))break;ie.ownLast="0"!==we,ie.inlineBlockNeedsLayout=!1,ae(function(){var e,t,i,n;i=fe.getElementsByTagName("body")[0],i&&i.style&&(t=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),typeof t.style.zoom!==ke&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ie.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(i.style.zoom=1)),i.removeChild(n))}),function(){var e=fe.createElement("div");if(null==ie.deleteExpando){ie.deleteExpando=!0;try{delete e.test}catch(t){ie.deleteExpando=!1}}e=null}(),ae.acceptData=function(e){var t=ae.noData[(e.nodeName+" ").toLowerCase()],i=+e.nodeType||1;return 1!==i&&9!==i?!1:!t||t!==!0&&e.getAttribute("classid")===t};var Te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Me=/([A-Z])/g;ae.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ae.cache[e[ae.expando]]:e[ae.expando],!!e&&!d(e)},data:function(e,t,i){return h(e,t,i)},removeData:function(e,t){return c(e,t)},_data:function(e,t,i){return h(e,t,i,!0)},_removeData:function(e,t){return c(e,t,!0)}}),ae.fn.extend({data:function(e,t){var i,n,a,r=this[0],s=r&&r.attributes;if(void 0===e){if(this.length&&(a=ae.data(r),1===r.nodeType&&!ae._data(r,"parsedAttrs"))){for(i=s.length;i--;)s[i]&&(n=s[i].name,0===n.indexOf("data-")&&(n=ae.camelCase(n.slice(5)),l(r,n,a[n])));ae._data(r,"parsedAttrs",!0)}return a}return"object"==typeof e?this.each(function(){ae.data(this,e)}):arguments.length>1?this.each(function(){ae.data(this,e,t)}):r?l(r,e,ae.data(r,e)):void 0},removeData:function(e){return this.each(function(){ae.removeData(this,e)})}}),ae.extend({queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=ae._data(e,t),i&&(!n||ae.isArray(i)?n=ae._data(e,t,ae.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=ae.queue(e,t),n=i.length,a=i.shift(),r=ae._queueHooks(e,t),s=function(){ae.dequeue(e,t)};"inprogress"===a&&(a=i.shift(),n--),a&&("fx"===t&&i.unshift("inprogress"),delete r.stop,a.call(e,s,r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return ae._data(e,i)||ae._data(e,i,{empty:ae.Callbacks("once memory").add(function(){ae._removeData(e,t+"queue"),ae._removeData(e,i)})})}}),ae.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?ae.queue(this[0],e):void 0===t?this:this.each(function(){var i=ae.queue(this,e,t);ae._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&ae.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ae.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,a=ae.Deferred(),r=this,s=this.length,o=function(){--n||a.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)i=ae._data(r[s],e+"queueHooks"),i&&i.empty&&(n++,i.empty.add(o));return o(),a.promise(t)}});var Ce=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Se=["Top","Right","Bottom","Left"],Pe=function(e,t){return e=t||e,"none"===ae.css(e,"display")||!ae.contains(e.ownerDocument,e)},Ae=ae.access=function(e,t,i,n,a,r,s){var o=0,l=e.length,d=null==i;if("object"===ae.type(i)){a=!0;for(o in i)ae.access(e,t,o,i[o],!0,r,s)}else if(void 0!==n&&(a=!0,ae.isFunction(n)||(s=!0),d&&(s?(t.call(e,n),t=null):(d=t,t=function(e,t,i){return d.call(ae(e),i)})),t))for(;l>o;o++)t(e[o],i,s?n:n.call(e[o],o,t(e[o],i)));return a?e:d?t.call(e):l?t(e[0],i):r},je=/^(?:checkbox|radio)$/i;!function(){var e=fe.createElement("input"),t=fe.createElement("div"),i=fe.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ie.leadingWhitespace=3===t.firstChild.nodeType,ie.tbody=!t.getElementsByTagName("tbody").length,ie.htmlSerialize=!!t.getElementsByTagName("link").length,ie.html5Clone="<:nav></:nav>"!==fe.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,i.appendChild(e),ie.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,i.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",ie.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,ie.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){ie.noCloneEvent=!1}),t.cloneNode(!0).click()),null==ie.deleteExpando){ie.deleteExpando=!0;try{delete t.test}catch(n){ie.deleteExpando=!1}}}(),function(){var t,i,n=fe.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})i="on"+t,(ie[t+"Bubbles"]=i in e)||(n.setAttribute(i,"t"),ie[t+"Bubbles"]=n.attributes[i].expando===!1);n=null}();var De=/^(?:input|select|textarea)$/i,Le=/^key/,Ie=/^(?:mouse|pointer|contextmenu)|click/,Fe=/^(?:focusinfocus|focusoutblur)$/,Ee=/^([^.]*)(?:\.(.+)|)$/;ae.event={global:{},add:function(e,t,i,n,a){var r,s,o,l,d,h,c,u,p,f,m,g=ae._data(e);if(g){for(i.handler&&(l=i,i=l.handler,a=l.selector),i.guid||(i.guid=ae.guid++),(s=g.events)||(s=g.events={}),(h=g.handle)||(h=g.handle=function(e){return typeof ae===ke||e&&ae.event.triggered===e.type?void 0:ae.event.dispatch.apply(h.elem,arguments)},h.elem=e),t=(t||"").match(ve)||[""],o=t.length;o--;)r=Ee.exec(t[o])||[],p=m=r[1],f=(r[2]||"").split(".").sort(),p&&(d=ae.event.special[p]||{},p=(a?d.delegateType:d.bindType)||p,d=ae.event.special[p]||{},c=ae.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:a,needsContext:a&&ae.expr.match.needsContext.test(a),namespace:f.join(".")},l),(u=s[p])||(u=s[p]=[],u.delegateCount=0,d.setup&&d.setup.call(e,n,f,h)!==!1||(e.addEventListener?e.addEventListener(p,h,!1):e.attachEvent&&e.attachEvent("on"+p,h))),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),a?u.splice(u.delegateCount++,0,c):u.push(c),ae.event.global[p]=!0);e=null}},remove:function(e,t,i,n,a){var r,s,o,l,d,h,c,u,p,f,m,g=ae.hasData(e)&&ae._data(e);if(g&&(h=g.events)){for(t=(t||"").match(ve)||[""],d=t.length;d--;)if(o=Ee.exec(t[d])||[],p=m=o[1],f=(o[2]||"").split(".").sort(),p){for(c=ae.event.special[p]||{},p=(n?c.delegateType:c.bindType)||p,u=h[p]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=u.length;r--;)s=u[r],!a&&m!==s.origType||i&&i.guid!==s.guid||o&&!o.test(s.namespace)||n&&n!==s.selector&&("**"!==n||!s.selector)||(u.splice(r,1),s.selector&&u.delegateCount--,c.remove&&c.remove.call(e,s));l&&!u.length&&(c.teardown&&c.teardown.call(e,f,g.handle)!==!1||ae.removeEvent(e,p,g.handle),delete h[p])}else for(p in h)ae.event.remove(e,p+t[d],i,n,!0);ae.isEmptyObject(h)&&(delete g.handle,ae._removeData(e,"events"))}},trigger:function(t,i,n,a){var r,s,o,l,d,h,c,u=[n||fe],p=te.call(t,"type")?t.type:t,f=te.call(t,"namespace")?t.namespace.split("."):[];if(o=h=n=n||fe,3!==n.nodeType&&8!==n.nodeType&&!Fe.test(p+ae.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),s=p.indexOf(":")<0&&"on"+p,t=t[ae.expando]?t:new ae.Event(p,"object"==typeof t&&t),t.isTrigger=a?2:3,t.namespace=f.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:ae.makeArray(i,[t]),d=ae.event.special[p]||{},a||!d.trigger||d.trigger.apply(n,i)!==!1)){if(!a&&!d.noBubble&&!ae.isWindow(n)){for(l=d.delegateType||p,Fe.test(l+p)||(o=o.parentNode);o;o=o.parentNode)u.push(o),h=o;h===(n.ownerDocument||fe)&&u.push(h.defaultView||h.parentWindow||e)}for(c=0;(o=u[c++])&&!t.isPropagationStopped();)t.type=c>1?l:d.bindType||p,r=(ae._data(o,"events")||{})[t.type]&&ae._data(o,"handle"),r&&r.apply(o,i),r=s&&o[s],r&&r.apply&&ae.acceptData(o)&&(t.result=r.apply(o,i),t.result===!1&&t.preventDefault());if(t.type=p,!a&&!t.isDefaultPrevented()&&(!d._default||d._default.apply(u.pop(),i)===!1)&&ae.acceptData(n)&&s&&n[p]&&!ae.isWindow(n)){h=n[s],h&&(n[s]=null),ae.event.triggered=p;try{n[p]()}catch(m){}ae.event.triggered=void 0,h&&(n[s]=h)}return t.result}},dispatch:function(e){e=ae.event.fix(e);var t,i,n,a,r,s=[],o=G.call(arguments),l=(ae._data(this,"events")||{})[e.type]||[],d=ae.event.special[e.type]||{};if(o[0]=e,e.delegateTarget=this,!d.preDispatch||d.preDispatch.call(this,e)!==!1){for(s=ae.event.handlers.call(this,e,l),t=0;(a=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=a.elem,r=0;(n=a.handlers[r++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(n.namespace))&&(e.handleObj=n,e.data=n.data,i=((ae.event.special[n.origType]||{}).handle||n.handler).apply(a.elem,o),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return d.postDispatch&&d.postDispatch.call(this,e),e.result}},handlers:function(e,t){var i,n,a,r,s=[],o=t.delegateCount,l=e.target;if(o&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(a=[],r=0;o>r;r++)n=t[r],i=n.selector+" ",void 0===a[i]&&(a[i]=n.needsContext?ae(i,this).index(l)>=0:ae.find(i,this,null,[l]).length),a[i]&&a.push(n);a.length&&s.push({elem:l,handlers:a})}return o<t.length&&s.push({elem:this,handlers:t.slice(o)}),s},fix:function(e){if(e[ae.expando])return e;var t,i,n,a=e.type,r=e,s=this.fixHooks[a];for(s||(this.fixHooks[a]=s=Ie.test(a)?this.mouseHooks:Le.test(a)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,e=new ae.Event(r),t=n.length;t--;)i=n[t],e[i]=r[i];return e.target||(e.target=r.srcElement||fe),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var i,n,a,r=t.button,s=t.fromElement;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||fe,a=n.documentElement,i=n.body,e.pageX=t.clientX+(a&&a.scrollLeft||i&&i.scrollLeft||0)-(a&&a.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(a&&a.scrollTop||i&&i.scrollTop||0)-(a&&a.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?t.toElement:s),e.which||void 0===r||(e.which=1&r?1:2&r?3:4&r?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ae.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ae.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,i,n){var a=ae.extend(new ae.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?ae.event.trigger(a,null,t):ae.event.dispatch.call(t,a),a.isDefaultPrevented()&&i.preventDefault()}},ae.removeEvent=fe.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&(typeof e[n]===ke&&(e[n]=null),e.detachEvent(n,i))},ae.Event=function(e,t){return this instanceof ae.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?u:p):this.type=e,t&&ae.extend(this,t),this.timeStamp=e&&e.timeStamp||ae.now(),void(this[ae.expando]=!0)):new ae.Event(e,t)},ae.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=u,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=u,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=u,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},ae.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ae.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,a=e.relatedTarget,r=e.handleObj;return(!a||a!==n&&!ae.contains(n,a))&&(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),ie.submitBubbles||(ae.event.special.submit={setup:function(){return ae.nodeName(this,"form")?!1:void ae.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,i=ae.nodeName(t,"input")||ae.nodeName(t,"button")?t.form:void 0;i&&!ae._data(i,"submitBubbles")&&(ae.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),ae._data(i,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ae.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return ae.nodeName(this,"form")?!1:void ae.event.remove(this,"._submit")}}),ie.changeBubbles||(ae.event.special.change={setup:function(){return De.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ae.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ae.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ae.event.simulate("change",this,e,!0)})),!1):void ae.event.add(this,"beforeactivate._change",function(e){var t=e.target;De.test(t.nodeName)&&!ae._data(t,"changeBubbles")&&(ae.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ae.event.simulate("change",this.parentNode,e,!0)}),ae._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ae.event.remove(this,"._change"),!De.test(this.nodeName)}}),ie.focusinBubbles||ae.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){ae.event.simulate(t,e.target,ae.event.fix(e),!0)};ae.event.special[t]={setup:function(){var n=this.ownerDocument||this,a=ae._data(n,t);a||n.addEventListener(e,i,!0),ae._data(n,t,(a||0)+1)},teardown:function(){var n=this.ownerDocument||this,a=ae._data(n,t)-1;a?ae._data(n,t,a):(n.removeEventListener(e,i,!0),ae._removeData(n,t))}}}),ae.fn.extend({on:function(e,t,i,n,a){var r,s;if("object"==typeof e){"string"!=typeof t&&(i=i||t,t=void 0);for(r in e)this.on(r,t,i,e[r],a);return this}if(null==i&&null==n?(n=t,i=t=void 0):null==n&&("string"==typeof t?(n=i,i=void 0):(n=i,i=t,t=void 0)),n===!1)n=p;else if(!n)return this;return 1===a&&(s=n,n=function(e){return ae().off(e),s.apply(this,arguments)},n.guid=s.guid||(s.guid=ae.guid++)),this.each(function(){ae.event.add(this,e,n,i,t)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,t,i){var n,a;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,ae(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(a in e)this.off(a,t,e[a]);return this}return(t===!1||"function"==typeof t)&&(i=t,t=void 0),i===!1&&(i=p),this.each(function(){ae.event.remove(this,e,i,t)})},trigger:function(e,t){return this.each(function(){ae.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];return i?ae.event.trigger(e,t,i,!0):void 0}});var Oe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Be=/ jQuery\d+="(?:null|\d+)"/g,Ne=new RegExp("<(?:"+Oe+")[\\s/>]","i"),We=/^\s+/,Ye=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ze=/<([\w:]+)/,Xe=/<tbody/i,He=/<|&#?\w+;/,Re=/<(?:script|style|link)/i,Ve=/checked\s*(?:[^=]|=\s*.checked.)/i,Ue=/^$|\/(?:java|ecma)script/i,$e=/^true\/(.*)/,qe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ge={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ie.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ke=m(fe),Je=Ke.appendChild(fe.createElement("div"));Ge.optgroup=Ge.option,Ge.tbody=Ge.tfoot=Ge.colgroup=Ge.caption=Ge.thead,Ge.th=Ge.td,ae.extend({clone:function(e,t,i){var n,a,r,s,o,l=ae.contains(e.ownerDocument,e);if(ie.html5Clone||ae.isXMLDoc(e)||!Ne.test("<"+e.nodeName+">")?r=e.cloneNode(!0):(Je.innerHTML=e.outerHTML,Je.removeChild(r=Je.firstChild)),!(ie.noCloneEvent&&ie.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ae.isXMLDoc(e)))for(n=g(r),o=g(e),s=0;null!=(a=o[s]);++s)n[s]&&k(a,n[s]);if(t)if(i)for(o=o||g(e),n=n||g(r),s=0;null!=(a=o[s]);s++)w(a,n[s]);else w(e,r);return n=g(r,"script"),n.length>0&&b(n,!l&&g(e,"script")),n=o=a=null,r},buildFragment:function(e,t,i,n){for(var a,r,s,o,l,d,h,c=e.length,u=m(t),p=[],f=0;c>f;f++)if(r=e[f],r||0===r)if("object"===ae.type(r))ae.merge(p,r.nodeType?[r]:r);else if(He.test(r)){for(o=o||u.appendChild(t.createElement("div")),l=(ze.exec(r)||["",""])[1].toLowerCase(),h=Ge[l]||Ge._default,o.innerHTML=h[1]+r.replace(Ye,"<$1></$2>")+h[2],a=h[0];a--;)o=o.lastChild;if(!ie.leadingWhitespace&&We.test(r)&&p.push(t.createTextNode(We.exec(r)[0])),!ie.tbody)for(r="table"!==l||Xe.test(r)?"<table>"!==h[1]||Xe.test(r)?0:o:o.firstChild,a=r&&r.childNodes.length;a--;)ae.nodeName(d=r.childNodes[a],"tbody")&&!d.childNodes.length&&r.removeChild(d);for(ae.merge(p,o.childNodes),o.textContent="";o.firstChild;)o.removeChild(o.firstChild);o=u.lastChild}else p.push(t.createTextNode(r));for(o&&u.removeChild(o),ie.appendChecked||ae.grep(g(p,"input"),x),f=0;r=p[f++];)if((!n||-1===ae.inArray(r,n))&&(s=ae.contains(r.ownerDocument,r),o=g(u.appendChild(r),"script"),s&&b(o),i))for(a=0;r=o[a++];)Ue.test(r.type||"")&&i.push(r);return o=null,u},cleanData:function(e,t){for(var i,n,a,r,s=0,o=ae.expando,l=ae.cache,d=ie.deleteExpando,h=ae.event.special;null!=(i=e[s]);s++)if((t||ae.acceptData(i))&&(a=i[o],r=a&&l[a])){if(r.events)for(n in r.events)h[n]?ae.event.remove(i,n):ae.removeEvent(i,n,r.handle);l[a]&&(delete l[a],d?delete i[o]:typeof i.removeAttribute!==ke?i.removeAttribute(o):i[o]=null,q.push(a))}}}),ae.fn.extend({text:function(e){return Ae(this,function(e){return void 0===e?ae.text(this):this.empty().append((this[0]&&this[0].ownerDocument||fe).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var i,n=e?ae.filter(e,this):this,a=0;null!=(i=n[a]);a++)t||1!==i.nodeType||ae.cleanData(g(i)),i.parentNode&&(t&&ae.contains(i.ownerDocument,i)&&b(g(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ae.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ae.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ae.clone(this,e,t)})},html:function(e){return Ae(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Be,""):void 0;if("string"==typeof e&&!Re.test(e)&&(ie.htmlSerialize||!Ne.test(e))&&(ie.leadingWhitespace||!We.test(e))&&!Ge[(ze.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ye,"<$1></$2>");try{for(;n>i;i++)t=this[i]||{},1===t.nodeType&&(ae.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(a){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,ae.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=K.apply([],e);var i,n,a,r,s,o,l=0,d=this.length,h=this,c=d-1,u=e[0],p=ae.isFunction(u);if(p||d>1&&"string"==typeof u&&!ie.checkClone&&Ve.test(u))return this.each(function(i){var n=h.eq(i);p&&(e[0]=u.call(this,i,n.html())),n.domManip(e,t)});if(d&&(o=ae.buildFragment(e,this[0].ownerDocument,!1,this),i=o.firstChild,1===o.childNodes.length&&(o=i),i)){for(r=ae.map(g(o,"script"),v),a=r.length;d>l;l++)n=o,l!==c&&(n=ae.clone(n,!0,!0),a&&ae.merge(r,g(n,"script"))),t.call(this[l],n,l);if(a)for(s=r[r.length-1].ownerDocument,ae.map(r,_),l=0;a>l;l++)n=r[l],Ue.test(n.type||"")&&!ae._data(n,"globalEval")&&ae.contains(s,n)&&(n.src?ae._evalUrl&&ae._evalUrl(n.src):ae.globalEval((n.text||n.textContent||n.innerHTML||"").replace(qe,"")));o=i=null}return this}}),ae.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ae.fn[e]=function(e){for(var i,n=0,a=[],r=ae(e),s=r.length-1;s>=n;n++)i=n===s?this:this.clone(!0),ae(r[n])[t](i),J.apply(a,i.get());return this.pushStack(a)}});var Ze,Qe={};!function(){var e;ie.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,i,n;return i=fe.getElementsByTagName("body")[0],i&&i.style?(t=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),typeof t.style.zoom!==ke&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(fe.createElement("div")).style.width="5px",e=3!==t.offsetWidth),i.removeChild(n),e):void 0}}();var et,tt,it=/^margin/,nt=new RegExp("^("+Ce+")(?!px)[a-z%]+$","i"),at=/^(top|right|bottom|left)$/;e.getComputedStyle?(et=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},tt=function(e,t,i){var n,a,r,s,o=e.style;return i=i||et(e),s=i?i.getPropertyValue(t)||i[t]:void 0,i&&(""!==s||ae.contains(e.ownerDocument,e)||(s=ae.style(e,t)),nt.test(s)&&it.test(t)&&(n=o.width,a=o.minWidth,r=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=i.width,o.width=n,o.minWidth=a,o.maxWidth=r)),void 0===s?s:s+""}):fe.documentElement.currentStyle&&(et=function(e){return e.currentStyle},tt=function(e,t,i){var n,a,r,s,o=e.style;return i=i||et(e),s=i?i[t]:void 0,null==s&&o&&o[t]&&(s=o[t]),nt.test(s)&&!at.test(t)&&(n=o.left,a=e.runtimeStyle,r=a&&a.left,r&&(a.left=e.currentStyle.left),o.left="fontSize"===t?"1em":s,s=o.pixelLeft+"px",o.left=n,r&&(a.left=r)),void 0===s?s:s+""||"auto"}),function(){function t(){var t,i,n,a;i=fe.getElementsByTagName("body")[0],
i&&i.style&&(t=fe.createElement("div"),n=fe.createElement("div"),n.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",i.appendChild(n).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=s=!1,l=!0,e.getComputedStyle&&(r="1%"!==(e.getComputedStyle(t,null)||{}).top,s="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,a=t.appendChild(fe.createElement("div")),a.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",a.style.marginRight=a.style.width="0",t.style.width="1px",l=!parseFloat((e.getComputedStyle(a,null)||{}).marginRight)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=t.getElementsByTagName("td"),a[0].style.cssText="margin:0;border:0;padding:0;display:none",o=0===a[0].offsetHeight,o&&(a[0].style.display="",a[1].style.display="none",o=0===a[0].offsetHeight),i.removeChild(n))}var i,n,a,r,s,o,l;i=fe.createElement("div"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=i.getElementsByTagName("a")[0],n=a&&a.style,n&&(n.cssText="float:left;opacity:.5",ie.opacity="0.5"===n.opacity,ie.cssFloat=!!n.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===i.style.backgroundClip,ie.boxSizing=""===n.boxSizing||""===n.MozBoxSizing||""===n.WebkitBoxSizing,ae.extend(ie,{reliableHiddenOffsets:function(){return null==o&&t(),o},boxSizingReliable:function(){return null==s&&t(),s},pixelPosition:function(){return null==r&&t(),r},reliableMarginRight:function(){return null==l&&t(),l}}))}(),ae.swap=function(e,t,i,n){var a,r,s={};for(r in t)s[r]=e.style[r],e.style[r]=t[r];a=i.apply(e,n||[]);for(r in t)e.style[r]=s[r];return a};var rt=/alpha\([^)]*\)/i,st=/opacity\s*=\s*([^)]*)/,ot=/^(none|table(?!-c[ea]).+)/,lt=new RegExp("^("+Ce+")(.*)$","i"),dt=new RegExp("^([+-])=("+Ce+")","i"),ht={position:"absolute",visibility:"hidden",display:"block"},ct={letterSpacing:"0",fontWeight:"400"},ut=["Webkit","O","Moz","ms"];ae.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=tt(e,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ie.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,r,s,o=ae.camelCase(t),l=e.style;if(t=ae.cssProps[o]||(ae.cssProps[o]=S(l,o)),s=ae.cssHooks[t]||ae.cssHooks[o],void 0===i)return s&&"get"in s&&void 0!==(a=s.get(e,!1,n))?a:l[t];if(r=typeof i,"string"===r&&(a=dt.exec(i))&&(i=(a[1]+1)*a[2]+parseFloat(ae.css(e,t)),r="number"),null!=i&&i===i&&("number"!==r||ae.cssNumber[o]||(i+="px"),ie.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),!(s&&"set"in s&&void 0===(i=s.set(e,i,n)))))try{l[t]=i}catch(d){}}},css:function(e,t,i,n){var a,r,s,o=ae.camelCase(t);return t=ae.cssProps[o]||(ae.cssProps[o]=S(e.style,o)),s=ae.cssHooks[t]||ae.cssHooks[o],s&&"get"in s&&(r=s.get(e,!0,i)),void 0===r&&(r=tt(e,t,n)),"normal"===r&&t in ct&&(r=ct[t]),""===i||i?(a=parseFloat(r),i===!0||ae.isNumeric(a)?a||0:r):r}}),ae.each(["height","width"],function(e,t){ae.cssHooks[t]={get:function(e,i,n){return i?ot.test(ae.css(e,"display"))&&0===e.offsetWidth?ae.swap(e,ht,function(){return D(e,t,n)}):D(e,t,n):void 0},set:function(e,i,n){var a=n&&et(e);return A(e,i,n?j(e,t,n,ie.boxSizing&&"border-box"===ae.css(e,"boxSizing",!1,a),a):0)}}}),ie.opacity||(ae.cssHooks.opacity={get:function(e,t){return st.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,a=ae.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=n&&n.filter||i.filter||"";i.zoom=1,(t>=1||""===t)&&""===ae.trim(r.replace(rt,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===t||n&&!n.filter)||(i.filter=rt.test(r)?r.replace(rt,a):r+" "+a)}}),ae.cssHooks.marginRight=C(ie.reliableMarginRight,function(e,t){return t?ae.swap(e,{display:"inline-block"},tt,[e,"marginRight"]):void 0}),ae.each({margin:"",padding:"",border:"Width"},function(e,t){ae.cssHooks[e+t]={expand:function(i){for(var n=0,a={},r="string"==typeof i?i.split(" "):[i];4>n;n++)a[e+Se[n]+t]=r[n]||r[n-2]||r[0];return a}},it.test(e)||(ae.cssHooks[e+t].set=A)}),ae.fn.extend({css:function(e,t){return Ae(this,function(e,t,i){var n,a,r={},s=0;if(ae.isArray(t)){for(n=et(e),a=t.length;a>s;s++)r[t[s]]=ae.css(e,t[s],!1,n);return r}return void 0!==i?ae.style(e,t,i):ae.css(e,t)},e,t,arguments.length>1)},show:function(){return P(this,!0)},hide:function(){return P(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Pe(this)?ae(this).show():ae(this).hide()})}}),ae.Tween=L,L.prototype={constructor:L,init:function(e,t,i,n,a,r){this.elem=e,this.prop=i,this.easing=a||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(ae.cssNumber[i]?"":"px")},cur:function(){var e=L.propHooks[this.prop];return e&&e.get?e.get(this):L.propHooks._default.get(this)},run:function(e){var t,i=L.propHooks[this.prop];return this.options.duration?this.pos=t=ae.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ae.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ae.fx.step[e.prop]?ae.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ae.cssProps[e.prop]]||ae.cssHooks[e.prop])?ae.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ae.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ae.fx=L.prototype.init,ae.fx.step={};var pt,ft,mt=/^(?:toggle|show|hide)$/,gt=new RegExp("^(?:([+-])=|)("+Ce+")([a-z%]*)$","i"),xt=/queueHooks$/,yt=[O],vt={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),a=gt.exec(t),r=a&&a[3]||(ae.cssNumber[e]?"":"px"),s=(ae.cssNumber[e]||"px"!==r&&+n)&&gt.exec(ae.css(i.elem,e)),o=1,l=20;if(s&&s[3]!==r){r=r||s[3],a=a||[],s=+n||1;do o=o||".5",s/=o,ae.style(i.elem,e,s+r);while(o!==(o=i.cur()/n)&&1!==o&&--l)}return a&&(s=i.start=+s||+n||0,i.unit=r,i.end=a[1]?s+(a[1]+1)*a[2]:+a[2]),i}]};ae.Animation=ae.extend(N,{tweener:function(e,t){ae.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,a=e.length;a>n;n++)i=e[n],vt[i]=vt[i]||[],vt[i].unshift(t)},prefilter:function(e,t){t?yt.unshift(e):yt.push(e)}}),ae.speed=function(e,t,i){var n=e&&"object"==typeof e?ae.extend({},e):{complete:i||!i&&t||ae.isFunction(e)&&e,duration:e,easing:i&&t||t&&!ae.isFunction(t)&&t};return n.duration=ae.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ae.fx.speeds?ae.fx.speeds[n.duration]:ae.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){ae.isFunction(n.old)&&n.old.call(this),n.queue&&ae.dequeue(this,n.queue)},n},ae.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Pe).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var a=ae.isEmptyObject(e),r=ae.speed(t,i,n),s=function(){var t=N(this,ae.extend({},e),r);(a||ae._data(this,"finish"))&&t.stop(!0)};return s.finish=s,a||r.queue===!1?this.each(s):this.queue(r.queue,s)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,a=null!=e&&e+"queueHooks",r=ae.timers,s=ae._data(this);if(a)s[a]&&s[a].stop&&n(s[a]);else for(a in s)s[a]&&s[a].stop&&xt.test(a)&&n(s[a]);for(a=r.length;a--;)r[a].elem!==this||null!=e&&r[a].queue!==e||(r[a].anim.stop(i),t=!1,r.splice(a,1));(t||!i)&&ae.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,i=ae._data(this),n=i[e+"queue"],a=i[e+"queueHooks"],r=ae.timers,s=n?n.length:0;for(i.finish=!0,ae.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;s>t;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),ae.each(["toggle","show","hide"],function(e,t){var i=ae.fn[t];ae.fn[t]=function(e,n,a){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(F(t,!0),e,n,a)}}),ae.each({slideDown:F("show"),slideUp:F("hide"),slideToggle:F("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ae.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),ae.timers=[],ae.fx.tick=function(){var e,t=ae.timers,i=0;for(pt=ae.now();i<t.length;i++)e=t[i],e()||t[i]!==e||t.splice(i--,1);t.length||ae.fx.stop(),pt=void 0},ae.fx.timer=function(e){ae.timers.push(e),e()?ae.fx.start():ae.timers.pop()},ae.fx.interval=13,ae.fx.start=function(){ft||(ft=setInterval(ae.fx.tick,ae.fx.interval))},ae.fx.stop=function(){clearInterval(ft),ft=null},ae.fx.speeds={slow:600,fast:200,_default:400},ae.fn.delay=function(e,t){return e=ae.fx?ae.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},function(){var e,t,i,n,a;t=fe.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=t.getElementsByTagName("a")[0],i=fe.createElement("select"),a=i.appendChild(fe.createElement("option")),e=t.getElementsByTagName("input")[0],n.style.cssText="top:1px",ie.getSetAttribute="t"!==t.className,ie.style=/top/.test(n.getAttribute("style")),ie.hrefNormalized="/a"===n.getAttribute("href"),ie.checkOn=!!e.value,ie.optSelected=a.selected,ie.enctype=!!fe.createElement("form").enctype,i.disabled=!0,ie.optDisabled=!a.disabled,e=fe.createElement("input"),e.setAttribute("value",""),ie.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ie.radioValue="t"===e.value}();var _t=/\r/g;ae.fn.extend({val:function(e){var t,i,n,a=this[0];{if(arguments.length)return n=ae.isFunction(e),this.each(function(i){var a;1===this.nodeType&&(a=n?e.call(this,i,ae(this).val()):e,null==a?a="":"number"==typeof a?a+="":ae.isArray(a)&&(a=ae.map(a,function(e){return null==e?"":e+""})),t=ae.valHooks[this.type]||ae.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))});if(a)return t=ae.valHooks[a.type]||ae.valHooks[a.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(i=t.get(a,"value"))?i:(i=a.value,"string"==typeof i?i.replace(_t,""):null==i?"":i)}}}),ae.extend({valHooks:{option:{get:function(e){var t=ae.find.attr(e,"value");return null!=t?t:ae.trim(ae.text(e))}},select:{get:function(e){for(var t,i,n=e.options,a=e.selectedIndex,r="select-one"===e.type||0>a,s=r?null:[],o=r?a+1:n.length,l=0>a?o:r?a:0;o>l;l++)if(i=n[l],(i.selected||l===a)&&(ie.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!ae.nodeName(i.parentNode,"optgroup"))){if(t=ae(i).val(),r)return t;s.push(t)}return s},set:function(e,t){for(var i,n,a=e.options,r=ae.makeArray(t),s=a.length;s--;)if(n=a[s],ae.inArray(ae.valHooks.option.get(n),r)>=0)try{n.selected=i=!0}catch(o){n.scrollHeight}else n.selected=!1;return i||(e.selectedIndex=-1),a}}}}),ae.each(["radio","checkbox"],function(){ae.valHooks[this]={set:function(e,t){return ae.isArray(t)?e.checked=ae.inArray(ae(e).val(),t)>=0:void 0}},ie.checkOn||(ae.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var bt,wt,kt=ae.expr.attrHandle,Tt=/^(?:checked|selected)$/i,Mt=ie.getSetAttribute,Ct=ie.input;ae.fn.extend({attr:function(e,t){return Ae(this,ae.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ae.removeAttr(this,e)})}}),ae.extend({attr:function(e,t,i){var n,a,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return typeof e.getAttribute===ke?ae.prop(e,t,i):(1===r&&ae.isXMLDoc(e)||(t=t.toLowerCase(),n=ae.attrHooks[t]||(ae.expr.match.bool.test(t)?wt:bt)),void 0===i?n&&"get"in n&&null!==(a=n.get(e,t))?a:(a=ae.find.attr(e,t),null==a?void 0:a):null!==i?n&&"set"in n&&void 0!==(a=n.set(e,i,t))?a:(e.setAttribute(t,i+""),i):void ae.removeAttr(e,t))},removeAttr:function(e,t){var i,n,a=0,r=t&&t.match(ve);if(r&&1===e.nodeType)for(;i=r[a++];)n=ae.propFix[i]||i,ae.expr.match.bool.test(i)?Ct&&Mt||!Tt.test(i)?e[n]=!1:e[ae.camelCase("default-"+i)]=e[n]=!1:ae.attr(e,i,""),e.removeAttribute(Mt?i:n)},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&ae.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}}}),wt={set:function(e,t,i){return t===!1?ae.removeAttr(e,i):Ct&&Mt||!Tt.test(i)?e.setAttribute(!Mt&&ae.propFix[i]||i,i):e[ae.camelCase("default-"+i)]=e[i]=!0,i}},ae.each(ae.expr.match.bool.source.match(/\w+/g),function(e,t){var i=kt[t]||ae.find.attr;kt[t]=Ct&&Mt||!Tt.test(t)?function(e,t,n){var a,r;return n||(r=kt[t],kt[t]=a,a=null!=i(e,t,n)?t.toLowerCase():null,kt[t]=r),a}:function(e,t,i){return i?void 0:e[ae.camelCase("default-"+t)]?t.toLowerCase():null}}),Ct&&Mt||(ae.attrHooks.value={set:function(e,t,i){return ae.nodeName(e,"input")?void(e.defaultValue=t):bt&&bt.set(e,t,i)}}),Mt||(bt={set:function(e,t,i){var n=e.getAttributeNode(i);return n||e.setAttributeNode(n=e.ownerDocument.createAttribute(i)),n.value=t+="","value"===i||t===e.getAttribute(i)?t:void 0}},kt.id=kt.name=kt.coords=function(e,t,i){var n;return i?void 0:(n=e.getAttributeNode(t))&&""!==n.value?n.value:null},ae.valHooks.button={get:function(e,t){var i=e.getAttributeNode(t);return i&&i.specified?i.value:void 0},set:bt.set},ae.attrHooks.contenteditable={set:function(e,t,i){bt.set(e,""===t?!1:t,i)}},ae.each(["width","height"],function(e,t){ae.attrHooks[t]={set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}}})),ie.style||(ae.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var St=/^(?:input|select|textarea|button|object)$/i,Pt=/^(?:a|area)$/i;ae.fn.extend({prop:function(e,t){return Ae(this,ae.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ae.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),ae.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,i){var n,a,r,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return r=1!==s||!ae.isXMLDoc(e),r&&(t=ae.propFix[t]||t,a=ae.propHooks[t]),void 0!==i?a&&"set"in a&&void 0!==(n=a.set(e,i,t))?n:e[t]=i:a&&"get"in a&&null!==(n=a.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=ae.find.attr(e,"tabindex");return t?parseInt(t,10):St.test(e.nodeName)||Pt.test(e.nodeName)&&e.href?0:-1}}}}),ie.hrefNormalized||ae.each(["href","src"],function(e,t){ae.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ie.optSelected||(ae.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ae.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ae.propFix[this.toLowerCase()]=this}),ie.enctype||(ae.propFix.enctype="encoding");var At=/[\t\r\n\f]/g;ae.fn.extend({addClass:function(e){var t,i,n,a,r,s,o=0,l=this.length,d="string"==typeof e&&e;if(ae.isFunction(e))return this.each(function(t){ae(this).addClass(e.call(this,t,this.className))});if(d)for(t=(e||"").match(ve)||[];l>o;o++)if(i=this[o],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(At," "):" ")){for(r=0;a=t[r++];)n.indexOf(" "+a+" ")<0&&(n+=a+" ");s=ae.trim(n),i.className!==s&&(i.className=s)}return this},removeClass:function(e){var t,i,n,a,r,s,o=0,l=this.length,d=0===arguments.length||"string"==typeof e&&e;if(ae.isFunction(e))return this.each(function(t){ae(this).removeClass(e.call(this,t,this.className))});if(d)for(t=(e||"").match(ve)||[];l>o;o++)if(i=this[o],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(At," "):"")){for(r=0;a=t[r++];)for(;n.indexOf(" "+a+" ")>=0;)n=n.replace(" "+a+" "," ");s=e?ae.trim(n):"",i.className!==s&&(i.className=s)}return this},toggleClass:function(e,t){var i=typeof e;return"boolean"==typeof t&&"string"===i?t?this.addClass(e):this.removeClass(e):ae.isFunction(e)?this.each(function(i){ae(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var t,n=0,a=ae(this),r=e.match(ve)||[];t=r[n++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else(i===ke||"boolean"===i)&&(this.className&&ae._data(this,"__className__",this.className),this.className=this.className||e===!1?"":ae._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(At," ").indexOf(t)>=0)return!0;return!1}}),ae.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ae.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),ae.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}});var jt=ae.now(),Dt=/\?/,Lt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ae.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var i,n=null,a=ae.trim(t+"");return a&&!ae.trim(a.replace(Lt,function(e,t,a,r){return i&&t&&(n=0),0===n?e:(i=a||t,n+=!r-!a,"")}))?Function("return "+a)():ae.error("Invalid JSON: "+t)},ae.parseXML=function(t){var i,n;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(n=new DOMParser,i=n.parseFromString(t,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(t))}catch(a){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||ae.error("Invalid XML: "+t),i};var It,Ft,Et=/#.*$/,Ot=/([?&])_=[^&]*/,Bt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Nt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Wt=/^(?:GET|HEAD)$/,Yt=/^\/\//,zt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Xt={},Ht={},Rt="*/".concat("*");try{Ft=location.href}catch(Vt){Ft=fe.createElement("a"),Ft.href="",Ft=Ft.href}It=zt.exec(Ft.toLowerCase())||[],ae.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ft,type:"GET",isLocal:Nt.test(It[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ae.parseJSON,"text xml":ae.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?z(z(e,ae.ajaxSettings),t):z(ae.ajaxSettings,e)},ajaxPrefilter:W(Xt),ajaxTransport:W(Ht),ajax:function(e,t){function i(e,t,i,n){var a,h,x,y,_,w=t;2!==v&&(v=2,o&&clearTimeout(o),d=void 0,s=n||"",b.readyState=e>0?4:0,a=e>=200&&300>e||304===e,i&&(y=X(c,b,i)),y=H(c,y,b,a),a?(c.ifModified&&(_=b.getResponseHeader("Last-Modified"),_&&(ae.lastModified[r]=_),_=b.getResponseHeader("etag"),_&&(ae.etag[r]=_)),204===e||"HEAD"===c.type?w="nocontent":304===e?w="notmodified":(w=y.state,h=y.data,x=y.error,a=!x)):(x=w,(e||!w)&&(w="error",0>e&&(e=0))),b.status=e,b.statusText=(t||w)+"",a?f.resolveWith(u,[h,w,b]):f.rejectWith(u,[b,w,x]),b.statusCode(g),g=void 0,l&&p.trigger(a?"ajaxSuccess":"ajaxError",[b,c,a?h:x]),m.fireWith(u,[b,w]),l&&(p.trigger("ajaxComplete",[b,c]),--ae.active||ae.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,a,r,s,o,l,d,h,c=ae.ajaxSetup({},t),u=c.context||c,p=c.context&&(u.nodeType||u.jquery)?ae(u):ae.event,f=ae.Deferred(),m=ae.Callbacks("once memory"),g=c.statusCode||{},x={},y={},v=0,_="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(2===v){if(!h)for(h={};t=Bt.exec(s);)h[t[1].toLowerCase()]=t[2];t=h[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===v?s:null},setRequestHeader:function(e,t){var i=e.toLowerCase();return v||(e=y[i]=y[i]||e,x[e]=t),this},overrideMimeType:function(e){return v||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>v)for(t in e)g[t]=[g[t],e[t]];else b.always(e[b.status]);return this},abort:function(e){var t=e||_;return d&&d.abort(t),i(0,t),this}};if(f.promise(b).complete=m.add,b.success=b.done,b.error=b.fail,c.url=((e||c.url||Ft)+"").replace(Et,"").replace(Yt,It[1]+"//"),c.type=t.method||t.type||c.method||c.type,c.dataTypes=ae.trim(c.dataType||"*").toLowerCase().match(ve)||[""],null==c.crossDomain&&(n=zt.exec(c.url.toLowerCase()),c.crossDomain=!(!n||n[1]===It[1]&&n[2]===It[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(It[3]||("http:"===It[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=ae.param(c.data,c.traditional)),Y(Xt,c,t,b),2===v)return b;l=c.global,l&&0===ae.active++&&ae.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Wt.test(c.type),r=c.url,c.hasContent||(c.data&&(r=c.url+=(Dt.test(r)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=Ot.test(r)?r.replace(Ot,"$1_="+jt++):r+(Dt.test(r)?"&":"?")+"_="+jt++)),c.ifModified&&(ae.lastModified[r]&&b.setRequestHeader("If-Modified-Since",ae.lastModified[r]),ae.etag[r]&&b.setRequestHeader("If-None-Match",ae.etag[r])),(c.data&&c.hasContent&&c.contentType!==!1||t.contentType)&&b.setRequestHeader("Content-Type",c.contentType),b.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+Rt+"; q=0.01":""):c.accepts["*"]);for(a in c.headers)b.setRequestHeader(a,c.headers[a]);if(c.beforeSend&&(c.beforeSend.call(u,b,c)===!1||2===v))return b.abort();_="abort";for(a in{success:1,error:1,complete:1})b[a](c[a]);if(d=Y(Ht,c,t,b)){b.readyState=1,l&&p.trigger("ajaxSend",[b,c]),c.async&&c.timeout>0&&(o=setTimeout(function(){b.abort("timeout")},c.timeout));try{v=1,d.send(x,i)}catch(w){if(!(2>v))throw w;i(-1,w)}}else i(-1,"No Transport");return b},getJSON:function(e,t,i){return ae.get(e,t,i,"json")},getScript:function(e,t){return ae.get(e,void 0,t,"script")}}),ae.each(["get","post"],function(e,t){ae[t]=function(e,i,n,a){return ae.isFunction(i)&&(a=a||n,n=i,i=void 0),ae.ajax({url:e,type:t,dataType:a,data:i,success:n})}}),ae.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ae.fn[t]=function(e){return this.on(t,e)}}),ae._evalUrl=function(e){return ae.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ae.fn.extend({wrapAll:function(e){if(ae.isFunction(e))return this.each(function(t){ae(this).wrapAll(e.call(this,t))});if(this[0]){var t=ae(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ae.isFunction(e)?this.each(function(t){ae(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ae(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=ae.isFunction(e);return this.each(function(i){ae(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){ae.nodeName(this,"body")||ae(this).replaceWith(this.childNodes)}).end()}}),ae.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ie.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||ae.css(e,"display"))},ae.expr.filters.visible=function(e){return!ae.expr.filters.hidden(e)};var Ut=/%20/g,$t=/\[\]$/,qt=/\r?\n/g,Gt=/^(?:submit|button|image|reset|file)$/i,Kt=/^(?:input|select|textarea|keygen)/i;ae.param=function(e,t){var i,n=[],a=function(e,t){t=ae.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ae.ajaxSettings&&ae.ajaxSettings.traditional),ae.isArray(e)||e.jquery&&!ae.isPlainObject(e))ae.each(e,function(){a(this.name,this.value)});else for(i in e)R(i,e[i],t,a);return n.join("&").replace(Ut,"+")},ae.fn.extend({serialize:function(){return ae.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ae.prop(this,"elements");return e?ae.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ae(this).is(":disabled")&&Kt.test(this.nodeName)&&!Gt.test(e)&&(this.checked||!je.test(e))}).map(function(e,t){var i=ae(this).val();return null==i?null:ae.isArray(i)?ae.map(i,function(e){return{name:t.name,value:e.replace(qt,"\r\n")}}):{name:t.name,value:i.replace(qt,"\r\n")}}).get()}}),ae.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&V()||U()}:V;var Jt=0,Zt={},Qt=ae.ajaxSettings.xhr();e.ActiveXObject&&ae(e).on("unload",function(){for(var e in Zt)Zt[e](void 0,!0)}),ie.cors=!!Qt&&"withCredentials"in Qt,Qt=ie.ajax=!!Qt,Qt&&ae.ajaxTransport(function(e){if(!e.crossDomain||ie.cors){var t;return{send:function(i,n){var a,r=e.xhr(),s=++Jt;if(r.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)r[a]=e.xhrFields[a];e.mimeType&&r.overrideMimeType&&r.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)void 0!==i[a]&&r.setRequestHeader(a,i[a]+"");r.send(e.hasContent&&e.data||null),t=function(i,a){var o,l,d;if(t&&(a||4===r.readyState))if(delete Zt[s],t=void 0,r.onreadystatechange=ae.noop,a)4!==r.readyState&&r.abort();else{d={},o=r.status,"string"==typeof r.responseText&&(d.text=r.responseText);try{l=r.statusText}catch(h){l=""}o||!e.isLocal||e.crossDomain?1223===o&&(o=204):o=d.text?200:404}d&&n(o,l,d,r.getAllResponseHeaders())},e.async?4===r.readyState?setTimeout(t):r.onreadystatechange=Zt[s]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),ae.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ae.globalEval(e),e}}}),ae.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ae.ajaxTransport("script",function(e){if(e.crossDomain){var t,i=fe.head||ae("head")[0]||fe.documentElement;return{send:function(n,a){t=fe.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,i){(i||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,i||a(200,"success"))},i.insertBefore(t,i.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var ei=[],ti=/(=)\?(?=&|$)|\?\?/;ae.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ei.pop()||ae.expando+"_"+jt++;return this[e]=!0,e}}),ae.ajaxPrefilter("json jsonp",function(t,i,n){var a,r,s,o=t.jsonp!==!1&&(ti.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ti.test(t.data)&&"data");return o||"jsonp"===t.dataTypes[0]?(a=t.jsonpCallback=ae.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(ti,"$1"+a):t.jsonp!==!1&&(t.url+=(Dt.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return s||ae.error(a+" was not called"),s[0]},t.dataTypes[0]="json",r=e[a],e[a]=function(){s=arguments},n.always(function(){e[a]=r,t[a]&&(t.jsonpCallback=i.jsonpCallback,ei.push(a)),s&&ae.isFunction(r)&&r(s[0]),s=r=void 0}),"script"):void 0}),ae.parseHTML=function(e,t,i){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(i=t,t=!1),t=t||fe;var n=ce.exec(e),a=!i&&[];return n?[t.createElement(n[1])]:(n=ae.buildFragment([e],t,a),a&&a.length&&ae(a).remove(),ae.merge([],n.childNodes))};var ii=ae.fn.load;ae.fn.load=function(e,t,i){if("string"!=typeof e&&ii)return ii.apply(this,arguments);var n,a,r,s=this,o=e.indexOf(" ");return o>=0&&(n=ae.trim(e.slice(o,e.length)),e=e.slice(0,o)),ae.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),s.length>0&&ae.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){a=arguments,s.html(n?ae("<div>").append(ae.parseHTML(e)).find(n):e)}).complete(i&&function(e,t){s.each(i,a||[e.responseText,t,e])}),this},ae.expr.filters.animated=function(e){return ae.grep(ae.timers,function(t){return e===t.elem}).length};var ni=e.document.documentElement;ae.offset={setOffset:function(e,t,i){var n,a,r,s,o,l,d,h=ae.css(e,"position"),c=ae(e),u={};"static"===h&&(e.style.position="relative"),o=c.offset(),r=ae.css(e,"top"),l=ae.css(e,"left"),d=("absolute"===h||"fixed"===h)&&ae.inArray("auto",[r,l])>-1,d?(n=c.position(),s=n.top,a=n.left):(s=parseFloat(r)||0,a=parseFloat(l)||0),ae.isFunction(t)&&(t=t.call(e,i,o)),null!=t.top&&(u.top=t.top-o.top+s),null!=t.left&&(u.left=t.left-o.left+a),"using"in t?t.using.call(e,u):c.css(u)}},ae.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ae.offset.setOffset(this,e,t)});var t,i,n={top:0,left:0},a=this[0],r=a&&a.ownerDocument;if(r)return t=r.documentElement,ae.contains(t,a)?(typeof a.getBoundingClientRect!==ke&&(n=a.getBoundingClientRect()),i=$(r),{top:n.top+(i.pageYOffset||t.scrollTop)-(t.clientTop||0),left:n.left+(i.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):n},position:function(){if(this[0]){var e,t,i={top:0,left:0},n=this[0];return"fixed"===ae.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ae.nodeName(e[0],"html")||(i=e.offset()),i.top+=ae.css(e[0],"borderTopWidth",!0),i.left+=ae.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-ae.css(n,"marginTop",!0),left:t.left-i.left-ae.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||ni;e&&!ae.nodeName(e,"html")&&"static"===ae.css(e,"position");)e=e.offsetParent;return e||ni})}}),ae.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i=/Y/.test(t);ae.fn[e]=function(n){return Ae(this,function(e,n,a){var r=$(e);return void 0===a?r?t in r?r[t]:r.document.documentElement[n]:e[n]:void(r?r.scrollTo(i?ae(r).scrollLeft():a,i?a:ae(r).scrollTop()):e[n]=a)},e,n,arguments.length,null)}}),ae.each(["top","left"],function(e,t){ae.cssHooks[t]=C(ie.pixelPosition,function(e,i){return i?(i=tt(e,t),nt.test(i)?ae(e).position()[t]+"px":i):void 0})}),ae.each({Height:"height",Width:"width"},function(e,t){ae.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){ae.fn[n]=function(n,a){var r=arguments.length&&(i||"boolean"!=typeof n),s=i||(n===!0||a===!0?"margin":"border");return Ae(this,function(t,i,n){var a;return ae.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===n?ae.css(t,i,s):ae.style(t,i,n,s)},t,r?n:void 0,r,null)}})}),ae.fn.size=function(){return this.length},ae.fn.andSelf=ae.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ae});var ai=e.jQuery,ri=e.$;return ae.noConflict=function(t){return e.$===ae&&(e.$=ri),t&&e.jQuery===ae&&(e.jQuery=ai),ae},typeof t===ke&&(e.jQuery=e.$=ae),ae}),function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var i,n=e(document);e.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",
enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(t){var i=e('meta[name="csrf-token"]').attr("content");i&&t.setRequestHeader("X-CSRF-Token",i)},refreshCSRFTokens:function(){var t=e("meta[name=csrf-token]").attr("content"),i=e("meta[name=csrf-param]").attr("content");e('form input[name="'+i+'"]').val(t)},fire:function(t,i,n){var a=e.Event(i);return t.trigger(a,n),a.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},handleRemote:function(n){var a,r,s,o,l,d;if(i.fire(n,"ajax:before")){if(o=n.data("with-credentials")||null,l=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,n.is("form")){a=n.attr("method"),r=n.attr("action"),s=n.serializeArray();var h=n.data("ujs:submit-button");h&&(s.push(h),n.data("ujs:submit-button",null))}else n.is(i.inputChangeSelector)?(a=n.data("method"),r=n.data("url"),s=n.serialize(),n.data("params")&&(s=s+"&"+n.data("params"))):n.is(i.buttonClickSelector)?(a=n.data("method")||"get",r=n.data("url"),s=n.serialize(),n.data("params")&&(s=s+"&"+n.data("params"))):(a=n.data("method"),r=i.href(n),s=n.data("params")||null);return d={type:a||"GET",data:s,dataType:l,beforeSend:function(e,a){return a.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+a.accepts.script),i.fire(n,"ajax:beforeSend",[e,a])?void n.trigger("ajax:send",e):!1},success:function(e,t,i){n.trigger("ajax:success",[e,t,i])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,i){n.trigger("ajax:error",[e,t,i])},crossDomain:i.isCrossDomain(r)},o&&(d.xhrFields={withCredentials:o}),r&&(d.url=r),i.ajax(d)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var i=document.createElement("a");try{return i.href=e,i.href=i.href,!((!i.protocol||":"===i.protocol)&&!i.host||t.protocol+"//"+t.host==i.protocol+"//"+i.host)}catch(n){return!0}},handleMethod:function(n){var a=i.href(n),r=n.data("method"),s=n.attr("target"),o=e("meta[name=csrf-token]").attr("content"),l=e("meta[name=csrf-param]").attr("content"),d=e('<form method="post" action="'+a+'"></form>'),h='<input name="_method" value="'+r+'" type="hidden" />';l===t||o===t||i.isCrossDomain(a)||(h+='<input name="'+l+'" value="'+o+'" type="hidden" />'),s&&d.attr("target",s),d.hide().append(h).appendTo("body"),d.submit()},formElements:function(t,i){return t.is("form")?e(t[0].elements).filter(i):t.find(i)},disableFormElements:function(t){i.formElements(t,i.disableSelector).each(function(){i.disableFormElement(e(this))})},disableFormElement:function(e){var i,n;i=e.is("button")?"html":"val",n=e.data("disable-with"),e.data("ujs:enable-with",e[i]()),n!==t&&e[i](n),e.prop("disabled",!0)},enableFormElements:function(t){i.formElements(t,i.enableSelector).each(function(){i.enableFormElement(e(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[t](e.data("ujs:enable-with")),e.prop("disabled",!1)},allowAction:function(e){var t,n=e.data("confirm"),a=!1;return n?(i.fire(e,"confirm")&&(a=i.confirm(n),t=i.fire(e,"confirm:complete",[a])),a&&t):!0},blankInputs:function(t,i,n){var a,r,s=e(),o=i||"input,textarea",l=t.find(o);return l.each(function(){if(a=e(this),r=a.is("input[type=checkbox],input[type=radio]")?a.is(":checked"):a.val(),!r==!n){if(a.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+a.attr("name")+'"]').length)return!0;s=s.add(a)}}),s.length?s:!1},nonBlankInputs:function(e,t){return i.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var n=e.data("disable-with");e.data("ujs:enable-with",e.html()),n!==t&&e.html(n),e.bind("click.railsDisable",function(e){return i.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},i.fire(n,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,n){e.crossDomain||i.CSRFProtection(n)}),n.delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(e(this))}),n.delegate(i.buttonDisableSelector,"ajax:complete",function(){i.enableFormElement(e(this))}),n.delegate(i.linkClickSelector,"click.rails",function(n){var a=e(this),r=a.data("method"),s=a.data("params"),o=n.metaKey||n.ctrlKey;if(!i.allowAction(a))return i.stopEverything(n);if(!o&&a.is(i.linkDisableSelector)&&i.disableElement(a),a.data("remote")!==t){if(o&&(!r||"GET"===r)&&!s)return!0;var l=i.handleRemote(a);return l===!1?i.enableElement(a):l.error(function(){i.enableElement(a)}),!1}return a.data("method")?(i.handleMethod(a),!1):void 0}),n.delegate(i.buttonClickSelector,"click.rails",function(t){var n=e(this);if(!i.allowAction(n))return i.stopEverything(t);n.is(i.buttonDisableSelector)&&i.disableFormElement(n);var a=i.handleRemote(n);return a===!1?i.enableFormElement(n):a.error(function(){i.enableFormElement(n)}),!1}),n.delegate(i.inputChangeSelector,"change.rails",function(t){var n=e(this);return i.allowAction(n)?(i.handleRemote(n),!1):i.stopEverything(t)}),n.delegate(i.formSubmitSelector,"submit.rails",function(n){var a,r,s=e(this),o=s.data("remote")!==t;if(!i.allowAction(s))return i.stopEverything(n);if(s.attr("novalidate")==t&&(a=i.blankInputs(s,i.requiredInputSelector),a&&i.fire(s,"ajax:aborted:required",[a])))return i.stopEverything(n);if(o){if(r=i.nonBlankInputs(s,i.fileInputSelector)){setTimeout(function(){i.disableFormElements(s)},13);var l=i.fire(s,"ajax:aborted:file",[r]);return l||setTimeout(function(){i.enableFormElements(s)},13),l}return i.handleRemote(s),!1}setTimeout(function(){i.disableFormElements(s)},13)}),n.delegate(i.formInputClickSelector,"click.rails",function(t){var n=e(this);if(!i.allowAction(n))return i.stopEverything(t);var a=n.attr("name"),r=a?{name:a,value:n.val()}:null;n.closest("form").data("ujs:submit-button",r)}),n.delegate(i.formSubmitSelector,"ajax:send.rails",function(t){this==t.target&&i.disableFormElements(e(this))}),n.delegate(i.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&i.enableFormElements(e(this))}),e(function(){i.refreshCSRFTokens()}))}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}e.fn.emulateTransitionEnd=function(t){var i=!1,n=this;e(this).one("bsTransitionEnd",function(){i=!0});var a=function(){i||e(n).trigger(e.support.transition.end)};return setTimeout(a,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),a=i.data("bs.alert");a||i.data("bs.alert",a=new n(this)),"string"==typeof t&&a[t].call(i)})}var i='[data-dismiss="alert"]',n=function(t){e(t).on("click",i,this.close)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.prototype.close=function(t){function i(){s.detach().trigger("closed.bs.alert").remove()}var a=e(this),r=a.attr("data-target");r||(r=a.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var s=e(r);t&&t.preventDefault(),s.length||(s=a.closest(".alert")),s.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var a=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=a,this},e(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),a=n.data("bs.button"),r="object"==typeof t&&t;a||n.data("bs.button",a=new i(this,r)),"toggle"==t?a.toggle():t&&a.setState(t)})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.6",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(t){var i="disabled",n=this.$element,a=n.is("input")?"val":"html",r=n.data();t+="Text",null==r.resetText&&n.data("resetText",n[a]()),setTimeout(e.proxy(function(){n[a](null==r[t]?this.options[t]:r[t]),"loadingText"==t?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),e&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=t,e.fn.button.Constructor=i,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=e(i.target);n.hasClass("btn")||(n=n.closest(".btn")),t.call(n,"toggle"),e(i.target).is('input[type="radio"]')||e(i.target).is('input[type="checkbox"]')||i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),a=n.data("bs.carousel"),r=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t),s="string"==typeof t?t:r.slide;a||n.data("bs.carousel",a=new i(this,r)),"number"==typeof t?a.to(t):s?a[s]():r.interval&&a.pause().cycle()})}var i=function(t,i){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};i.VERSION="3.3.6",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},i.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},i.prototype.getItemForDirection=function(e,t){var i=this.getItemIndex(t),n="prev"==e&&0===i||"next"==e&&i==this.$items.length-1;if(n&&!this.options.wrap)return t;var a="prev"==e?-1:1,r=(i+a)%this.$items.length;return this.$items.eq(r)},i.prototype.to=function(e){var t=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",this.$items.eq(e))},i.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(t,n){var a=this.$element.find(".item.active"),r=n||this.getItemForDirection(t,a),s=this.interval,o="next"==t?"left":"right",l=this;if(r.hasClass("active"))return this.sliding=!1;var d=r[0],h=e.Event("slide.bs.carousel",{relatedTarget:d,direction:o});if(this.$element.trigger(h),!h.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=e(this.$indicators.children()[this.getItemIndex(r)]);c&&c.addClass("active")}var u=e.Event("slid.bs.carousel",{relatedTarget:d,direction:o});return e.support.transition&&this.$element.hasClass("slide")?(r.addClass(t),r[0].offsetWidth,a.addClass(o),r.addClass(o),a.one("bsTransitionEnd",function(){r.removeClass([t,o].join(" ")).addClass("active"),a.removeClass(["active",o].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(u)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(a.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(u)),s&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=i,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this};var a=function(i){var n,a=e(this),r=e(a.attr("data-target")||(n=a.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var s=e.extend({},r.data(),a.data()),o=a.attr("data-slide-to");o&&(s.interval=!1),t.call(r,s),o&&r.data("bs.carousel").to(o),i.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",a).on("click.bs.carousel.data-api","[data-slide-to]",a),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var i=e(this);t.call(i,i.data())})})}(jQuery),+function(e){"use strict";function t(t){var i,n=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return e(n)}function i(t){return this.each(function(){var i=e(this),a=i.data("bs.collapse"),r=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);!a&&r.toggle&&/show|hide/.test(t)&&(r.toggle=!1),a||i.data("bs.collapse",a=new n(this,r)),"string"==typeof t&&a[t]()})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.6",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,a=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(a&&a.length&&(t=a.data("bs.collapse"),t&&t.transitioning))){var r=e.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){a&&a.length&&(i.call(a,"hide"),t||a.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return o.call(this);var l=e.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[s](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var a=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[i](0).one("bsTransitionEnd",e.proxy(a,this)).emulateTransitionEnd(n.TRANSITION_DURATION):a.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(i,n){var a=e(n);this.addAriaAndCollapsedClass(t(a),a)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(e,t){var i=e.hasClass("in");e.attr("aria-expanded",i),t.toggleClass("collapsed",!i).attr("aria-expanded",i)};var a=e.fn.collapse;e.fn.collapse=i,e.fn.collapse.Constructor=n,e.fn.collapse.noConflict=function(){return e.fn.collapse=a,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var a=e(this);a.attr("data-target")||n.preventDefault();var r=t(a),s=r.data("bs.collapse"),o=s?"toggle":a.data();i.call(r,o)})}(jQuery),+function(e){"use strict";function t(t){var i=t.attr("data-target");i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&e(i);return n&&n.length?n:t.parent()}function i(i){i&&3===i.which||(e(a).remove(),e(r).each(function(){var n=e(this),a=t(n),r={relatedTarget:this};a.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&e.contains(a[0],i.target)||(a.trigger(i=e.Event("hide.bs.dropdown",r)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),a.removeClass("open").trigger(e.Event("hidden.bs.dropdown",r)))))}))}function n(t){return this.each(function(){var i=e(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new s(this)),"string"==typeof t&&n[t].call(i)})}var a=".dropdown-backdrop",r='[data-toggle="dropdown"]',s=function(t){e(t).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.6",s.prototype.toggle=function(n){var a=e(this);if(!a.is(".disabled, :disabled")){var r=t(a),s=r.hasClass("open");if(i(),!s){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",i);var o={relatedTarget:this};if(r.trigger(n=e.Event("show.bs.dropdown",o)),n.isDefaultPrevented())return;a.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger(e.Event("shown.bs.dropdown",o))}return!1}},s.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=e(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var a=t(n),s=a.hasClass("open");if(!s&&27!=i.which||s&&27==i.which)return 27==i.which&&a.find(r).trigger("focus"),n.trigger("click");var o=" li:not(.disabled):visible a",l=a.find(".dropdown-menu"+o);if(l.length){var d=l.index(i.target);38==i.which&&d>0&&d--,40==i.which&&d<l.length-1&&d++,~d||(d=0),l.eq(d).trigger("focus")}}}};var o=e.fn.dropdown;e.fn.dropdown=n,e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",r,s.prototype.toggle).on("keydown.bs.dropdown.data-api",r,s.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",s.prototype.keydown)}(jQuery),+function(e){"use strict";function t(t,n){return this.each(function(){var a=e(this),r=a.data("bs.modal"),s=e.extend({},i.DEFAULTS,a.data(),"object"==typeof t&&t);r||a.data("bs.modal",r=new i(this,s)),"string"==typeof t?r[t](n):s.show&&r.show(n)})}var i=function(t,i){this.options=i,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.6",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},i.prototype.show=function(t){var n=this,a=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(a),this.isShown||a.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var a=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),a&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var r=e.Event("shown.bs.modal",{relatedTarget:t});a?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(r)}))},i.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(t){var n=this,a=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=e.support.transition&&a;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+a).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;r?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){n.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):s()}else t&&t()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var n=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=i,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=e(this),a=n.attr("href"),r=e(n.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(a)&&a},r.data(),n.data());n.is("a")&&i.preventDefault(),r.one("show.bs.modal",function(e){e.isDefaultPrevented()||r.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),t.call(r,s,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),a=n.data("bs.tooltip"),r="object"==typeof t&&t;(a||!/destroy|hide/.test(t))&&(a||n.data("bs.tooltip",a=new i(this,r)),"string"==typeof t&&a[t]())})}var i=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};i.VERSION="3.3.6",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(t,i,n){if(this.enabled=!0,this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var a=this.options.trigger.split(" "),r=a.length;r--;){var s=a[r];if("click"==s)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=s){var o="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},i.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&e.each(this._options,function(e,n){i[e]!=n&&(t[e]=n)}),t},i.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusin"==t.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},i.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusout"==t.type?"focus":"hover"]=!1),i.isInStateTrue()?void 0:(clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide())},i.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var n=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!n)return;var a=this,r=this.tip(),s=this.getUID(this.type);this.setContent(),r.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&r.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,d=l.test(o);d&&(o=o.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var h=this.getPosition(),c=r[0].offsetWidth,u=r[0].offsetHeight;if(d){var p=o,f=this.getPosition(this.$viewport);o="bottom"==o&&h.bottom+u>f.bottom?"top":"top"==o&&h.top-u<f.top?"bottom":"right"==o&&h.right+c>f.width?"left":"left"==o&&h.left-c<f.left?"right":o,r.removeClass(p).addClass(o)}var m=this.getCalculatedOffset(o,h,c,u);this.applyPlacement(m,o);var g=function(){var e=a.hoverState;a.$element.trigger("shown.bs."+a.type),a.hoverState=null,"out"==e&&a.leave(a)};e.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",g).emulateTransitionEnd(i.TRANSITION_DURATION):g()}},i.prototype.applyPlacement=function(t,i){var n=this.tip(),a=n[0].offsetWidth,r=n[0].offsetHeight,s=parseInt(n.css("margin-top"),10),o=parseInt(n.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(o)&&(o=0),t.top+=s,t.left+=o,e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),n.addClass("in");var l=n[0].offsetWidth,d=n[0].offsetHeight;"top"==i&&d!=r&&(t.top=t.top+r-d);var h=this.getViewportAdjustedDelta(i,t,l,d);h.left?t.left+=h.left:t.top+=h.top;var c=/top|bottom/.test(i),u=c?2*h.left-a+l:2*h.top-r+d,p=c?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(u,n[0][p],c)},i.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},i.prototype.hide=function(t){function n(){"in"!=a.hoverState&&r.detach(),a.$element.removeAttr("aria-describedby").trigger("hidden.bs."+a.type),t&&t()}var a=this,r=e(this.$tip),s=e.Event("hide.bs."+this.type);return this.$element.trigger(s),s.isDefaultPrevented()?void 0:(r.removeClass("in"),e.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(t){t=t||this.$element;var i=t[0],n="BODY"==i.tagName,a=i.getBoundingClientRect();null==a.width&&(a=e.extend({},a,{
width:a.right-a.left,height:a.bottom-a.top}));var r=n?{top:0,left:0}:t.offset(),s={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},o=n?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},a,s,o,r)},i.prototype.getCalculatedOffset=function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},i.prototype.getViewportAdjustedDelta=function(e,t,i,n){var a={top:0,left:0};if(!this.$viewport)return a;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(e)){var o=t.top-r-s.scroll,l=t.top+r-s.scroll+n;o<s.top?a.top=s.top-o:l>s.top+s.height&&(a.top=s.top+s.height-l)}else{var d=t.left-r,h=t.left+r+i;d<s.left?a.left=s.left-d:h>s.right&&(a.left=s.left+s.width-h)}return a},i.prototype.getTitle=function(){var e,t=this.$element,i=this.options;return e=t.attr("data-original-title")||("function"==typeof i.title?i.title.call(t[0]):i.title)},i.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(t){var i=this;t&&(i=e(t.currentTarget).data("bs."+this.type),i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i))),t?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var n=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=i,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),a=n.data("bs.popover"),r="object"==typeof t&&t;(a||!/destroy|hide/.test(t))&&(a||n.data("bs.popover",a=new i(this,r)),"string"==typeof t&&a[t]())})}var i=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.6",i.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=i,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),+function(e){"use strict";function t(i,n){this.$body=e(document.body),this.$scrollElement=e(e(i).is(document.body)?window:i),this.options=e.extend({},t.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=e(this),a=n.data("bs.scrollspy"),r="object"==typeof i&&i;a||n.data("bs.scrollspy",a=new t(this,r)),"string"==typeof i&&a[i]()})}t.VERSION="3.3.6",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),a=t.data("target")||t.attr("href"),r=/^#./.test(a)&&e(a);return r&&r.length&&r.is(":visible")&&[[r[i]().top+n,a]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),a=this.offsets,r=this.targets,s=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),t>=n)return s!=(e=r[r.length-1])&&this.activate(e);if(s&&t<a[0])return this.activeTarget=null,this.clear();for(e=a.length;e--;)s!=r[e]&&t>=a[e]&&(void 0===a[e+1]||t<a[e+1])&&this.activate(r[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=e.fn.scrollspy;e.fn.scrollspy=i,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),a=n.data("bs.tab");a||n.data("bs.tab",a=new i(this)),"string"==typeof t&&a[t]()})}var i=function(t){this.element=e(t)};i.VERSION="3.3.6",i.TRANSITION_DURATION=150,i.prototype.show=function(){var t=this.element,i=t.closest("ul:not(.dropdown-menu)"),n=t.data("target");if(n||(n=t.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var a=i.find(".active:last a"),r=e.Event("hide.bs.tab",{relatedTarget:t[0]}),s=e.Event("show.bs.tab",{relatedTarget:a[0]});if(a.trigger(r),t.trigger(s),!s.isDefaultPrevented()&&!r.isDefaultPrevented()){var o=e(n);this.activate(t.closest("li"),i),this.activate(o,o.parent(),function(){a.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:a[0]})})}}},i.prototype.activate=function(t,n,a){function r(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),a&&a()}var s=n.find("> .active"),o=a&&e.support.transition&&(s.length&&s.hasClass("fade")||!!n.find("> .fade").length);s.length&&o?s.one("bsTransitionEnd",r).emulateTransitionEnd(i.TRANSITION_DURATION):r(),s.removeClass("in")};var n=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=i,e.fn.tab.noConflict=function(){return e.fn.tab=n,this};var a=function(i){i.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',a).on("click.bs.tab.data-api",'[data-toggle="pill"]',a)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),a=n.data("bs.affix"),r="object"==typeof t&&t;a||n.data("bs.affix",a=new i(this,r)),"string"==typeof t&&a[t]()})}var i=function(t,n){this.options=e.extend({},i.DEFAULTS,n),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.6",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(e,t,i,n){var a=this.$target.scrollTop(),r=this.$element.offset(),s=this.$target.height();if(null!=i&&"top"==this.affixed)return i>a?"top":!1;if("bottom"==this.affixed)return null!=i?a+this.unpin<=r.top?!1:"bottom":e-n>=a+s?!1:"bottom";var o=null==this.affixed,l=o?a:r.top,d=o?s:t;return null!=i&&i>=a?"top":null!=n&&l+d>=e-n?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},i.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),n=this.options.offset,a=n.top,r=n.bottom,s=Math.max(e(document).height(),e(document.body).height());"object"!=typeof n&&(r=a=n),"function"==typeof a&&(a=n.top(this.$element)),"function"==typeof r&&(r=n.bottom(this.$element));var o=this.getState(s,t,a,r);if(this.affixed!=o){null!=this.unpin&&this.$element.css("top","");var l="affix"+(o?"-"+o:""),d=e.Event(l+".bs.affix");if(this.$element.trigger(d),d.isDefaultPrevented())return;this.affixed=o,this.unpin="bottom"==o?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==o&&this.$element.offset({top:s-t-r})}};var n=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=i,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var i=e(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),t.call(i,n)})})}(jQuery),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return Xi.apply(null,arguments)}function t(e){Xi=e}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function a(e,t){var i,n=[];for(i=0;i<e.length;++i)n.push(t(e[i],i));return n}function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function s(e,t){for(var i in t)r(t,i)&&(e[i]=t[i]);return r(t,"toString")&&(e.toString=t.toString),r(t,"valueOf")&&(e.valueOf=t.valueOf),e}function o(e,t,i,n){return Me(e,t,i,n,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function d(e){return null==e._pf&&(e._pf=l()),e._pf}function h(e){if(null==e._isValid){var t=d(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function c(e){var t=o(NaN);return null!=e?s(d(t),e):d(t).userInvalidated=!0,t}function u(e){return void 0===e}function p(e,t){var i,n,a;if(u(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),u(t._i)||(e._i=t._i),u(t._f)||(e._f=t._f),u(t._l)||(e._l=t._l),u(t._strict)||(e._strict=t._strict),u(t._tzm)||(e._tzm=t._tzm),u(t._isUTC)||(e._isUTC=t._isUTC),u(t._offset)||(e._offset=t._offset),u(t._pf)||(e._pf=d(t)),u(t._locale)||(e._locale=t._locale),Ri.length>0)for(i in Ri)n=Ri[i],a=t[n],u(a)||(e[n]=a);return e}function f(t){p(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),Vi===!1&&(Vi=!0,e.updateOffset(this),Vi=!1)}function m(e){return e instanceof f||null!=e&&null!=e._isAMomentObject}function g(e){return 0>e?Math.ceil(e):Math.floor(e)}function x(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=g(t)),i}function y(e,t,i){var n,a=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),s=0;for(n=0;a>n;n++)(i&&e[n]!==t[n]||!i&&x(e[n])!==x(t[n]))&&s++;return s+r}function v(){}function _(e){return e?e.toLowerCase().replace("_","-"):e}function b(e){for(var t,i,n,a,r=0;r<e.length;){for(a=_(e[r]).split("-"),t=a.length,i=_(e[r+1]),i=i?i.split("-"):null;t>0;){if(n=w(a.slice(0,t).join("-")))return n;if(i&&i.length>=t&&y(a,i,!0)>=t-1)break;t--}r++}return null}function w(e){var t=null;if(!Ui[e]&&!u(module)&&module&&module.exports)try{t=Hi._abbr,require("./locale/"+e),k(t)}catch(i){}return Ui[e]}function k(e,t){var i;return e&&(i=u(t)?M(e):T(e,t),i&&(Hi=i)),Hi._abbr}function T(e,t){return null!==t?(t.abbr=e,Ui[e]=Ui[e]||new v,Ui[e].set(t),k(e),Ui[e]):(delete Ui[e],null)}function M(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Hi;if(!i(e)){if(t=w(e))return t;e=[e]}return b(e)}function C(e,t){var i=e.toLowerCase();$i[i]=$i[i+"s"]=$i[t]=e}function S(e){return"string"==typeof e?$i[e]||$i[e.toLowerCase()]:void 0}function P(e){var t,i,n={};for(i in e)r(e,i)&&(t=S(i),t&&(n[t]=e[i]));return n}function A(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function j(t,i){return function(n){return null!=n?(L(this,t,n),e.updateOffset(this,i),this):D(this,t)}}function D(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function L(e,t,i){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](i)}function I(e,t){var i;if("object"==typeof e)for(i in e)this.set(i,e[i]);else if(e=S(e),A(this[e]))return this[e](t);return this}function F(e,t,i){var n=""+Math.abs(e),a=t-n.length,r=e>=0;return(r?i?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+n}function E(e,t,i,n){var a=n;"string"==typeof n&&(a=function(){return this[n]()}),e&&(Ji[e]=a),t&&(Ji[t[0]]=function(){return F(a.apply(this,arguments),t[1],t[2])}),i&&(Ji[i]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function O(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function B(e){var t,i,n=e.match(qi);for(t=0,i=n.length;i>t;t++)Ji[n[t]]?n[t]=Ji[n[t]]:n[t]=O(n[t]);return function(a){var r="";for(t=0;i>t;t++)r+=n[t]instanceof Function?n[t].call(a,e):n[t];return r}}function N(e,t){return e.isValid()?(t=W(t,e.localeData()),Ki[t]=Ki[t]||B(t),Ki[t](e)):e.localeData().invalidDate()}function W(e,t){function i(e){return t.longDateFormat(e)||e}var n=5;for(Gi.lastIndex=0;n>=0&&Gi.test(e);)e=e.replace(Gi,i),Gi.lastIndex=0,n-=1;return e}function Y(e,t,i){gn[e]=A(t)?t:function(e){return e&&i?i:t}}function z(e,t){return r(gn,e)?gn[e](t._strict,t._locale):new RegExp(X(e))}function X(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,a){return t||i||n||a}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function H(e,t){var i,n=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(n=function(e,i){i[t]=x(e)}),i=0;i<e.length;i++)xn[e[i]]=n}function R(e,t){H(e,function(e,i,n,a){n._w=n._w||{},t(e,n._w,n,a)})}function V(e,t,i){null!=t&&r(xn,e)&&xn[e](t,i._a,i,e)}function U(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function $(e,t){return i(this._months)?this._months[e.month()]:this._months[Sn.test(t)?"format":"standalone"][e.month()]}function q(e,t){return i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Sn.test(t)?"format":"standalone"][e.month()]}function G(e,t,i){var n,a,r;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(a=o([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(r="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[n]=new RegExp(r.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}}function K(e,t){var i;return e.isValid()?"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(i=Math.min(e.date(),U(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e):e}function J(t){return null!=t?(K(this,t),e.updateOffset(this,!0),this):D(this,"Month")}function Z(){return U(this.year(),this.month())}function Q(e){var t,i=e._a;return i&&-2===d(e).overflow&&(t=i[vn]<0||i[vn]>11?vn:i[_n]<1||i[_n]>U(i[yn],i[vn])?_n:i[bn]<0||i[bn]>24||24===i[bn]&&(0!==i[wn]||0!==i[kn]||0!==i[Tn])?bn:i[wn]<0||i[wn]>59?wn:i[kn]<0||i[kn]>59?kn:i[Tn]<0||i[Tn]>999?Tn:-1,d(e)._overflowDayOfYear&&(yn>t||t>_n)&&(t=_n),d(e)._overflowWeeks&&-1===t&&(t=Mn),d(e)._overflowWeekday&&-1===t&&(t=Cn),d(e).overflow=t),e}function ee(t){e.suppressDeprecationWarnings===!1&&!u(console)&&console.warn&&console.warn("Deprecation warning: "+t)}function te(e,t){var i=!0;return s(function(){return i&&(ee(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),i=!1),t.apply(this,arguments)},t)}function ie(e,t){jn[e]||(ee(t),jn[e]=!0)}function ne(e){var t,i,n,a,r,s,o=e._i,l=Dn.exec(o)||Ln.exec(o);if(l){for(d(e).iso=!0,t=0,i=Fn.length;i>t;t++)if(Fn[t][1].exec(l[1])){a=Fn[t][0],n=Fn[t][2]!==!1;break}if(null==a)return void(e._isValid=!1);if(l[3]){for(t=0,i=En.length;i>t;t++)if(En[t][1].exec(l[3])){r=(l[2]||" ")+En[t][0];break}if(null==r)return void(e._isValid=!1)}if(!n&&null!=r)return void(e._isValid=!1);if(l[4]){if(!In.exec(l[4]))return void(e._isValid=!1);s="Z"}e._f=a+(r||"")+(s||""),ye(e)}else e._isValid=!1}function ae(t){var i=On.exec(t._i);return null!==i?void(t._d=new Date(+i[1])):(ne(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function re(e,t,i,n,a,r,s){var o=new Date(e,t,i,n,a,r,s);return 100>e&&e>=0&&isFinite(o.getFullYear())&&o.setFullYear(e),o}function se(e){var t=new Date(Date.UTC.apply(null,arguments));return 100>e&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function oe(e){return le(e)?366:365}function le(e){return e%4===0&&e%100!==0||e%400===0}function de(){return le(this.year())}function he(e,t,i){var n=7+t-i,a=(7+se(e,0,n).getUTCDay()-t)%7;return-a+n-1}function ce(e,t,i,n,a){var r,s,o=(7+i-n)%7,l=he(e,n,a),d=1+7*(t-1)+o+l;return 0>=d?(r=e-1,s=oe(r)+d):d>oe(e)?(r=e+1,s=d-oe(e)):(r=e,s=d),{year:r,dayOfYear:s}}function ue(e,t,i){var n,a,r=he(e.year(),t,i),s=Math.floor((e.dayOfYear()-r-1)/7)+1;return 1>s?(a=e.year()-1,n=s+pe(a,t,i)):s>pe(e.year(),t,i)?(n=s-pe(e.year(),t,i),a=e.year()+1):(a=e.year(),n=s),{week:n,year:a}}function pe(e,t,i){var n=he(e,t,i),a=he(e+1,t,i);return(oe(e)-n+a)/7}function fe(e,t,i){return null!=e?e:null!=t?t:i}function me(t){var i=new Date(e.now());return t._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function ge(e){var t,i,n,a,r=[];if(!e._d){for(n=me(e),e._w&&null==e._a[_n]&&null==e._a[vn]&&xe(e),e._dayOfYear&&(a=fe(e._a[yn],n[yn]),e._dayOfYear>oe(a)&&(d(e)._overflowDayOfYear=!0),i=se(a,0,e._dayOfYear),e._a[vn]=i.getUTCMonth(),e._a[_n]=i.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=r[t]=n[t];for(;7>t;t++)e._a[t]=r[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[bn]&&0===e._a[wn]&&0===e._a[kn]&&0===e._a[Tn]&&(e._nextDay=!0,e._a[bn]=0),e._d=(e._useUTC?se:re).apply(null,r),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[bn]=24)}}function xe(e){var t,i,n,a,r,s,o,l;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(r=1,s=4,i=fe(t.GG,e._a[yn],ue(Ce(),1,4).year),n=fe(t.W,1),a=fe(t.E,1),(1>a||a>7)&&(l=!0)):(r=e._locale._week.dow,s=e._locale._week.doy,i=fe(t.gg,e._a[yn],ue(Ce(),r,s).year),n=fe(t.w,1),null!=t.d?(a=t.d,(0>a||a>6)&&(l=!0)):null!=t.e?(a=t.e+r,(t.e<0||t.e>6)&&(l=!0)):a=r),1>n||n>pe(i,r,s)?d(e)._overflowWeeks=!0:null!=l?d(e)._overflowWeekday=!0:(o=ce(i,n,a,r,s),e._a[yn]=o.year,e._dayOfYear=o.dayOfYear)}function ye(t){if(t._f===e.ISO_8601)return void ne(t);t._a=[],d(t).empty=!0;var i,n,a,r,s,o=""+t._i,l=o.length,h=0;for(a=W(t._f,t._locale).match(qi)||[],i=0;i<a.length;i++)r=a[i],n=(o.match(z(r,t))||[])[0],n&&(s=o.substr(0,o.indexOf(n)),s.length>0&&d(t).unusedInput.push(s),o=o.slice(o.indexOf(n)+n.length),h+=n.length),Ji[r]?(n?d(t).empty=!1:d(t).unusedTokens.push(r),V(r,n,t)):t._strict&&!n&&d(t).unusedTokens.push(r);d(t).charsLeftOver=l-h,o.length>0&&d(t).unusedInput.push(o),d(t).bigHour===!0&&t._a[bn]<=12&&t._a[bn]>0&&(d(t).bigHour=void 0),t._a[bn]=ve(t._locale,t._a[bn],t._meridiem),ge(t),Q(t)}function ve(e,t,i){var n;return null==i?t:null!=e.meridiemHour?e.meridiemHour(t,i):null!=e.isPM?(n=e.isPM(i),n&&12>t&&(t+=12),n||12!==t||(t=0),t):t}function _e(e){var t,i,n,a,r;if(0===e._f.length)return d(e).invalidFormat=!0,void(e._d=new Date(NaN));for(a=0;a<e._f.length;a++)r=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[a],ye(t),h(t)&&(r+=d(t).charsLeftOver,r+=10*d(t).unusedTokens.length,d(t).score=r,(null==n||n>r)&&(n=r,i=t));s(e,i||t)}function be(e){if(!e._d){var t=P(e._i);e._a=a([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ge(e)}}function we(e){var t=new f(Q(ke(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function ke(e){var t=e._i,a=e._f;return e._locale=e._locale||M(e._l),null===t||void 0===a&&""===t?c({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),m(t)?new f(Q(t)):(i(a)?_e(e):a?ye(e):n(t)?e._d=t:Te(e),h(e)||(e._d=null),e))}function Te(t){var r=t._i;void 0===r?t._d=new Date(e.now()):n(r)?t._d=new Date(+r):"string"==typeof r?ae(t):i(r)?(t._a=a(r.slice(0),function(e){return parseInt(e,10)}),ge(t)):"object"==typeof r?be(t):"number"==typeof r?t._d=new Date(r):e.createFromInputFallback(t)}function Me(e,t,i,n,a){var r={};return"boolean"==typeof i&&(n=i,i=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=a,r._l=i,r._i=e,r._f=t,r._strict=n,we(r)}function Ce(e,t,i,n){return Me(e,t,i,n,!1)}function Se(e,t){var n,a;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return Ce();for(n=t[0],a=1;a<t.length;++a)(!t[a].isValid()||t[a][e](n))&&(n=t[a]);return n}function Pe(){var e=[].slice.call(arguments,0);return Se("isBefore",e)}function Ae(){var e=[].slice.call(arguments,0);return Se("isAfter",e)}function je(e){var t=P(e),i=t.year||0,n=t.quarter||0,a=t.month||0,r=t.week||0,s=t.day||0,o=t.hour||0,l=t.minute||0,d=t.second||0,h=t.millisecond||0;this._milliseconds=+h+1e3*d+6e4*l+36e5*o,this._days=+s+7*r,this._months=+a+3*n+12*i,this._data={},this._locale=M(),this._bubble()}function De(e){return e instanceof je}function Le(e,t){E(e,0,0,function(){var e=this.utcOffset(),i="+";return 0>e&&(e=-e,i="-"),i+F(~~(e/60),2)+t+F(~~e%60,2)})}function Ie(e,t){var i=(t||"").match(e)||[],n=i[i.length-1]||[],a=(n+"").match(zn)||["-",0,0],r=+(60*a[1])+x(a[2]);return"+"===a[0]?r:-r}function Fe(t,i){var a,r;return i._isUTC?(a=i.clone(),r=(m(t)||n(t)?+t:+Ce(t))-+a,a._d.setTime(+a._d+r),e.updateOffset(a,!1),a):Ce(t).local()}function Ee(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Oe(t,i){var n,a=this._offset||0;return this.isValid()?null!=t?("string"==typeof t?t=Ie(pn,t):Math.abs(t)<16&&(t=60*t),!this._isUTC&&i&&(n=Ee(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),a!==t&&(!i||this._changeInProgress?Ze(this,$e(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?a:Ee(this):null!=t?this:NaN}function Be(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Ne(e){return this.utcOffset(0,e)}function We(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ee(this),"m")),this}function Ye(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ie(un,this._i)),this}function ze(e){return this.isValid()?(e=e?Ce(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function Xe(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function He(){if(!u(this._isDSTShifted))return this._isDSTShifted;var e={};if(p(e,this),e=ke(e),e._a){var t=e._isUTC?o(e._a):Ce(e._a);this._isDSTShifted=this.isValid()&&y(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Re(){return this.isValid()?!this._isUTC:!1}function Ve(){return this.isValid()?this._isUTC:!1}function Ue(){return this.isValid()?this._isUTC&&0===this._offset:!1}function $e(e,t){var i,n,a,s=e,o=null;return De(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(o=Xn.exec(e))?(i="-"===o[1]?-1:1,s={y:0,d:x(o[_n])*i,h:x(o[bn])*i,m:x(o[wn])*i,s:x(o[kn])*i,ms:x(o[Tn])*i}):(o=Hn.exec(e))?(i="-"===o[1]?-1:1,s={y:qe(o[2],i),M:qe(o[3],i),d:qe(o[4],i),h:qe(o[5],i),m:qe(o[6],i),s:qe(o[7],i),w:qe(o[8],i)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(a=Ke(Ce(s.from),Ce(s.to)),s={},s.ms=a.milliseconds,s.M=a.months),n=new je(s),De(e)&&r(e,"_locale")&&(n._locale=e._locale),n}function qe(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function Ge(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Ke(e,t){var i;return e.isValid()&&t.isValid()?(t=Fe(t,e),e.isBefore(t)?i=Ge(e,t):(i=Ge(t,e),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function Je(e,t){return function(i,n){var a,r;return null===n||isNaN(+n)||(ie(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),r=i,i=n,n=r),i="string"==typeof i?+i:i,a=$e(i,n),Ze(this,a,e),this}}function Ze(t,i,n,a){var r=i._milliseconds,s=i._days,o=i._months;t.isValid()&&(a=null==a?!0:a,r&&t._d.setTime(+t._d+r*n),s&&L(t,"Date",D(t,"Date")+s*n),o&&K(t,D(t,"Month")+o*n),a&&e.updateOffset(t,s||o))}function Qe(e,t){var i=e||Ce(),n=Fe(i,this).startOf("day"),a=this.diff(n,"days",!0),r=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse",s=t&&(A(t[r])?t[r]():t[r]);return this.format(s||this.localeData().calendar(r,this,Ce(i)))}function et(){return new f(this)}function tt(e,t){var i=m(e)?e:Ce(e);return this.isValid()&&i.isValid()?(t=S(u(t)?"millisecond":t),"millisecond"===t?+this>+i:+i<+this.clone().startOf(t)):!1}function it(e,t){var i=m(e)?e:Ce(e);return this.isValid()&&i.isValid()?(t=S(u(t)?"millisecond":t),"millisecond"===t?+i>+this:+this.clone().endOf(t)<+i):!1}function nt(e,t,i){return this.isAfter(e,i)&&this.isBefore(t,i)}function at(e,t){var i,n=m(e)?e:Ce(e);return this.isValid()&&n.isValid()?(t=S(t||"millisecond"),"millisecond"===t?+this===+n:(i=+n,+this.clone().startOf(t)<=i&&i<=+this.clone().endOf(t))):!1}function rt(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function st(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function ot(e,t,i){var n,a,r,s;return this.isValid()?(n=Fe(e,this),n.isValid()?(a=6e4*(n.utcOffset()-this.utcOffset()),t=S(t),"year"===t||"month"===t||"quarter"===t?(s=lt(this,n),"quarter"===t?s/=3:"year"===t&&(s/=12)):(r=this-n,s="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-a)/864e5:"week"===t?(r-a)/6048e5:r),i?s:g(s)):NaN):NaN}function lt(e,t){var i,n,a=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(a,"months");return 0>t-r?(i=e.clone().add(a-1,"months"),n=(t-r)/(r-i)):(i=e.clone().add(a+1,"months"),n=(t-r)/(i-r)),-(a+n)}function dt(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ht(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?A(Date.prototype.toISOString)?this.toDate().toISOString():N(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):N(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ct(t){var i=N(this,t||e.defaultFormat);return this.localeData().postformat(i)}function ut(e,t){return this.isValid()&&(m(e)&&e.isValid()||Ce(e).isValid())?$e({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function pt(e){return this.from(Ce(),e)}function ft(e,t){return this.isValid()&&(m(e)&&e.isValid()||Ce(e).isValid())?$e({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function mt(e){return this.to(Ce(),e)}function gt(e){var t;return void 0===e?this._locale._abbr:(t=M(e),null!=t&&(this._locale=t),this)}function xt(){return this._locale}function yt(e){switch(e=S(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function vt(e){return e=S(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function _t(){return+this._d-6e4*(this._offset||0)}function bt(){return Math.floor(+this/1e3)}function wt(){return this._offset?new Date(+this):this._d}function kt(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Tt(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Mt(){return this.isValid()?this.toISOString():"null"}function Ct(){return h(this)}function St(){return s({},d(this))}function Pt(){return d(this).overflow}function At(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function jt(e,t){E(0,[e,e.length],0,t)}function Dt(e){return Et.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Lt(e){return Et.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function It(){return pe(this.year(),1,4)}function Ft(){var e=this.localeData()._week;return pe(this.year(),e.dow,e.doy)}function Et(e,t,i,n,a){var r;return null==e?ue(this,n,a).year:(r=pe(e,n,a),t>r&&(t=r),Ot.call(this,e,t,i,n,a))}function Ot(e,t,i,n,a){var r=ce(e,t,i,n,a),s=se(r.year,0,r.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Bt(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Nt(e){return ue(e,this._week.dow,this._week.doy).week}function Wt(){return this._week.dow}function Yt(){return this._week.doy}function zt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Xt(e){var t=ue(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Ht(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Rt(e,t){return i(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}function Vt(e){return this._weekdaysShort[e.day()]}function Ut(e){return this._weekdaysMin[e.day()]}function $t(e,t,i){var n,a,r;for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;7>n;n++){if(a=Ce([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(a,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(a,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(a,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(r="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[n]=new RegExp(r.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(i&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(i&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!i&&this._weekdaysParse[n].test(e))return n}}function qt(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Ht(e,this.localeData()),this.add(e-t,"d")):t}function Gt(e){
if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Kt(e){return this.isValid()?null==e?this.day()||7:this.day(this.day()%7?e:e-7):null!=e?this:NaN}function Jt(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Zt(){return this.hours()%12||12}function Qt(e,t){E(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function ei(e,t){return t._meridiemParse}function ti(e){return"p"===(e+"").toLowerCase().charAt(0)}function ii(e,t,i){return e>11?i?"pm":"PM":i?"am":"AM"}function ni(e,t){t[Tn]=x(1e3*("0."+e))}function ai(){return this._isUTC?"UTC":""}function ri(){return this._isUTC?"Coordinated Universal Time":""}function si(e){return Ce(1e3*e)}function oi(){return Ce.apply(null,arguments).parseZone()}function li(e,t,i){var n=this._calendar[e];return A(n)?n.call(t,i):n}function di(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function hi(){return this._invalidDate}function ci(e){return this._ordinal.replace("%d",e)}function ui(e){return e}function pi(e,t,i,n){var a=this._relativeTime[i];return A(a)?a(e,t,i,n):a.replace(/%d/i,e)}function fi(e,t){var i=this._relativeTime[e>0?"future":"past"];return A(i)?i(t):i.replace(/%s/i,t)}function mi(e){var t,i;for(i in e)t=e[i],A(t)?this[i]=t:this["_"+i]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function gi(e,t,i,n){var a=M(),r=o().set(n,t);return a[i](r,e)}function xi(e,t,i,n,a){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return gi(e,t,i,a);var r,s=[];for(r=0;n>r;r++)s[r]=gi(e,r,i,a);return s}function yi(e,t){return xi(e,t,"months",12,"month")}function vi(e,t){return xi(e,t,"monthsShort",12,"month")}function _i(e,t){return xi(e,t,"weekdays",7,"day")}function bi(e,t){return xi(e,t,"weekdaysShort",7,"day")}function wi(e,t){return xi(e,t,"weekdaysMin",7,"day")}function ki(){var e=this._data;return this._milliseconds=pa(this._milliseconds),this._days=pa(this._days),this._months=pa(this._months),e.milliseconds=pa(e.milliseconds),e.seconds=pa(e.seconds),e.minutes=pa(e.minutes),e.hours=pa(e.hours),e.months=pa(e.months),e.years=pa(e.years),this}function Ti(e,t,i,n){var a=$e(t,i);return e._milliseconds+=n*a._milliseconds,e._days+=n*a._days,e._months+=n*a._months,e._bubble()}function Mi(e,t){return Ti(this,e,t,1)}function Ci(e,t){return Ti(this,e,t,-1)}function Si(e){return 0>e?Math.floor(e):Math.ceil(e)}function Pi(){var e,t,i,n,a,r=this._milliseconds,s=this._days,o=this._months,l=this._data;return r>=0&&s>=0&&o>=0||0>=r&&0>=s&&0>=o||(r+=864e5*Si(ji(o)+s),s=0,o=0),l.milliseconds=r%1e3,e=g(r/1e3),l.seconds=e%60,t=g(e/60),l.minutes=t%60,i=g(t/60),l.hours=i%24,s+=g(i/24),a=g(Ai(s)),o+=a,s-=Si(ji(a)),n=g(o/12),o%=12,l.days=s,l.months=o,l.years=n,this}function Ai(e){return 4800*e/146097}function ji(e){return 146097*e/4800}function Di(e){var t,i,n=this._milliseconds;if(e=S(e),"month"===e||"year"===e)return t=this._days+n/864e5,i=this._months+Ai(t),"month"===e?i:i/12;switch(t=this._days+Math.round(ji(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}}function Li(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*x(this._months/12)}function Ii(e){return function(){return this.as(e)}}function Fi(e){return e=S(e),this[e+"s"]()}function Ei(e){return function(){return this._data[e]}}function Oi(){return g(this.days()/7)}function Bi(e,t,i,n,a){return a.relativeTime(t||1,!!i,e,n)}function Ni(e,t,i){var n=$e(e).abs(),a=Aa(n.as("s")),r=Aa(n.as("m")),s=Aa(n.as("h")),o=Aa(n.as("d")),l=Aa(n.as("M")),d=Aa(n.as("y")),h=a<ja.s&&["s",a]||1>=r&&["m"]||r<ja.m&&["mm",r]||1>=s&&["h"]||s<ja.h&&["hh",s]||1>=o&&["d"]||o<ja.d&&["dd",o]||1>=l&&["M"]||l<ja.M&&["MM",l]||1>=d&&["y"]||["yy",d];return h[2]=t,h[3]=+e>0,h[4]=i,Bi.apply(null,h)}function Wi(e,t){return void 0===ja[e]?!1:void 0===t?ja[e]:(ja[e]=t,!0)}function Yi(e){var t=this.localeData(),i=Ni(this,!e,t);return e&&(i=t.pastFuture(+this,i)),t.postformat(i)}function zi(){var e,t,i,n=Da(this._milliseconds)/1e3,a=Da(this._days),r=Da(this._months);e=g(n/60),t=g(e/60),n%=60,e%=60,i=g(r/12),r%=12;var s=i,o=r,l=a,d=t,h=e,c=n,u=this.asSeconds();return u?(0>u?"-":"")+"P"+(s?s+"Y":"")+(o?o+"M":"")+(l?l+"D":"")+(d||h||c?"T":"")+(d?d+"H":"")+(h?h+"M":"")+(c?c+"S":""):"P0D"}var Xi,Hi,Ri=e.momentProperties=[],Vi=!1,Ui={},$i={},qi=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Gi=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ki={},Ji={},Zi=/\d/,Qi=/\d\d/,en=/\d{3}/,tn=/\d{4}/,nn=/[+-]?\d{6}/,an=/\d\d?/,rn=/\d\d\d\d?/,sn=/\d\d\d\d\d\d?/,on=/\d{1,3}/,ln=/\d{1,4}/,dn=/[+-]?\d{1,6}/,hn=/\d+/,cn=/[+-]?\d+/,un=/Z|[+-]\d\d:?\d\d/gi,pn=/Z|[+-]\d\d(?::?\d\d)?/gi,fn=/[+-]?\d+(\.\d{1,3})?/,mn=/[0-9]*(a[mn]\s?)?['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\-]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,gn={},xn={},yn=0,vn=1,_n=2,bn=3,wn=4,kn=5,Tn=6,Mn=7,Cn=8;E("M",["MM",2],"Mo",function(){return this.month()+1}),E("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),E("MMMM",0,0,function(e){return this.localeData().months(this,e)}),C("month","M"),Y("M",an),Y("MM",an,Qi),Y("MMM",mn),Y("MMMM",mn),H(["M","MM"],function(e,t){t[vn]=x(e)-1}),H(["MMM","MMMM"],function(e,t,i,n){var a=i._locale.monthsParse(e,n,i._strict);null!=a?t[vn]=a:d(i).invalidMonth=e});var Sn=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Pn="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),An="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sept_Oct_Nov_Dec".split("_"),jn={};e.suppressDeprecationWarnings=!1;var Dn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Ln=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,In=/Z|[+-]\d\d(?::?\d\d)?/,Fn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],En=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],On=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=te("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),E(0,["YY",2],0,function(){return this.year()%100}),E(0,["YYYY",4],0,"year"),E(0,["YYYYY",5],0,"year"),E(0,["YYYYYY",6,!0],0,"year"),C("year","y"),Y("Y",cn),Y("YY",an,Qi),Y("YYYY",ln,tn),Y("YYYYY",dn,nn),Y("YYYYYY",dn,nn),H(["YYYYY","YYYYYY"],yn),H("YYYY",function(t,i){i[yn]=2===t.length?e.parseTwoDigitYear(t):x(t)}),H("YY",function(t,i){i[yn]=e.parseTwoDigitYear(t)}),e.parseTwoDigitYear=function(e){return x(e)+(x(e)>68?1900:2e3)};var Bn=j("FullYear",!1);e.ISO_8601=function(){};var Nn=te("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Ce.apply(null,arguments);return this.isValid()&&e.isValid()?this>e?this:e:c()}),Wn=te("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Ce.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:c()}),Yn=Date.now||function(){return+new Date};Le("Z",":"),Le("ZZ",""),Y("Z",pn),Y("ZZ",pn),H(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=Ie(pn,e)});var zn=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Xn=/(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Hn=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;$e.fn=je.prototype;var Rn=Je(1,"add"),Vn=Je(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Un=te("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});E(0,["gg",2],0,function(){return this.weekYear()%100}),E(0,["GG",2],0,function(){return this.isoWeekYear()%100}),jt("gggg","weekYear"),jt("ggggg","weekYear"),jt("GGGG","isoWeekYear"),jt("GGGGG","isoWeekYear"),C("weekYear","gg"),C("isoWeekYear","GG"),Y("G",cn),Y("g",cn),Y("GG",an,Qi),Y("gg",an,Qi),Y("GGGG",ln,tn),Y("gggg",ln,tn),Y("GGGGG",dn,nn),Y("ggggg",dn,nn),R(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=x(e)}),R(["gg","GG"],function(t,i,n,a){i[a]=e.parseTwoDigitYear(t)}),E("Q",0,"Qo","quarter"),C("quarter","Q"),Y("Q",Zi),H("Q",function(e,t){t[vn]=3*(x(e)-1)}),E("w",["ww",2],"wo","week"),E("W",["WW",2],"Wo","isoWeek"),C("week","w"),C("isoWeek","W"),Y("w",an),Y("ww",an,Qi),Y("W",an),Y("WW",an,Qi),R(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=x(e)});var $n={dow:0,doy:6};E("D",["DD",2],"Do","date"),C("date","D"),Y("D",an),Y("DD",an,Qi),Y("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),H(["D","DD"],_n),H("Do",function(e,t){t[_n]=x(e.match(an)[0],10)});var qn=j("Date",!0);E("d",0,"do","day"),E("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),E("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),E("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),E("e",0,0,"weekday"),E("E",0,0,"isoWeekday"),C("day","d"),C("weekday","e"),C("isoWeekday","E"),Y("d",an),Y("e",an),Y("E",an),Y("dd",mn),Y("ddd",mn),Y("dddd",mn),R(["dd","ddd","dddd"],function(e,t,i,n){var a=i._locale.weekdaysParse(e,n,i._strict);null!=a?t.d=a:d(i).invalidWeekday=e}),R(["d","e","E"],function(e,t,i,n){t[n]=x(e)});var Gn="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Kn="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Jn="Su_Mo_Tu_We_Th_Fr_Sa".split("_");E("DDD",["DDDD",3],"DDDo","dayOfYear"),C("dayOfYear","DDD"),Y("DDD",on),Y("DDDD",en),H(["DDD","DDDD"],function(e,t,i){i._dayOfYear=x(e)}),E("H",["HH",2],0,"hour"),E("h",["hh",2],0,Zt),E("hmm",0,0,function(){return""+Zt.apply(this)+F(this.minutes(),2)}),E("hmmss",0,0,function(){return""+Zt.apply(this)+F(this.minutes(),2)+F(this.seconds(),2)}),E("Hmm",0,0,function(){return""+this.hours()+F(this.minutes(),2)}),E("Hmmss",0,0,function(){return""+this.hours()+F(this.minutes(),2)+F(this.seconds(),2)}),Qt("a",!0),Qt("A",!1),C("hour","h"),Y("a",ei),Y("A",ei),Y("H",an),Y("h",an),Y("HH",an,Qi),Y("hh",an,Qi),Y("hmm",rn),Y("hmmss",sn),Y("Hmm",rn),Y("Hmmss",sn),H(["H","HH"],bn),H(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),H(["h","hh"],function(e,t,i){t[bn]=x(e),d(i).bigHour=!0}),H("hmm",function(e,t,i){var n=e.length-2;t[bn]=x(e.substr(0,n)),t[wn]=x(e.substr(n)),d(i).bigHour=!0}),H("hmmss",function(e,t,i){var n=e.length-4,a=e.length-2;t[bn]=x(e.substr(0,n)),t[wn]=x(e.substr(n,2)),t[kn]=x(e.substr(a)),d(i).bigHour=!0}),H("Hmm",function(e,t,i){var n=e.length-2;t[bn]=x(e.substr(0,n)),t[wn]=x(e.substr(n))}),H("Hmmss",function(e,t,i){var n=e.length-4,a=e.length-2;t[bn]=x(e.substr(0,n)),t[wn]=x(e.substr(n,2)),t[kn]=x(e.substr(a))});var Zn=/[ap]\.?m?\.?/i,Qn=j("Hours",!0);E("m",["mm",2],0,"minute"),C("minute","m"),Y("m",an),Y("mm",an,Qi),H(["m","mm"],wn);var ea=j("Minutes",!1);E("s",["ss",2],0,"second"),C("second","s"),Y("s",an),Y("ss",an,Qi),H(["s","ss"],kn);var ta=j("Seconds",!1);E("S",0,0,function(){return~~(this.millisecond()/100)}),E(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),E(0,["SSS",3],0,"millisecond"),E(0,["SSSS",4],0,function(){return 10*this.millisecond()}),E(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),E(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),E(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),E(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),E(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),C("millisecond","ms"),Y("S",on,Zi),Y("SS",on,Qi),Y("SSS",on,en);var ia;for(ia="SSSS";ia.length<=9;ia+="S")Y(ia,hn);for(ia="S";ia.length<=9;ia+="S")H(ia,ni);var na=j("Milliseconds",!1);E("z",0,0,"zoneAbbr"),E("zz",0,0,"zoneName");var aa=f.prototype;aa.add=Rn,aa.calendar=Qe,aa.clone=et,aa.diff=ot,aa.endOf=vt,aa.format=ct,aa.from=ut,aa.fromNow=pt,aa.to=ft,aa.toNow=mt,aa.get=I,aa.invalidAt=Pt,aa.isAfter=tt,aa.isBefore=it,aa.isBetween=nt,aa.isSame=at,aa.isSameOrAfter=rt,aa.isSameOrBefore=st,aa.isValid=Ct,aa.lang=Un,aa.locale=gt,aa.localeData=xt,aa.max=Wn,aa.min=Nn,aa.parsingFlags=St,aa.set=I,aa.startOf=yt,aa.subtract=Vn,aa.toArray=kt,aa.toObject=Tt,aa.toDate=wt,aa.toISOString=ht,aa.toJSON=Mt,aa.toString=dt,aa.unix=bt,aa.valueOf=_t,aa.creationData=At,aa.year=Bn,aa.isLeapYear=de,aa.weekYear=Dt,aa.isoWeekYear=Lt,aa.quarter=aa.quarters=Bt,aa.month=J,aa.daysInMonth=Z,aa.week=aa.weeks=zt,aa.isoWeek=aa.isoWeeks=Xt,aa.weeksInYear=Ft,aa.isoWeeksInYear=It,aa.date=qn,aa.day=aa.days=qt,aa.weekday=Gt,aa.isoWeekday=Kt,aa.dayOfYear=Jt,aa.hour=aa.hours=Qn,aa.minute=aa.minutes=ea,aa.second=aa.seconds=ta,aa.millisecond=aa.milliseconds=na,aa.utcOffset=Oe,aa.utc=Ne,aa.local=We,aa.parseZone=Ye,aa.hasAlignedHourOffset=ze,aa.isDST=Xe,aa.isDSTShifted=He,aa.isLocal=Re,aa.isUtcOffset=Ve,aa.isUtc=Ue,aa.isUTC=Ue,aa.zoneAbbr=ai,aa.zoneName=ri,aa.dates=te("dates accessor is deprecated. Use date instead.",qn),aa.months=te("months accessor is deprecated. Use month instead",J),aa.years=te("years accessor is deprecated. Use year instead",Bn),aa.zone=te("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Be);var ra=aa,sa={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},oa={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},la="Invalid date",da="%d",ha=/\d{1,2}/,ca={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ua=v.prototype;ua._calendar=sa,ua.calendar=li,ua._longDateFormat=oa,ua.longDateFormat=di,ua._invalidDate=la,ua.invalidDate=hi,ua._ordinal=da,ua.ordinal=ci,ua._ordinalParse=ha,ua.preparse=ui,ua.postformat=ui,ua._relativeTime=ca,ua.relativeTime=pi,ua.pastFuture=fi,ua.set=mi,ua.months=$,ua._months=Pn,ua.monthsShort=q,ua._monthsShort=An,ua.monthsParse=G,ua.week=Nt,ua._week=$n,ua.firstDayOfYear=Yt,ua.firstDayOfWeek=Wt,ua.weekdays=Rt,ua._weekdays=Gn,ua.weekdaysMin=Ut,ua._weekdaysMin=Jn,ua.weekdaysShort=Vt,ua._weekdaysShort=Kn,ua.weekdaysParse=$t,ua.isPM=ti,ua._meridiemParse=Zn,ua.meridiem=ii,k("en",{monthsParse:[/^jan/i,/^feb/i,/^mar/i,/^apr/i,/^may/i,/^jun/i,/^jul/i,/^aug/i,/^sep/i,/^oct/i,/^nov/i,/^dec/i],longMonthsParse:[/^january$/i,/^february$/i,/^march$/i,/^april$/i,/^may$/i,/^june$/i,/^july$/i,/^august$/i,/^september$/i,/^october$/i,/^november$/i,/^december$/i],shortMonthsParse:[/^jan$/i,/^feb$/i,/^mar$/i,/^apr$/i,/^may$/i,/^jun$/i,/^jul$/i,/^aug/i,/^sept?$/i,/^oct$/i,/^nov$/i,/^dec$/i],ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=1===x(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+i}}),e.lang=te("moment.lang is deprecated. Use moment.locale instead.",k),e.langData=te("moment.langData is deprecated. Use moment.localeData instead.",M);var pa=Math.abs,fa=Ii("ms"),ma=Ii("s"),ga=Ii("m"),xa=Ii("h"),ya=Ii("d"),va=Ii("w"),_a=Ii("M"),ba=Ii("y"),wa=Ei("milliseconds"),ka=Ei("seconds"),Ta=Ei("minutes"),Ma=Ei("hours"),Ca=Ei("days"),Sa=Ei("months"),Pa=Ei("years"),Aa=Math.round,ja={s:45,m:45,h:22,d:26,M:11},Da=Math.abs,La=je.prototype;La.abs=ki,La.add=Mi,La.subtract=Ci,La.as=Di,La.asMilliseconds=fa,La.asSeconds=ma,La.asMinutes=ga,La.asHours=xa,La.asDays=ya,La.asWeeks=va,La.asMonths=_a,La.asYears=ba,La.valueOf=Li,La._bubble=Pi,La.get=Fi,La.milliseconds=wa,La.seconds=ka,La.minutes=Ta,La.hours=Ma,La.days=Ca,La.weeks=Oi,La.months=Sa,La.years=Pa,La.humanize=Yi,La.toISOString=zi,La.toString=zi,La.toJSON=zi,La.locale=gt,La.localeData=xt,La.toIsoString=te("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",zi),La.lang=Un,E("X",0,0,"unix"),E("x",0,0,"valueOf"),Y("x",cn),Y("X",fn),H("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e,10))}),H("x",function(e,t,i){i._d=new Date(x(e))}),e.version="2.11.0",t(Ce),e.fn=ra,e.min=Pe,e.max=Ae,e.now=Yn,e.utc=o,e.unix=si,e.months=yi,e.isDate=n,e.locale=k,e.invalid=c,e.duration=$e,e.isMoment=m,e.weekdays=_i,e.parseZone=oi,e.localeData=M,e.isDuration=De,e.monthsShort=vi,e.weekdaysMin=wi,e.defineLocale=T,e.weekdaysShort=bi,e.normalizeUnits=S,e.relativeTimeThreshold=Wi,e.prototype=ra;var Ia=e;return Ia}),function(e){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],e);else if("object"==typeof exports)e(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";e(jQuery,moment)}}(function(e,t){"use strict";if(!t)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var i=function(i,n){var a,r,s,o,l,d,h,c={},u=!0,p=!1,f=!1,m=0,g=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],x=["days","months","years","decades"],y=["top","bottom","auto"],v=["left","right","auto"],_=["default","top","bottom"],b={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t","delete":46,46:"delete"},w={},k=function(e){var i,a,r,s,o,l=!1;return void 0!==t.tz&&void 0!==n.timeZone&&null!==n.timeZone&&""!==n.timeZone&&(l=!0),void 0===e||null===e?i=l?t().tz(n.timeZone).startOf("d"):t().startOf("d"):l?(a=t().tz(n.timeZone).utcOffset(),r=t(e,d,n.useStrict).utcOffset(),r!==a?(s=t().tz(n.timeZone).format("Z"),o=t(e,d,n.useStrict).format("YYYY-MM-DD[T]HH:mm:ss")+s,i=t(o,d,n.useStrict).tz(n.timeZone)):i=t(e,d,n.useStrict).tz(n.timeZone)):i=t(e,d,n.useStrict),i},T=function(e){if("string"!=typeof e||e.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(e){case"y":return-1!==l.indexOf("Y");case"M":return-1!==l.indexOf("M");case"d":return-1!==l.toLowerCase().indexOf("d");case"h":case"H":return-1!==l.toLowerCase().indexOf("h");case"m":return-1!==l.indexOf("m");case"s":return-1!==l.indexOf("s");default:return!1}},M=function(){return T("h")||T("m")||T("s")},C=function(){return T("y")||T("M")||T("d")},S=function(){var t=e("<thead>").append(e("<tr>").append(e("<th>").addClass("prev").attr("data-action","previous").append(e("<span>").addClass(n.icons.previous))).append(e("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",n.calendarWeeks?"6":"5")).append(e("<th>").addClass("next").attr("data-action","next").append(e("<span>").addClass(n.icons.next)))),i=e("<tbody>").append(e("<tr>").append(e("<td>").attr("colspan",n.calendarWeeks?"8":"7")));return[e("<div>").addClass("datepicker-days").append(e("<table>").addClass("table-condensed").append(t).append(e("<tbody>"))),e("<div>").addClass("datepicker-months").append(e("<table>").addClass("table-condensed").append(t.clone()).append(i.clone())),e("<div>").addClass("datepicker-years").append(e("<table>").addClass("table-condensed").append(t.clone()).append(i.clone())),e("<div>").addClass("datepicker-decades").append(e("<table>").addClass("table-condensed").append(t.clone()).append(i.clone()))]},P=function(){var t=e("<tr>"),i=e("<tr>"),a=e("<tr>");return T("h")&&(t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.incrementHour}).addClass("btn").attr("data-action","incrementHours").append(e("<span>").addClass(n.icons.up)))),i.append(e("<td>").append(e("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:n.tooltips.pickHour}).attr("data-action","showHours"))),a.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.decrementHour}).addClass("btn").attr("data-action","decrementHours").append(e("<span>").addClass(n.icons.down))))),T("m")&&(T("h")&&(t.append(e("<td>").addClass("separator")),i.append(e("<td>").addClass("separator").html(":")),a.append(e("<td>").addClass("separator"))),t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.incrementMinute}).addClass("btn").attr("data-action","incrementMinutes").append(e("<span>").addClass(n.icons.up)))),i.append(e("<td>").append(e("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:n.tooltips.pickMinute}).attr("data-action","showMinutes"))),a.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.decrementMinute}).addClass("btn").attr("data-action","decrementMinutes").append(e("<span>").addClass(n.icons.down))))),T("s")&&(T("m")&&(t.append(e("<td>").addClass("separator")),i.append(e("<td>").addClass("separator").html(":")),a.append(e("<td>").addClass("separator"))),t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.incrementSecond}).addClass("btn").attr("data-action","incrementSeconds").append(e("<span>").addClass(n.icons.up)))),i.append(e("<td>").append(e("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:n.tooltips.pickSecond}).attr("data-action","showSeconds"))),a.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.decrementSecond}).addClass("btn").attr("data-action","decrementSeconds").append(e("<span>").addClass(n.icons.down))))),o||(t.append(e("<td>").addClass("separator")),i.append(e("<td>").append(e("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:n.tooltips.togglePeriod}))),a.append(e("<td>").addClass("separator"))),e("<div>").addClass("timepicker-picker").append(e("<table>").addClass("table-condensed").append([t,i,a]))},A=function(){var t=e("<div>").addClass("timepicker-hours").append(e("<table>").addClass("table-condensed")),i=e("<div>").addClass("timepicker-minutes").append(e("<table>").addClass("table-condensed")),n=e("<div>").addClass("timepicker-seconds").append(e("<table>").addClass("table-condensed")),a=[P()];return T("h")&&a.push(t),T("m")&&a.push(i),T("s")&&a.push(n),a},j=function(){var t=[];return n.showTodayButton&&t.push(e("<td>").append(e("<a>").attr({"data-action":"today",title:n.tooltips.today}).append(e("<span>").addClass(n.icons.today)))),!n.sideBySide&&C()&&M()&&t.push(e("<td>").append(e("<a>").attr({"data-action":"togglePicker",title:n.tooltips.selectTime}).append(e("<span>").addClass(n.icons.time)))),n.showClear&&t.push(e("<td>").append(e("<a>").attr({"data-action":"clear",title:n.tooltips.clear}).append(e("<span>").addClass(n.icons.clear)))),n.showClose&&t.push(e("<td>").append(e("<a>").attr({"data-action":"close",title:n.tooltips.close}).append(e("<span>").addClass(n.icons.close)))),e("<table>").addClass("table-condensed").append(e("<tbody>").append(e("<tr>").append(t)))},D=function(){var t=e("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),i=e("<div>").addClass("datepicker").append(S()),a=e("<div>").addClass("timepicker").append(A()),r=e("<ul>").addClass("list-unstyled"),s=e("<li>").addClass("picker-switch"+(n.collapse?" accordion-toggle":"")).append(j());return n.inline&&t.removeClass("dropdown-menu"),o&&t.addClass("usetwentyfour"),T("s")&&!o&&t.addClass("wider"),n.sideBySide&&C()&&M()?(t.addClass("timepicker-sbs"),"top"===n.toolbarPlacement&&t.append(s),t.append(e("<div>").addClass("row").append(i.addClass("col-md-6")).append(a.addClass("col-md-6"))),"bottom"===n.toolbarPlacement&&t.append(s),t):("top"===n.toolbarPlacement&&r.append(s),C()&&r.append(e("<li>").addClass(n.collapse&&M()?"collapse in":"").append(i)),"default"===n.toolbarPlacement&&r.append(s),M()&&r.append(e("<li>").addClass(n.collapse&&C()?"collapse":"").append(a)),"bottom"===n.toolbarPlacement&&r.append(s),t.append(r))},L=function(){var t,a={};return t=i.is("input")||n.inline?i.data():i.find("input").data(),t.dateOptions&&t.dateOptions instanceof Object&&(a=e.extend(!0,a,t.dateOptions)),e.each(n,function(e){var i="date"+e.charAt(0).toUpperCase()+e.slice(1);void 0!==t[i]&&(a[e]=t[i])}),a},I=function(){var t,a=(p||i).position(),r=(p||i).offset(),s=n.widgetPositioning.vertical,o=n.widgetPositioning.horizontal;if(n.widgetParent)t=n.widgetParent.append(f);else if(i.is("input"))t=i.after(f).parent();else{if(n.inline)return void(t=i.append(f));t=i,i.children().first().after(f)}if("auto"===s&&(s=r.top+1.5*f.height()>=e(window).height()+e(window).scrollTop()&&f.height()+i.outerHeight()<r.top?"top":"bottom"),"auto"===o&&(o=t.width()<r.left+f.outerWidth()/2&&r.left+f.outerWidth()>e(window).width()?"right":"left"),"top"===s?f.addClass("top").removeClass("bottom"):f.addClass("bottom").removeClass("top"),"right"===o?f.addClass("pull-right"):f.removeClass("pull-right"),"relative"!==t.css("position")&&(t=t.parents().filter(function(){return"relative"===e(this).css("position")}).first()),0===t.length)throw new Error("datetimepicker component should be placed within a relative positioned container");f.css({top:"top"===s?"auto":a.top+i.outerHeight(),bottom:"top"===s?a.top+i.outerHeight():"auto",left:"left"===o?t===i?0:a.left:"auto",right:"left"===o?"auto":t.outerWidth()-i.outerWidth()-(t===i?0:a.left)})},F=function(e){"dp.change"===e.type&&(e.date&&e.date.isSame(e.oldDate)||!e.date&&!e.oldDate)||i.trigger(e)},E=function(e){"y"===e&&(e="YYYY"),F({type:"dp.update",change:e,viewDate:r.clone()})},O=function(e){f&&(e&&(h=Math.max(m,Math.min(3,h+e))),f.find(".datepicker > div").hide().filter(".datepicker-"+g[h].clsName).show())},B=function(){var t=e("<tr>"),i=r.clone().startOf("w").startOf("d");for(n.calendarWeeks===!0&&t.append(e("<th>").addClass("cw").text("#"));i.isBefore(r.clone().endOf("w"));)t.append(e("<th>").addClass("dow").text(i.format("dd"))),i.add(1,"d");f.find(".datepicker-days thead").append(t)},N=function(e){return n.disabledDates[e.format("YYYY-MM-DD")]===!0},W=function(e){return n.enabledDates[e.format("YYYY-MM-DD")]===!0},Y=function(e){return n.disabledHours[e.format("H")]===!0},z=function(e){return n.enabledHours[e.format("H")]===!0},X=function(t,i){if(!t.isValid())return!1;if(n.disabledDates&&"d"===i&&N(t))return!1;if(n.enabledDates&&"d"===i&&!W(t))return!1;if(n.minDate&&t.isBefore(n.minDate,i))return!1;if(n.maxDate&&t.isAfter(n.maxDate,i))return!1;if(n.daysOfWeekDisabled&&"d"===i&&-1!==n.daysOfWeekDisabled.indexOf(t.day()))return!1;if(n.disabledHours&&("h"===i||"m"===i||"s"===i)&&Y(t))return!1;if(n.enabledHours&&("h"===i||"m"===i||"s"===i)&&!z(t))return!1;if(n.disabledTimeIntervals&&("h"===i||"m"===i||"s"===i)){var a=!1;if(e.each(n.disabledTimeIntervals,function(){return t.isBetween(this[0],this[1])?(a=!0,!1):void 0}),a)return!1}return!0},H=function(){for(var t=[],i=r.clone().startOf("y").startOf("d");i.isSame(r,"y");)t.push(e("<span>").attr("data-action","selectMonth").addClass("month").text(i.format("MMM"))),i.add(1,"M");f.find(".datepicker-months td").empty().append(t)},R=function(){var t=f.find(".datepicker-months"),i=t.find("th"),s=t.find("tbody").find("span");i.eq(0).find("span").attr("title",n.tooltips.prevYear),i.eq(1).attr("title",n.tooltips.selectYear),i.eq(2).find("span").attr("title",n.tooltips.nextYear),t.find(".disabled").removeClass("disabled"),X(r.clone().subtract(1,"y"),"y")||i.eq(0).addClass("disabled"),i.eq(1).text(r.year()),X(r.clone().add(1,"y"),"y")||i.eq(2).addClass("disabled"),s.removeClass("active"),a.isSame(r,"y")&&!u&&s.eq(a.month()).addClass("active"),s.each(function(t){X(r.clone().month(t),"M")||e(this).addClass("disabled")})},V=function(){var e=f.find(".datepicker-years"),t=e.find("th"),i=r.clone().subtract(5,"y"),s=r.clone().add(6,"y"),o="";for(t.eq(0).find("span").attr("title",n.tooltips.prevDecade),t.eq(1).attr("title",n.tooltips.selectDecade),t.eq(2).find("span").attr("title",n.tooltips.nextDecade),e.find(".disabled").removeClass("disabled"),n.minDate&&n.minDate.isAfter(i,"y")&&t.eq(0).addClass("disabled"),t.eq(1).text(i.year()+"-"+s.year()),n.maxDate&&n.maxDate.isBefore(s,"y")&&t.eq(2).addClass("disabled");!i.isAfter(s,"y");)o+='<span data-action="selectYear" class="year'+(i.isSame(a,"y")&&!u?" active":"")+(X(i,"y")?"":" disabled")+'">'+i.year()+"</span>",i.add(1,"y");e.find("td").html(o)},U=function(){var e=f.find(".datepicker-decades"),i=e.find("th"),s=t({y:r.year()-r.year()%100-1}),o=s.clone().add(100,"y"),l=s.clone(),d="";for(i.eq(0).find("span").attr("title",n.tooltips.prevCentury),i.eq(2).find("span").attr("title",n.tooltips.nextCentury),e.find(".disabled").removeClass("disabled"),(s.isSame(t({y:1900}))||n.minDate&&n.minDate.isAfter(s,"y"))&&i.eq(0).addClass("disabled"),i.eq(1).text(s.year()+"-"+o.year()),(s.isSame(t({y:2e3}))||n.maxDate&&n.maxDate.isBefore(o,"y"))&&i.eq(2).addClass("disabled");!s.isAfter(o,"y");)d+='<span data-action="selectDecade" class="decade'+(s.isSame(a,"y")?" active":"")+(X(s,"y")?"":" disabled")+'" data-selection="'+(s.year()+6)+'">'+(s.year()+1)+" - "+(s.year()+12)+"</span>",s.add(12,"y");d+="<span></span><span></span><span></span>",e.find("td").html(d),i.eq(1).text(l.year()+1+"-"+s.year())},$=function(){var t,i,s,o,l=f.find(".datepicker-days"),d=l.find("th"),h=[];if(C()){for(d.eq(0).find("span").attr("title",n.tooltips.prevMonth),d.eq(1).attr("title",n.tooltips.selectMonth),d.eq(2).find("span").attr("title",n.tooltips.nextMonth),l.find(".disabled").removeClass("disabled"),d.eq(1).text(r.format(n.dayViewHeaderFormat)),X(r.clone().subtract(1,"M"),"M")||d.eq(0).addClass("disabled"),X(r.clone().add(1,"M"),"M")||d.eq(2).addClass("disabled"),t=r.clone().startOf("M").startOf("w").startOf("d"),o=0;42>o;o++)0===t.weekday()&&(i=e("<tr>"),n.calendarWeeks&&i.append('<td class="cw">'+t.week()+"</td>"),h.push(i)),s="",t.isBefore(r,"M")&&(s+=" old"),t.isAfter(r,"M")&&(s+=" new"),t.isSame(a,"d")&&!u&&(s+=" active"),X(t,"d")||(s+=" disabled"),t.isSame(k(),"d")&&(s+=" today"),(0===t.day()||6===t.day())&&(s+=" weekend"),i.append('<td data-action="selectDay" data-day="'+t.format("L")+'" class="day'+s+'">'+t.date()+"</td>"),t.add(1,"d");l.find("tbody").empty().append(h),R(),V(),U()}},q=function(){var t=f.find(".timepicker-hours table"),i=r.clone().startOf("d"),n=[],a=e("<tr>");for(r.hour()>11&&!o&&i.hour(12);i.isSame(r,"d")&&(o||r.hour()<12&&i.hour()<12||r.hour()>11);)i.hour()%4===0&&(a=e("<tr>"),n.push(a)),a.append('<td data-action="selectHour" class="hour'+(X(i,"h")?"":" disabled")+'">'+i.format(o?"HH":"hh")+"</td>"),i.add(1,"h");t.empty().append(n)},G=function(){for(var t=f.find(".timepicker-minutes table"),i=r.clone().startOf("h"),a=[],s=e("<tr>"),o=1===n.stepping?5:n.stepping;r.isSame(i,"h");)i.minute()%(4*o)===0&&(s=e("<tr>"),a.push(s)),s.append('<td data-action="selectMinute" class="minute'+(X(i,"m")?"":" disabled")+'">'+i.format("mm")+"</td>"),i.add(o,"m");t.empty().append(a)},K=function(){for(var t=f.find(".timepicker-seconds table"),i=r.clone().startOf("m"),n=[],a=e("<tr>");r.isSame(i,"m");)i.second()%20===0&&(a=e("<tr>"),n.push(a)),a.append('<td data-action="selectSecond" class="second'+(X(i,"s")?"":" disabled")+'">'+i.format("ss")+"</td>"),i.add(5,"s");t.empty().append(n)},J=function(){var e,t,i=f.find(".timepicker span[data-time-component]");o||(e=f.find(".timepicker [data-action=togglePeriod]"),t=a.clone().add(a.hours()>=12?-12:12,"h"),e.text(a.format("A")),X(t,"h")?e.removeClass("disabled"):e.addClass("disabled")),i.filter("[data-time-component=hours]").text(a.format(o?"HH":"hh")),i.filter("[data-time-component=minutes]").text(a.format("mm")),i.filter("[data-time-component=seconds]").text(a.format("ss")),q(),G(),K()},Z=function(){f&&($(),
J())},Q=function(e){var t=u?null:a;return e?(e=e.clone().locale(n.locale),1!==n.stepping&&e.minutes(Math.round(e.minutes()/n.stepping)*n.stepping%60).seconds(0),void(X(e)?(a=e,r=a.clone(),s.val(a.format(l)),i.data("date",a.format(l)),u=!1,Z(),F({type:"dp.change",date:a.clone(),oldDate:t})):(n.keepInvalid||s.val(u?"":a.format(l)),F({type:"dp.error",date:e})))):(u=!0,s.val(""),i.data("date",""),F({type:"dp.change",date:!1,oldDate:t}),void Z())},ee=function(){var t=!1;return f?(f.find(".collapse").each(function(){var i=e(this).data("collapse");return i&&i.transitioning?(t=!0,!1):!0}),t?c:(p&&p.hasClass("btn")&&p.toggleClass("active"),f.hide(),e(window).off("resize",I),f.off("click","[data-action]"),f.off("mousedown",!1),f.remove(),f=!1,F({type:"dp.hide",date:a.clone()}),s.blur(),c)):c},te=function(){Q(null)},ie={next:function(){var e=g[h].navFnc;r.add(g[h].navStep,e),$(),E(e)},previous:function(){var e=g[h].navFnc;r.subtract(g[h].navStep,e),$(),E(e)},pickerSwitch:function(){O(1)},selectMonth:function(t){var i=e(t.target).closest("tbody").find("span").index(e(t.target));r.month(i),h===m?(Q(a.clone().year(r.year()).month(r.month())),n.inline||ee()):(O(-1),$()),E("M")},selectYear:function(t){var i=parseInt(e(t.target).text(),10)||0;r.year(i),h===m?(Q(a.clone().year(r.year())),n.inline||ee()):(O(-1),$()),E("YYYY")},selectDecade:function(t){var i=parseInt(e(t.target).data("selection"),10)||0;r.year(i),h===m?(Q(a.clone().year(r.year())),n.inline||ee()):(O(-1),$()),E("YYYY")},selectDay:function(t){var i=r.clone();e(t.target).is(".old")&&i.subtract(1,"M"),e(t.target).is(".new")&&i.add(1,"M"),Q(i.date(parseInt(e(t.target).text(),10))),M()||n.keepOpen||n.inline||ee()},incrementHours:function(){var e=a.clone().add(1,"h");X(e,"h")&&Q(e)},incrementMinutes:function(){var e=a.clone().add(n.stepping,"m");X(e,"m")&&Q(e)},incrementSeconds:function(){var e=a.clone().add(1,"s");X(e,"s")&&Q(e)},decrementHours:function(){var e=a.clone().subtract(1,"h");X(e,"h")&&Q(e)},decrementMinutes:function(){var e=a.clone().subtract(n.stepping,"m");X(e,"m")&&Q(e)},decrementSeconds:function(){var e=a.clone().subtract(1,"s");X(e,"s")&&Q(e)},togglePeriod:function(){Q(a.clone().add(a.hours()>=12?-12:12,"h"))},togglePicker:function(t){var i,a=e(t.target),r=a.closest("ul"),s=r.find(".in"),o=r.find(".collapse:not(.in)");if(s&&s.length){if(i=s.data("collapse"),i&&i.transitioning)return;s.collapse?(s.collapse("hide"),o.collapse("show")):(s.removeClass("in"),o.addClass("in")),a.is("span")?a.toggleClass(n.icons.time+" "+n.icons.date):a.find("span").toggleClass(n.icons.time+" "+n.icons.date)}},showPicker:function(){f.find(".timepicker > div:not(.timepicker-picker)").hide(),f.find(".timepicker .timepicker-picker").show()},showHours:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-hours").show()},showMinutes:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var i=parseInt(e(t.target).text(),10);o||(a.hours()>=12?12!==i&&(i+=12):12===i&&(i=0)),Q(a.clone().hours(i)),ie.showPicker.call(c)},selectMinute:function(t){Q(a.clone().minutes(parseInt(e(t.target).text(),10))),ie.showPicker.call(c)},selectSecond:function(t){Q(a.clone().seconds(parseInt(e(t.target).text(),10))),ie.showPicker.call(c)},clear:te,today:function(){var e=k();X(e,"d")&&Q(e)},close:ee},ne=function(t){return e(t.currentTarget).is(".disabled")?!1:(ie[e(t.currentTarget).data("action")].apply(c,arguments),!1)},ae=function(){var t,i={year:function(e){return e.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(e){return e.date(1).hours(0).seconds(0).minutes(0)},day:function(e){return e.hours(0).seconds(0).minutes(0)},hour:function(e){return e.seconds(0).minutes(0)},minute:function(e){return e.seconds(0)}};return s.prop("disabled")||!n.ignoreReadonly&&s.prop("readonly")||f?c:(void 0!==s.val()&&0!==s.val().trim().length?Q(se(s.val().trim())):n.useCurrent&&u&&(s.is("input")&&0===s.val().trim().length||n.inline)&&(t=k(),"string"==typeof n.useCurrent&&(t=i[n.useCurrent](t)),Q(t)),f=D(),B(),H(),f.find(".timepicker-hours").hide(),f.find(".timepicker-minutes").hide(),f.find(".timepicker-seconds").hide(),Z(),O(),e(window).on("resize",I),f.on("click","[data-action]",ne),f.on("mousedown",!1),p&&p.hasClass("btn")&&p.toggleClass("active"),f.show(),I(),n.focusOnShow&&!s.is(":focus")&&s.focus(),F({type:"dp.show"}),c)},re=function(){return f?ee():ae()},se=function(e){return e=void 0===n.parseInputDate?t.isMoment(e)||e instanceof Date?t(e):k(e):n.parseInputDate(e),e.locale(n.locale),e},oe=function(e){var t,i,a,r,s=null,o=[],l={},d=e.which,h="p";w[d]=h;for(t in w)w.hasOwnProperty(t)&&w[t]===h&&(o.push(t),parseInt(t,10)!==d&&(l[t]=!0));for(t in n.keyBinds)if(n.keyBinds.hasOwnProperty(t)&&"function"==typeof n.keyBinds[t]&&(a=t.split(" "),a.length===o.length&&b[d]===a[a.length-1])){for(r=!0,i=a.length-2;i>=0;i--)if(!(b[a[i]]in l)){r=!1;break}if(r){s=n.keyBinds[t];break}}s&&(s.call(c,f),e.stopPropagation(),e.preventDefault())},le=function(e){w[e.which]="r",e.stopPropagation(),e.preventDefault()},de=function(t){var i=e(t.target).val().trim(),n=i?se(i):null;return Q(n),t.stopImmediatePropagation(),!1},he=function(){s.on({change:de,blur:n.debug?"":ee,keydown:oe,keyup:le,focus:n.allowInputToggle?ae:""}),i.is("input")?s.on({focus:ae}):p&&(p.on("click",re),p.on("mousedown",!1))},ce=function(){s.off({change:de,blur:blur,keydown:oe,keyup:le,focus:n.allowInputToggle?ee:""}),i.is("input")?s.off({focus:ae}):p&&(p.off("click",re),p.off("mousedown",!1))},ue=function(t){var i={};return e.each(t,function(){var e=se(this);e.isValid()&&(i[e.format("YYYY-MM-DD")]=!0)}),Object.keys(i).length?i:!1},pe=function(t){var i={};return e.each(t,function(){i[this]=!0}),Object.keys(i).length?i:!1},fe=function(){var e=n.format||"L LT";l=e.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(e){var t=a.localeData().longDateFormat(e)||e;return t.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(e){return a.localeData().longDateFormat(e)||e})}),d=n.extraFormats?n.extraFormats.slice():[],d.indexOf(e)<0&&d.indexOf(l)<0&&d.push(l),o=l.toLowerCase().indexOf("a")<1&&l.replace(/\[.*?\]/g,"").indexOf("h")<1,T("y")&&(m=2),T("M")&&(m=1),T("d")&&(m=0),h=Math.max(m,h),u||Q(a)};if(c.destroy=function(){ee(),ce(),i.removeData("DateTimePicker"),i.removeData("date")},c.toggle=re,c.show=ae,c.hide=ee,c.disable=function(){return ee(),p&&p.hasClass("btn")&&p.addClass("disabled"),s.prop("disabled",!0),c},c.enable=function(){return p&&p.hasClass("btn")&&p.removeClass("disabled"),s.prop("disabled",!1),c},c.ignoreReadonly=function(e){if(0===arguments.length)return n.ignoreReadonly;if("boolean"!=typeof e)throw new TypeError("ignoreReadonly () expects a boolean parameter");return n.ignoreReadonly=e,c},c.options=function(t){if(0===arguments.length)return e.extend(!0,{},n);if(!(t instanceof Object))throw new TypeError("options() options parameter should be an object");return e.extend(!0,n,t),e.each(n,function(e,t){if(void 0===c[e])throw new TypeError("option "+e+" is not recognized!");c[e](t)}),c},c.date=function(e){if(0===arguments.length)return u?null:a.clone();if(!(null===e||"string"==typeof e||t.isMoment(e)||e instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return Q(null===e?null:se(e)),c},c.format=function(e){if(0===arguments.length)return n.format;if("string"!=typeof e&&("boolean"!=typeof e||e!==!1))throw new TypeError("format() expects a sting or boolean:false parameter "+e);return n.format=e,l&&fe(),c},c.timeZone=function(e){return 0===arguments.length?n.timeZone:(n.timeZone=e,c)},c.dayViewHeaderFormat=function(e){if(0===arguments.length)return n.dayViewHeaderFormat;if("string"!=typeof e)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return n.dayViewHeaderFormat=e,c},c.extraFormats=function(e){if(0===arguments.length)return n.extraFormats;if(e!==!1&&!(e instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return n.extraFormats=e,d&&fe(),c},c.disabledDates=function(t){if(0===arguments.length)return n.disabledDates?e.extend({},n.disabledDates):n.disabledDates;if(!t)return n.disabledDates=!1,Z(),c;if(!(t instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return n.disabledDates=ue(t),n.enabledDates=!1,Z(),c},c.enabledDates=function(t){if(0===arguments.length)return n.enabledDates?e.extend({},n.enabledDates):n.enabledDates;if(!t)return n.enabledDates=!1,Z(),c;if(!(t instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return n.enabledDates=ue(t),n.disabledDates=!1,Z(),c},c.daysOfWeekDisabled=function(e){if(0===arguments.length)return n.daysOfWeekDisabled.splice(0);if("boolean"==typeof e&&!e)return n.daysOfWeekDisabled=!1,Z(),c;if(!(e instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(n.daysOfWeekDisabled=e.reduce(function(e,t){return t=parseInt(t,10),t>6||0>t||isNaN(t)?e:(-1===e.indexOf(t)&&e.push(t),e)},[]).sort(),n.useCurrent&&!n.keepInvalid){for(var t=0;!X(a,"d");){if(a.add(1,"d"),7===t)throw"Tried 7 times to find a valid date";t++}Q(a)}return Z(),c},c.maxDate=function(e){if(0===arguments.length)return n.maxDate?n.maxDate.clone():n.maxDate;if("boolean"==typeof e&&e===!1)return n.maxDate=!1,Z(),c;"string"==typeof e&&("now"===e||"moment"===e)&&(e=k());var t=se(e);if(!t.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+e);if(n.minDate&&t.isBefore(n.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+t.format(l));return n.maxDate=t,n.useCurrent&&!n.keepInvalid&&a.isAfter(e)&&Q(n.maxDate),r.isAfter(t)&&(r=t.clone().subtract(n.stepping,"m")),Z(),c},c.minDate=function(e){if(0===arguments.length)return n.minDate?n.minDate.clone():n.minDate;if("boolean"==typeof e&&e===!1)return n.minDate=!1,Z(),c;"string"==typeof e&&("now"===e||"moment"===e)&&(e=k());var t=se(e);if(!t.isValid())throw new TypeError("minDate() Could not parse date parameter: "+e);if(n.maxDate&&t.isAfter(n.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+t.format(l));return n.minDate=t,n.useCurrent&&!n.keepInvalid&&a.isBefore(e)&&Q(n.minDate),r.isBefore(t)&&(r=t.clone().add(n.stepping,"m")),Z(),c},c.defaultDate=function(e){if(0===arguments.length)return n.defaultDate?n.defaultDate.clone():n.defaultDate;if(!e)return n.defaultDate=!1,c;"string"==typeof e&&("now"===e||"moment"===e)&&(e=k());var t=se(e);if(!t.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+e);if(!X(t))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return n.defaultDate=t,(n.defaultDate&&n.inline||""===s.val().trim())&&Q(n.defaultDate),c},c.locale=function(e){if(0===arguments.length)return n.locale;if(!t.localeData(e))throw new TypeError("locale() locale "+e+" is not loaded from moment locales!");return n.locale=e,a.locale(n.locale),r.locale(n.locale),l&&fe(),f&&(ee(),ae()),c},c.stepping=function(e){return 0===arguments.length?n.stepping:(e=parseInt(e,10),(isNaN(e)||1>e)&&(e=1),n.stepping=e,c)},c.useCurrent=function(e){var t=["year","month","day","hour","minute"];if(0===arguments.length)return n.useCurrent;if("boolean"!=typeof e&&"string"!=typeof e)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof e&&-1===t.indexOf(e.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+t.join(", "));return n.useCurrent=e,c},c.collapse=function(e){if(0===arguments.length)return n.collapse;if("boolean"!=typeof e)throw new TypeError("collapse() expects a boolean parameter");return n.collapse===e?c:(n.collapse=e,f&&(ee(),ae()),c)},c.icons=function(t){if(0===arguments.length)return e.extend({},n.icons);if(!(t instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return e.extend(n.icons,t),f&&(ee(),ae()),c},c.tooltips=function(t){if(0===arguments.length)return e.extend({},n.tooltips);if(!(t instanceof Object))throw new TypeError("tooltips() expects parameter to be an Object");return e.extend(n.tooltips,t),f&&(ee(),ae()),c},c.useStrict=function(e){if(0===arguments.length)return n.useStrict;if("boolean"!=typeof e)throw new TypeError("useStrict() expects a boolean parameter");return n.useStrict=e,c},c.sideBySide=function(e){if(0===arguments.length)return n.sideBySide;if("boolean"!=typeof e)throw new TypeError("sideBySide() expects a boolean parameter");return n.sideBySide=e,f&&(ee(),ae()),c},c.viewMode=function(e){if(0===arguments.length)return n.viewMode;if("string"!=typeof e)throw new TypeError("viewMode() expects a string parameter");if(-1===x.indexOf(e))throw new TypeError("viewMode() parameter must be one of ("+x.join(", ")+") value");return n.viewMode=e,h=Math.max(x.indexOf(e),m),O(),c},c.toolbarPlacement=function(e){if(0===arguments.length)return n.toolbarPlacement;if("string"!=typeof e)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===_.indexOf(e))throw new TypeError("toolbarPlacement() parameter must be one of ("+_.join(", ")+") value");return n.toolbarPlacement=e,f&&(ee(),ae()),c},c.widgetPositioning=function(t){if(0===arguments.length)return e.extend({},n.widgetPositioning);if("[object Object]"!=={}.toString.call(t))throw new TypeError("widgetPositioning() expects an object variable");if(t.horizontal){if("string"!=typeof t.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(t.horizontal=t.horizontal.toLowerCase(),-1===v.indexOf(t.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+v.join(", ")+")");n.widgetPositioning.horizontal=t.horizontal}if(t.vertical){if("string"!=typeof t.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(t.vertical=t.vertical.toLowerCase(),-1===y.indexOf(t.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+y.join(", ")+")");n.widgetPositioning.vertical=t.vertical}return Z(),c},c.calendarWeeks=function(e){if(0===arguments.length)return n.calendarWeeks;if("boolean"!=typeof e)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return n.calendarWeeks=e,Z(),c},c.showTodayButton=function(e){if(0===arguments.length)return n.showTodayButton;if("boolean"!=typeof e)throw new TypeError("showTodayButton() expects a boolean parameter");return n.showTodayButton=e,f&&(ee(),ae()),c},c.showClear=function(e){if(0===arguments.length)return n.showClear;if("boolean"!=typeof e)throw new TypeError("showClear() expects a boolean parameter");return n.showClear=e,f&&(ee(),ae()),c},c.widgetParent=function(t){if(0===arguments.length)return n.widgetParent;if("string"==typeof t&&(t=e(t)),null!==t&&"string"!=typeof t&&!(t instanceof e))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return n.widgetParent=t,f&&(ee(),ae()),c},c.keepOpen=function(e){if(0===arguments.length)return n.keepOpen;if("boolean"!=typeof e)throw new TypeError("keepOpen() expects a boolean parameter");return n.keepOpen=e,c},c.focusOnShow=function(e){if(0===arguments.length)return n.focusOnShow;if("boolean"!=typeof e)throw new TypeError("focusOnShow() expects a boolean parameter");return n.focusOnShow=e,c},c.inline=function(e){if(0===arguments.length)return n.inline;if("boolean"!=typeof e)throw new TypeError("inline() expects a boolean parameter");return n.inline=e,c},c.clear=function(){return te(),c},c.keyBinds=function(e){return n.keyBinds=e,c},c.getMoment=function(e){return k(e)},c.debug=function(e){if("boolean"!=typeof e)throw new TypeError("debug() expects a boolean parameter");return n.debug=e,c},c.allowInputToggle=function(e){if(0===arguments.length)return n.allowInputToggle;if("boolean"!=typeof e)throw new TypeError("allowInputToggle() expects a boolean parameter");return n.allowInputToggle=e,c},c.showClose=function(e){if(0===arguments.length)return n.showClose;if("boolean"!=typeof e)throw new TypeError("showClose() expects a boolean parameter");return n.showClose=e,c},c.keepInvalid=function(e){if(0===arguments.length)return n.keepInvalid;if("boolean"!=typeof e)throw new TypeError("keepInvalid() expects a boolean parameter");return n.keepInvalid=e,c},c.datepickerInput=function(e){if(0===arguments.length)return n.datepickerInput;if("string"!=typeof e)throw new TypeError("datepickerInput() expects a string parameter");return n.datepickerInput=e,c},c.parseInputDate=function(e){if(0===arguments.length)return n.parseInputDate;if("function"!=typeof e)throw new TypeError("parseInputDate() sholud be as function");return n.parseInputDate=e,c},c.disabledTimeIntervals=function(t){if(0===arguments.length)return n.disabledTimeIntervals?e.extend({},n.disabledTimeIntervals):n.disabledTimeIntervals;if(!t)return n.disabledTimeIntervals=!1,Z(),c;if(!(t instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return n.disabledTimeIntervals=t,Z(),c},c.disabledHours=function(t){if(0===arguments.length)return n.disabledHours?e.extend({},n.disabledHours):n.disabledHours;if(!t)return n.disabledHours=!1,Z(),c;if(!(t instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(n.disabledHours=pe(t),n.enabledHours=!1,n.useCurrent&&!n.keepInvalid){for(var i=0;!X(a,"h");){if(a.add(1,"h"),24===i)throw"Tried 24 times to find a valid date";i++}Q(a)}return Z(),c},c.enabledHours=function(t){if(0===arguments.length)return n.enabledHours?e.extend({},n.enabledHours):n.enabledHours;if(!t)return n.enabledHours=!1,Z(),c;if(!(t instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(n.enabledHours=pe(t),n.disabledHours=!1,n.useCurrent&&!n.keepInvalid){for(var i=0;!X(a,"h");){if(a.add(1,"h"),24===i)throw"Tried 24 times to find a valid date";i++}Q(a)}return Z(),c},c.viewDate=function(e){if(0===arguments.length)return r.clone();if(!e)return r=a.clone(),c;if(!("string"==typeof e||t.isMoment(e)||e instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return r=se(e),E(),c},i.is("input"))s=i;else if(s=i.find(n.datepickerInput),0===s.size())s=i.find("input");else if(!s.is("input"))throw new Error('CSS class "'+n.datepickerInput+'" cannot be applied to non input element');if(i.hasClass("input-group")&&(p=0===i.find(".datepickerbutton").size()?i.find(".input-group-addon"):i.find(".datepickerbutton")),!n.inline&&!s.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return a=k(),r=a.clone(),e.extend(!0,n,L()),c.options(n),fe(),he(),s.prop("disabled")&&c.disable(),s.is("input")&&0!==s.val().trim().length?Q(se(s.val().trim())):n.defaultDate&&void 0===s.attr("placeholder")&&Q(n.defaultDate),n.inline&&ae(),c};e.fn.datetimepicker=function(t){return this.each(function(){var n=e(this);n.data("DateTimePicker")||(t=e.extend(!0,{},e.fn.datetimepicker.defaults,t),n.data("DateTimePicker",i(n,t)))})},e.fn.datetimepicker.defaults={timeZone:"Etc/UTC",format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:t.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().subtract(7,"d")):this.date(t.clone().add(this.stepping(),"m"))}},down:function(e){if(!e)return void this.show();var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().add(7,"d")):this.date(t.clone().subtract(this.stepping(),"m"))},"control up":function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().subtract(1,"y")):this.date(t.clone().add(1,"h"))}},"control down":function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().add(1,"y")):this.date(t.clone().subtract(1,"h"))}},left:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().subtract(1,"d"))}},right:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().add(1,"d"))}},pageUp:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().subtract(1,"M"))}},pageDown:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(e){e.find(".timepicker").is(":visible")&&e.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(this.getMoment())},"delete":function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1}}),function(){function e(e,i){e.prototype=t(i.prototype),e.prototype.constructor=e,e.base=i.prototype}function t(e){function t(){}return t.prototype=e,new t}function n(e,t,i){return"millisecond"===i?e.setMilliseconds(e.getMilliseconds()+1*t):"second"===i?e.setSeconds(e.getSeconds()+1*t):"minute"===i?e.setMinutes(e.getMinutes()+1*t):"hour"===i?e.setHours(e.getHours()+1*t):"day"===i?e.setDate(e.getDate()+1*t):"week"===i?e.setDate(e.getDate()+7*t):"month"===i?e.setMonth(e.getMonth()+1*t):"year"===i&&e.setFullYear(e.getFullYear()+1*t),e}function a(e,t){var i=!1;for(0>e&&(i=!0,e*=-1),e=""+e,t=t?t:1;e.length<t;)e="0"+e;return i?"-"+e:e}function r(e){if(!e)return e;e=e.replace(/^\s\s*/,"");for(var t=/\s/,i=e.length;t.test(e.charAt(--i)););return e.slice(0,i+1)}function s(e){e.roundRect=function(e,t,i,n,a,r,s,o){s&&(this.fillStyle=s),o&&(this.strokeStyle=o),"undefined"==typeof a&&(a=5),this.lineWidth=r,this.beginPath(),this.moveTo(e+a,t),this.lineTo(e+i-a,t),this.quadraticCurveTo(e+i,t,e+i,t+a),this.lineTo(e+i,t+n-a),this.quadraticCurveTo(e+i,t+n,e+i-a,t+n),this.lineTo(e+a,t+n),this.quadraticCurveTo(e,t+n,e,t+n-a),this.lineTo(e,t+a),this.quadraticCurveTo(e,t,e+a,t),this.closePath(),s&&this.fill(),o&&r>0&&this.stroke()}}function o(e,t){return e-t}function l(e,t){return e.x-t.x}function d(e){var t=((16711680&e)>>16).toString(16),i=((65280&e)>>8).toString(16);return e=((255&e)>>0).toString(16),t=2>t.length?"0"+t:t,i=2>i.length?"0"+i:i,e=2>e.length?"0"+e:e,"#"+t+i+e}function h(e,t){var i=this.length>>>0,n=Number(t)||0,n=0>n?Math.ceil(n):Math.floor(n);for(0>n&&(n+=i);i>n;n++)if(n in this&&this[n]===e)return n;return-1}function c(e){return null===e||"undefined"==typeof e}function u(e,t,i){i=i||"normal";var n=e+"_"+t+"_"+i,a=U[n];if(isNaN(a)){try{if(e="position:absolute; left:0px; top:-20000px; padding:0px;margin:0px;border:none;white-space:pre;line-height:normal;font-family:"+e+"; font-size:"+t+"px; font-weight:"+i+";",!$){var r=document.body;$=document.createElement("span"),$.innerHTML="";var s=document.createTextNode("Mpgyi");$.appendChild(s),r.appendChild($)}$.style.display="",$.setAttribute("style",e),a=Math.round($.offsetHeight),$.style.display="none"}catch(o){a=Math.ceil(1.1*t)}a=Math.max(a,t),U[n]=a}return a}function p(e,t){var i=[];if(lineDashTypeMap={solid:[],shortDash:[3,1],shortDot:[1,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],dot:[1,2],dash:[4,2],dashDot:[4,2,1,2],longDash:[8,2],longDashDot:[8,2,1,2],longDashDotDot:[8,2,1,2,1,2]},i=lineDashTypeMap[e||"solid"])for(var n=0;n<i.length;n++)i[n]*=t;else i=[];return i}function f(e,t,i,n){if(e.addEventListener)e.addEventListener(t,i,n||!1);else{if(!e.attachEvent)return!1;e.attachEvent("on"+t,function(t){t=t||window.event,t.preventDefault=t.preventDefault||function(){t.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){t.cancelBubble=!0},i.call(e,t)})}}function m(e,t,i){for(e*=ee,t*=ee,e=i.getImageData(e,t,2,2).data,t=!0,i=0;4>i;i++)if(e[i]!==e[i+4]|e[i]!==e[i+8]|e[i]!==e[i+12]){t=!1;break}return t?e[0]<<16|e[1]<<8|e[2]:0}function g(e,t,i){return e in t?t[e]:i[e]}function x(e,t,i){if(Y&&J){var n=e.getContext("2d");Q=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1,ee=Z/Q,e.width=t*ee,e.height=i*ee,Z!==Q&&(e.style.width=t+"px",e.style.height=i+"px",n.scale(ee,ee))}else e.width=t,e.height=i}function y(e,t){var i=document.createElement("canvas");return i.setAttribute("class","canvasjs-chart-canvas"),x(i,e,t),Y||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(i),i}function v(e,t,i){if(e&&t&&i){i=i+"."+t;var n="image/"+t;e=e.toDataURL(n);var a=!1,r=document.createElement("a");if(r.download=i,r.href=e,r.target="_blank","undefined"!=typeof Blob&&new Blob){for(var s=e.replace(/^data:[a-z/]*;base64,/,""),s=atob(s),o=new ArrayBuffer(s.length),o=new Uint8Array(o),l=0;l<s.length;l++)o[l]=s.charCodeAt(l);t=new Blob([o.buffer],{type:"image/"+t});try{window.navigator.msSaveBlob(t,i),a=!0}catch(d){r.dataset.downloadurl=[n,r.download,r.href].join(":"),r.href=window.URL.createObjectURL(t)}}if(!a)try{event=document.createEvent("MouseEvents"),event.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent?r.dispatchEvent(event):r.fireEvent&&r.fireEvent("onclick")}catch(h){t=window.open(),t.document.write("<img src='"+e+"'></img><div>Please right click on the image and save it to your device</div>"),t.document.close()}}}function _(e,t,i){t.getAttribute("state")!==i&&(t.setAttribute("state",i),t.setAttribute("type","button"),t.style.position="relative",t.style.margin="0px 0px 0px 0px",t.style.padding="3px 4px 0px 4px",t.style.cssFloat="left",t.setAttribute("title",e._cultureInfo[i+"Text"]),t.innerHTML="<img style='height:16px;' src='"+te[i].image+"' alt='"+e._cultureInfo[i+"Text"]+"' />")}function b(){for(var e=null,t=0;t<arguments.length;t++)e=arguments[t],e.style&&(e.style.display="inline")}function w(){for(var e=null,t=0;t<arguments.length;t++)(e=arguments[t])&&e.style&&(e.style.display="none")}function k(e,t,i,n){this._defaultsKey=e,this.parent=n,this._eventListeners=[],n={},i&&R[i]&&R[i][e]&&(n=R[i][e]),this._options=t?t:{},this.setOptions(this._options,n)}function T(e,t,i){this._publicChartReference=i,t=t||{},T.base.constructor.call(this,"Chart",t,t.theme?t.theme:"theme1");var n=this;this._containerId=e,this._objectsInitialized=!1,this.overlaidCanvasCtx=this.ctx=null,this._indexLabels=[],this._panTimerId=0,this._lastTouchEventType="",this._lastTouchData=null,this.isAnimating=!1,this.renderCount=0,this.panEnabled=this.disableToolTip=this.animatedRender=!1,this._defaultCursor="default",this.plotArea={canvas:null,ctx:null,x1:0,y1:0,x2:0,y2:0,width:0,height:0},this._dataInRenderedOrder=[],(this._container="string"==typeof this._containerId?document.getElementById(this._containerId):this._containerId)?(this._container.innerHTML="",t=e=0,e=this._options.width?this.width:0<this._container.clientWidth?this._container.clientWidth:this.width,t=this._options.height?this.height:0<this._container.clientHeight?this._container.clientHeight:this.height,this.width=e,this.height=t,this.x1=this.y1=0,this.x2=this.width,this.y2=this.height,this._selectedColorSet="undefined"!=typeof H[this.colorSet]?H[this.colorSet]:H.colorSet1,this._canvasJSContainer=document.createElement("div"),this._canvasJSContainer.setAttribute("class","canvasjs-chart-container"),this._canvasJSContainer.style.position="relative",this._canvasJSContainer.style.textAlign="left",this._canvasJSContainer.style.cursor="auto",Y||(this._canvasJSContainer.style.height="0px"),this._container.appendChild(this._canvasJSContainer),this.canvas=y(e,t),this.canvas.style.position="absolute",this.canvas.getContext&&(this._canvasJSContainer.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.textBaseline="top",s(this.ctx),Y?this.plotArea.ctx=this.ctx:(this.plotArea.canvas=y(e,t),this.plotArea.canvas.style.position="absolute",this.plotArea.canvas.setAttribute("class","plotAreaCanvas"),this._canvasJSContainer.appendChild(this.plotArea.canvas),this.plotArea.ctx=this.plotArea.canvas.getContext("2d")),this.overlaidCanvas=y(e,t),this.overlaidCanvas.style.position="absolute",this._canvasJSContainer.appendChild(this.overlaidCanvas),this.overlaidCanvasCtx=this.overlaidCanvas.getContext("2d"),this.overlaidCanvasCtx.textBaseline="top",this._eventManager=new B(this),f(window,"resize",function(){n._updateSize()&&n.render()}),this._toolBar=document.createElement("div"),this._toolBar.setAttribute("class","canvasjs-chart-toolbar"),this._toolBar.style.cssText="position: absolute; right: 1px; top: 1px;",this._canvasJSContainer.appendChild(this._toolBar),this.bounds={x1:0,y1:0,x2:this.width,y2:this.height},f(this.overlaidCanvas,"click",function(e){n._mouseEventHandler(e)}),f(this.overlaidCanvas,"mousemove",function(e){n._mouseEventHandler(e)}),f(this.overlaidCanvas,"mouseup",function(e){n._mouseEventHandler(e)}),f(this.overlaidCanvas,"mousedown",function(e){n._mouseEventHandler(e),w(n._dropdownMenu)}),f(this.overlaidCanvas,"mouseout",function(e){n._mouseEventHandler(e)}),f(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",function(e){n._touchEventHandler(e)}),f(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",function(e){n._touchEventHandler(e)}),f(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerUp":"touchend",function(e){n._touchEventHandler(e)}),f(this.overlaidCanvas,window.navigator.msPointerEnabled?"MSPointerCancel":"touchcancel",function(e){n._touchEventHandler(e)}),this._creditLink||(this._creditLink=document.createElement("a"),this._creditLink.setAttribute("class","canvasjs-chart-credit"),this._creditLink.setAttribute("style","outline:none;margin:0px;position:absolute;right:3px;top:"+(this.height-14)+"px;color:dimgrey;text-decoration:none;font-size:10px;font-family:Lucida Grande, Lucida Sans Unicode, Arial, sans-serif"),this._creditLink.setAttribute("tabIndex",-1),this._creditLink.setAttribute("target","_blank")),this._toolTip=new O(this,this._options.toolTip,this.theme),this.axisY2=this.axisY=this.axisX=this.data=null,this.sessionVariables={axisX:{},axisY:{},axisY2:{}})):window.console&&window.console.log('CanvasJS Error: Chart Container with id "'+this._containerId+'" was not found')}function M(e,t){for(var i=[],n=0;n<e.length;n++)if(0==n)i.push(e[0]);else{var a,r,s;s=n-1,a=0===s?0:s-1,r=s===e.length-1?s:s+1,i[i.length]={x:e[s].x+(e[r].x-e[a].x)/t/3,y:e[s].y+(e[r].y-e[a].y)/t/3},s=n,a=0===s?0:s-1,r=s===e.length-1?s:s+1,i[i.length]={x:e[s].x-(e[r].x-e[a].x)/t/3,y:e[s].y-(e[r].y-e[a].y)/t/3},i[i.length]=e[n]}return i}function C(e,t){if(null===e||"undefined"==typeof e)return t;var i=parseFloat(e.toString())*(0<=e.toString().indexOf("%")?t/100:1);return!isNaN(i)&&t>=i&&i>=0?i:t}function S(e,t,i,n,a){"undefined"==typeof a&&(a=0),this._padding=a,this._x1=e,this._y1=t,this._x2=i,this._y2=n,this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=this._padding}function P(e,t){P.base.constructor.call(this,"TextBlock",t),this.ctx=e,this._isDirty=!0,this._wrappedText=null,this._lineHeight=u(this.fontFamily,this.fontSize,this.fontWeight)}function A(e,t){A.base.constructor.call(this,"Title",t,e.theme),this.chart=e,
this.canvas=e.canvas,this.ctx=this.chart.ctx,"undefined"==typeof this._options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.height=this.width=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function j(e,t){j.base.constructor.call(this,"Subtitle",t,e.theme),this.chart=e,this.canvas=e.canvas,this.ctx=this.chart.ctx,"undefined"==typeof this._options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.height=this.width=null,this.bounds={x1:null,y1:null,x2:null,y2:null}}function D(e,t,i){D.base.constructor.call(this,"Legend",t,i),this.chart=e,this.canvas=e.canvas,this.ctx=this.chart.ctx,this.ghostCtx=this.chart._eventManager.ghostCtx,this.items=[],this.height=this.width=0,this.orientation=null,this.dataSeries=[],this.bounds={x1:null,y1:null,x2:null,y2:null},"undefined"==typeof this._options.fontSize&&(this.fontSize=this.chart.getAutoFontSize(this.fontSize)),this.lineHeight=u(this.fontFamily,this.fontSize,this.fontWeight),this.horizontalSpacing=this.fontSize}function L(e,t){L.base.constructor.call(this,t),this.chart=e,this.canvas=e.canvas,this.ctx=this.chart.ctx}function I(e,t,i,n,a){I.base.constructor.call(this,"DataSeries",t,i),this.chart=e,this.canvas=e.canvas,this._ctx=e.canvas.ctx,this.index=n,this.noDataPointsInPlotArea=0,this.id=a,this.chart._eventManager.objectMap[a]={id:a,objectType:"dataSeries",dataSeriesIndex:n},this.dataPointIds=[],this.plotUnit=[],this.axisY=this.axisX=null,null===this.fillOpacity&&(this.type.match(/area/i)?this.fillOpacity=.7:this.fillOpacity=1),this.axisPlacement=this.getDefaultAxisPlacement(),"undefined"==typeof this._options.indexLabelFontSize&&(this.indexLabelFontSize=this.chart.getAutoFontSize(this.indexLabelFontSize))}function F(e,t,i,n){if(F.base.constructor.call(this,"Axis",t,e.theme),this.chart=e,this.canvas=e.canvas,this.ctx=e.ctx,this.intervalStartPosition=this.maxHeight=this.maxWidth=0,this.labels=[],this._labels=null,this.dataInfo={min:1/0,max:-(1/0),viewPortMin:1/0,viewPortMax:-(1/0),minDiff:1/0},"axisX"===i?(this.sessionVariables=this.chart.sessionVariables[i],this._options.interval||(this.intervalType=null)):this.sessionVariables="left"===n||"top"===n?this.chart.sessionVariables.axisY:this.chart.sessionVariables.axisY2,"undefined"==typeof this._options.titleFontSize&&(this.titleFontSize=this.chart.getAutoFontSize(this.titleFontSize)),"undefined"==typeof this._options.labelFontSize&&(this.labelFontSize=this.chart.getAutoFontSize(this.labelFontSize)),this.type=i,"axisX"!==i||t&&"undefined"!=typeof t.gridThickness||(this.gridThickness=0),this._position=n,this.lineCoordinates={x1:null,y1:null,x2:null,y2:null,width:null},this.labelAngle=(this.labelAngle%360+360)%360,90<this.labelAngle&&270>=this.labelAngle?this.labelAngle-=180:180<this.labelAngle&&270>=this.labelAngle?this.labelAngle-=180:270<this.labelAngle&&360>=this.labelAngle&&(this.labelAngle-=360),this._options.stripLines&&0<this._options.stripLines.length)for(this.stripLines=[],t=0;t<this._options.stripLines.length;t++)this.stripLines.push(new E(this.chart,this._options.stripLines[t],e.theme,++this.chart._eventManager.lastObjectId,this));this._titleTextBlock=null,this.hasOptionChanged("viewportMinimum")&&null===this.viewportMinimum&&(this._options.viewportMinimum=void 0,this.sessionVariables.viewportMinimum=null),this.hasOptionChanged("viewportMinimum")||isNaN(this.sessionVariables.newViewportMinimum)||null===this.sessionVariables.newViewportMinimum?this.sessionVariables.newViewportMinimum=null:this.viewportMinimum=this.sessionVariables.newViewportMinimum,this.hasOptionChanged("viewportMaximum")&&null===this.viewportMaximum&&(this._options.viewportMaximum=void 0,this.sessionVariables.viewportMaximum=null),this.hasOptionChanged("viewportMaximum")||isNaN(this.sessionVariables.newViewportMaximum)||null===this.sessionVariables.newViewportMaximum?this.sessionVariables.newViewportMaximum=null:this.viewportMaximum=this.sessionVariables.newViewportMaximum,null!==this.minimum&&null!==this.viewportMinimum&&(this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum)),null!==this.maximum&&null!==this.viewportMaximum&&(this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum)),this.trackChanges("viewportMinimum"),this.trackChanges("viewportMaximum")}function E(e,t,i,n,a){E.base.constructor.call(this,"StripLine",t,i,a),this.id=n,this.chart=e,this.ctx=this.chart.ctx,this.label=this.label,this._thicknessType="pixel",null!==this.startValue&&null!==this.endValue&&(this.value=((this.startValue.getTime?this.startValue.getTime():this.startValue)+(this.endValue.getTime?this.endValue.getTime():this.endValue))/2,this.thickness=Math.max(this.endValue-this.startValue),this._thicknessType="value")}function O(e,t,i){O.base.constructor.call(this,"ToolTip",t,i),this.chart=e,this.canvas=e.canvas,this.ctx=this.chart.ctx,this.currentDataPointIndex=this.currentSeriesIndex=-1,this._timerId=0,this._prevY=this._prevX=NaN,this._initialize()}function B(e){this.chart=e,this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.ghostCanvas=y(this.chart.width,this.chart.height),this.ghostCtx=this.ghostCanvas.getContext("2d"),this.mouseoveredObjectMaps=[]}function N(e){var t;e&&X[e]&&(t=X[e]),N.base.constructor.call(this,"CultureInfo",t)}function W(e){this.chart=e,this.ctx=this.chart.plotArea.ctx,this.animations=[],this.animationRequestId=null}var Y=!!document.createElement("canvas").getContext,z={Chart:{width:500,height:400,zoomEnabled:!1,zoomType:"x",backgroundColor:"white",theme:"theme1",animationEnabled:!1,animationDuration:1200,dataPointWidth:null,dataPointMinWidth:null,dataPointMaxWidth:null,colorSet:"colorSet1",culture:"en",creditText:"CanvasJS.com",interactivityEnabled:!0,exportEnabled:!1,exportFileName:"Chart",rangeChanging:null,rangeChanged:null},Title:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:20,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,margin:5,wrap:!0,maxWidth:null,dockInsidePlotArea:!1},Subtitle:{padding:0,text:null,verticalAlign:"top",horizontalAlign:"center",fontSize:14,fontFamily:"Calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,margin:2,wrap:!0,maxWidth:null,dockInsidePlotArea:!1},Legend:{name:null,verticalAlign:"center",horizontalAlign:"right",fontSize:14,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",cursor:null,itemmouseover:null,itemmouseout:null,itemmousemove:null,itemclick:null,dockInsidePlotArea:!1,reversed:!1,maxWidth:null,maxHeight:null,itemMaxWidth:null,itemWidth:null,itemWrap:!0,itemTextFormatter:null},ToolTip:{enabled:!0,shared:!1,animationEnabled:!0,content:null,contentFormatter:null,reversed:!1,backgroundColor:null,borderColor:null,borderThickness:2,cornerRadius:5,fontSize:14,fontColor:null,fontFamily:"Calibri, Arial, Georgia, serif;",fontWeight:"normal",fontStyle:"italic"},Axis:{minimum:null,maximum:null,viewportMinimum:null,viewportMaximum:null,interval:null,intervalType:null,title:null,titleFontColor:"black",titleFontSize:20,titleFontFamily:"arial",titleFontWeight:"normal",titleFontStyle:"normal",labelAngle:0,labelFontFamily:"arial",labelFontColor:"black",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelAutoFit:!1,labelWrap:!0,labelMaxWidth:null,labelFormatter:null,prefix:"",suffix:"",includeZero:!0,tickLength:5,tickColor:"black",tickThickness:1,lineColor:"black",lineThickness:1,lineDashType:"solid",gridColor:"A0A0A0",gridThickness:0,gridDashType:"solid",interlacedColor:null,valueFormatString:null,margin:2,stripLines:[]},StripLine:{value:null,startValue:null,endValue:null,color:"orange",opacity:null,thickness:2,lineDashType:"solid",label:"",labelBackgroundColor:"#EEEEEE",labelFontFamily:"arial",labelFontColor:"orange",labelFontSize:12,labelFontWeight:"normal",labelFontStyle:"normal",labelFormatter:null,showOnTop:!1},DataSeries:{name:null,dataPoints:null,label:"",bevelEnabled:!1,highlightEnabled:!0,cursor:null,indexLabel:"",indexLabelPlacement:"auto",indexLabelOrientation:"horizontal",indexLabelFontColor:"black",indexLabelFontSize:12,indexLabelFontStyle:"normal",indexLabelFontFamily:"Arial",indexLabelFontWeight:"normal",indexLabelBackgroundColor:null,indexLabelLineColor:null,indexLabelLineThickness:1,indexLabelLineDashType:"solid",indexLabelMaxWidth:null,indexLabelWrap:!0,indexLabelFormatter:null,lineThickness:2,lineDashType:"solid",color:null,risingColor:"white",fillOpacity:null,startAngle:0,radius:null,innerRadius:null,type:"column",xValueType:"number",axisYType:"primary",xValueFormatString:null,yValueFormatString:null,zValueFormatString:null,percentFormatString:null,showInLegend:null,legendMarkerType:null,legendMarkerColor:null,legendText:null,legendMarkerBorderColor:null,legendMarkerBorderThickness:null,markerType:"circle",markerColor:null,markerSize:null,markerBorderColor:null,markerBorderThickness:null,mouseover:null,mouseout:null,mousemove:null,click:null,toolTipContent:null,visible:!0},TextBlock:{x:0,y:0,width:null,height:null,maxWidth:null,maxHeight:null,padding:0,angle:0,text:"",horizontalAlign:"center",fontSize:12,fontFamily:"calibri",fontWeight:"normal",fontColor:"black",fontStyle:"normal",borderThickness:0,borderColor:"black",cornerRadius:0,backgroundColor:null,textBaseline:"top"},CultureInfo:{decimalSeparator:".",digitGroupSeparator:",",zoomText:"Zoom",panText:"Pan",resetText:"Reset",menuText:"More Options",saveJPGText:"Save as JPEG",savePNGText:"Save as PNG",days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")}},X={en:{}},H={colorSet1:"#369EAD #C24642 #7F6084 #86B402 #A2D1CF #C8B631 #6DBCEB #52514E #4F81BC #A064A1 #F79647".split(" "),colorSet2:"#4F81BC #C0504E #9BBB58 #23BFAA #8064A1 #4AACC5 #F79647 #33558B".split(" "),colorSet3:"#8CA1BC #36845C #017E82 #8CB9D0 #708C98 #94838D #F08891 #0366A7 #008276 #EE7757 #E5BA3A #F2990B #03557B #782970".split(" ")},R={theme1:{Chart:{colorSet:"colorSet1"},Title:{fontFamily:Y?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",fontSize:33,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:5},Subtitle:{fontFamily:Y?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",fontSize:16,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:5},Axis:{titleFontSize:26,titleFontColor:"#666666",titleFontFamily:Y?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontFamily:Y?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:18,labelFontColor:"grey",tickColor:"#BBBBBB",tickThickness:2,gridThickness:2,gridColor:"#BBBBBB",lineThickness:2,lineColor:"#BBBBBB"},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:Y?"monospace, sans-serif,arial black":"calibri"},DataSeries:{indexLabelFontColor:"grey",indexLabelFontFamily:Y?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",indexLabelFontSize:18,indexLabelLineThickness:1}},theme2:{Chart:{colorSet:"colorSet2"},Title:{fontFamily:"impact, charcoal, arial black, sans-serif",fontSize:32,fontColor:"#333333",verticalAlign:"top",margin:5},Subtitle:{fontFamily:"impact, charcoal, arial black, sans-serif",fontSize:14,fontColor:"#333333",verticalAlign:"top",margin:5},Axis:{titleFontSize:22,titleFontColor:"rgb(98,98,98)",titleFontFamily:Y?"monospace, sans-serif,arial black":"arial",titleFontWeight:"bold",labelFontFamily:Y?"monospace, Courier New, Courier":"arial",labelFontSize:16,labelFontColor:"grey",labelFontWeight:"bold",tickColor:"grey",tickThickness:2,gridThickness:2,gridColor:"grey",lineColor:"grey",lineThickness:0},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:Y?"monospace, sans-serif,arial black":"arial"},DataSeries:{indexLabelFontColor:"grey",indexLabelFontFamily:Y?"Courier New, Courier, monospace":"arial",indexLabelFontWeight:"bold",indexLabelFontSize:18,indexLabelLineThickness:1}},theme3:{Chart:{colorSet:"colorSet1"},Title:{fontFamily:Y?"Candara, Optima, Trebuchet MS, Helvetica Neue, Helvetica, Trebuchet MS, serif":"calibri",fontSize:32,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:5},Subtitle:{fontFamily:Y?"Candara, Optima, Trebuchet MS, Helvetica Neue, Helvetica, Trebuchet MS, serif":"calibri",fontSize:16,fontColor:"#3A3A3A",fontWeight:"bold",verticalAlign:"top",margin:5},Axis:{titleFontSize:22,titleFontColor:"rgb(98,98,98)",titleFontFamily:Y?"Verdana, Geneva, Calibri, sans-serif":"calibri",labelFontFamily:Y?"Calibri, Optima, Candara, Verdana, Geneva, sans-serif":"calibri",labelFontSize:18,labelFontColor:"grey",tickColor:"grey",tickThickness:2,gridThickness:2,gridColor:"grey",lineThickness:2,lineColor:"grey"},Legend:{verticalAlign:"bottom",horizontalAlign:"center",fontFamily:Y?"monospace, sans-serif,arial black":"calibri"},DataSeries:{bevelEnabled:!0,indexLabelFontColor:"grey",indexLabelFontFamily:Y?"Candara, Optima, Calibri, Verdana, Geneva, sans-serif":"calibri",indexLabelFontSize:18,indexLabelLineColor:"lightgrey",indexLabelLineThickness:2}}},V={numberDuration:1,yearDuration:314496e5,monthDuration:2592e6,weekDuration:6048e5,dayDuration:864e5,hourDuration:36e5,minuteDuration:6e4,secondDuration:1e3,millisecondDuration:1,dayOfWeekFromInt:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")},U={},$=null,q=function(){var e=/D{1,4}|M{1,4}|Y{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|f{1,3}|t{1,2}|T{1,2}|K|z{1,3}|"[^"]*"|'[^']*'/g,t="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),i="Sun Mon Tue Wed Thu Fri Sat".split(" "),n="January February March April May June July August September October November December".split(" "),r="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),s=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,o=/[^-+\dA-Z]/g;return function(l,d,h){var c=h?h.days:t,u=h?h.months:n,p=h?h.shortDays:i,f=h?h.shortMonths:r;h="";var m=!1;if(l=l&&l.getTime?l:l?new Date(l):new Date,isNaN(l))throw SyntaxError("invalid date");"UTC:"===d.slice(0,4)&&(d=d.slice(4),m=!0),h=m?"getUTC":"get";var g=l[h+"Date"](),x=l[h+"Day"](),y=l[h+"Month"](),v=l[h+"FullYear"](),_=l[h+"Hours"](),b=l[h+"Minutes"](),w=l[h+"Seconds"](),k=l[h+"Milliseconds"](),T=m?0:l.getTimezoneOffset();return h=d.replace(e,function(e){switch(e){case"D":return g;case"DD":return a(g,2);case"DDD":return p[x];case"DDDD":return c[x];case"M":return y+1;case"MM":return a(y+1,2);case"MMM":return f[y];case"MMMM":return u[y];case"Y":return parseInt(String(v).slice(-2));case"YY":return a(String(v).slice(-2),2);case"YYY":return a(String(v).slice(-3),3);case"YYYY":return a(v,4);case"h":return _%12||12;case"hh":return a(_%12||12,2);case"H":return _;case"HH":return a(_,2);case"m":return b;case"mm":return a(b,2);case"s":return w;case"ss":return a(w,2);case"f":return String(k).slice(0,1);case"ff":return a(String(k).slice(0,2),2);case"fff":return a(String(k).slice(0,3),3);case"t":return 12>_?"a":"p";case"tt":return 12>_?"am":"pm";case"T":return 12>_?"A":"P";case"TT":return 12>_?"AM":"PM";case"K":return m?"UTC":(String(l).match(s)||[""]).pop().replace(o,"");case"z":return(T>0?"-":"+")+Math.floor(Math.abs(T)/60);case"zz":return(T>0?"-":"+")+a(Math.floor(Math.abs(T)/60),2);case"zzz":return(T>0?"-":"+")+a(Math.floor(Math.abs(T)/60),2)+a(Math.abs(T)%60,2);default:return e.slice(1,e.length-1)}})}}(),G=function(e,t,i){if(null===e)return"";e=Number(e);var n=0>e?!0:!1;n&&(e*=-1);var r=i?i.decimalSeparator:".",s=i?i.digitGroupSeparator:",",o="";t=String(t);var o=1,l=i="",d=-1,h=[],c=[],u=0,p=0,f=0,m=!1,g=0,l=t.match(/"[^"]*"|'[^']*'|[eE][+-]*[0]+|[,]+[.]|\u2030|./g);t=null;for(var x=0;l&&x<l.length;x++)if(t=l[x],"."===t&&0>d)d=x;else{if("%"===t)o*=100;else{if("\u2030"===t){o*=1e3;continue}if(","===t[0]&&"."===t[t.length-1]){o/=Math.pow(1e3,t.length-1),d=x+t.length-1;continue}"E"!==t[0]&&"e"!==t[0]||"0"!==t[t.length-1]||(m=!0)}0>d?(h.push(t),"#"===t||"0"===t?u++:","===t&&f++):(c.push(t),"#"!==t&&"0"!==t||p++)}for(m&&(t=Math.floor(e),g=(0===t?"":String(t)).length-u,o/=Math.pow(10,g)),0>d&&(d=x),o=(e*o).toFixed(p),t=o.split("."),o=(t[0]+"").split(""),e=(t[1]+"").split(""),o&&"0"===o[0]&&o.shift(),x=m=l=p=d=0;0<h.length;)if(t=h.pop(),"#"===t||"0"===t)if(d++,d===u){var y=o,o=[];if("0"===t)for(t=u-p-(y?y.length:0);t>0;)y.unshift("0"),t--;for(;0<y.length;)i=y.pop()+i,x++,0===x%m&&l===f&&0<y.length&&(i=s+i);n&&(i="-"+i)}else 0<o.length?(i=o.pop()+i,p++,x++):"0"===t&&(i="0"+i,p++,x++),0===x%m&&l===f&&0<o.length&&(i=s+i);else"E"!==t[0]&&"e"!==t[0]||"0"!==t[t.length-1]||!/[eE][+-]*[0]+/.test(t)?","===t?(l++,m=x,x=0,0<o.length&&(i=s+i)):i=1<t.length&&('"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1])?t.slice(1,t.length-1)+i:t+i:(t=0>g?t.replace("+","").replace("-",""):t.replace("-",""),i+=t.replace(/[0]+/,function(e){return a(g,e.length)}));for(n="",s=!1;0<c.length;)t=c.shift(),"#"===t||"0"===t?0<e.length&&0!==Number(e.join(""))?(n+=e.shift(),s=!0):"0"===t&&(n+="0",s=!0):1<t.length&&('"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1])?n+=t.slice(1,t.length-1):"E"!==t[0]&&"e"!==t[0]||"0"!==t[t.length-1]||!/[eE][+-]*[0]+/.test(t)?n+=t:(t=0>g?t.replace("+","").replace("-",""):t.replace("-",""),n+=t.replace(/[0]+/,function(e){return a(g,e.length)}));return i+((s?r:"")+n)},K=function(e){var t=0,i=0;return e=e||window.event,e.offsetX||0===e.offsetX?(t=e.offsetX,i=e.offsetY):e.layerX||0==e.layerX?(t=e.layerX,i=e.layerY):(t=e.pageX-e.target.offsetLeft,i=e.pageY-e.target.offsetTop),{x:t,y:i}},J=!0,Z=window.devicePixelRatio||1,Q=1,ee=J?Z/Q:1,te={reset:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAcCAYAAAAAwr0iAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAKRSURBVEiJrdY/iF1FFMfxzwnZrGISUSR/JLGIhoh/QiRNBLWxMLIWEkwbgiAoFgoW2mhlY6dgpY2IlRBRxBSKhSAKIklWJRYuMZKAhiyopAiaTY7FvRtmZ+/ed9/zHRjezLw5v/O9d86cuZGZpmURAfdn5o9DfdZNLXpjz+LziPgyIl6MiG0jPTJzZBuyDrP4BVm0P/AKbljTb4ToY/gGewYA7KyCl+1b3DUYANvwbiHw0gCAGRzBOzjTAXEOu0cC4Ch+r5x/HrpdrcZmvIDFSucMtnYCYC++6HmNDw8FKDT34ETrf639/azOr5vwRk/g5fbeuABtgC04XWk9VQLciMP4EH/3AFzErRNC7MXlQmsesSoHsGPE23hmEoBW+61K66HMXFmIMvN8myilXS36R01ub+KfYvw43ZXwYDX+AHP4BAci4pFJomfmr/ihmNofESsBImJGk7mlncrM45n5JPbhz0kAWpsv+juxaX21YIPmVJS2uNzJMS6ZNexC0d+I7fUWXLFyz2kSZlpWPvASlmqAf/FXNXf3FAF2F/1LuFifAlionB6dRuSI2IwHi6lzmXmp6xR8XY0fiIh7psAwh+3FuDkRHQVjl+a8lkXjo0kLUKH7XaV5oO86PmZ1FTzyP4K/XGl9v/zwfbW7BriiuETGCP5ch9bc9f97HF/vcFzCa5gdEPgWq+t/4v0V63oE1uF4h0DiFJ7HnSWMppDdh1dxtsPvJ2wcBNAKbsJXa0Ck5opdaBPsRNu/usba09i1KsaAVzmLt3sghrRjuK1Tf4xkegInxwy8gKf7dKMVH2QRsV5zXR/Cftyu+aKaKbbkQrsdH+PTzLzcqzkOQAVzM+7FHdiqqe2/YT4zF/t8S/sPmawyvC974vcAAAAASUVORK5CYII="},pan:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAJVSURBVFiFvZe7a1RBGMV/x2hWI4JpfKCIiSBKOoOCkID/wP4BFqIIFkE02ChIiC8QDKlSiI3YqRBsBVGwUNAUdiIEUgjiAzQIIsuKJsfizsXr5t7d+8jmwLDfzHz3nLOzc7+ZxTZlGyDgZiWOCuJ9wH2gCUyuqQFgF/AGcKJNrYkBYBj40CIet+muGQi/96kM4WS7C/Tm5VUg7whJg8BkEGkCR4BDYfodsADUgP6wErO5iCtswsuJb32hdbXy8qzL5TIdmzJinHdZoZIBZcSFkGlAKs1Z3YCketZcBtouuaQNkrblMiBpBrhme7mAgU4wMCvpcFsDkq4C54DFVRTH9h+i6vlE0r5UA5ImgCuh28jB28iIs7BIVCOeStoZD64P4uPAjUTygKSx2FsK2TIwkugfk9Qkfd/E+yMWHQCeSRqx/R3gOp3LazfaS2C4B5gHDgD7U9x3E3uAH7KNpC3AHHAwTL4FHgM9GQ8vAaPA0dB/Abxqk2/gBLA9MXba9r1k/d4LfA3JtwueBeM58ucS+edXnAW23wP10N3advEi9CXizTnyN4bPS7Zn4sH/dq3t18AY4e1YLYSy3g/csj2VnFshZPuOpOeSKHCodUINuGj7YetE6je1PV9QoNPJ9StNHKodx7nRbiWrGHBGXAi5DUiqtQwtpcWK0Jubt8CltA5MEV1IfwO7+VffPwGfia5m34CT4bXujIIX0Qna1/cGMNqV/wUJE2czxD8CQ4X5Sl7Jz7SILwCDpbjKPBRMHAd+EtX4HWV5Spdc2w8kDQGPbH8py/MXMygM69/FKz4AAAAASUVORK5CYII="},zoom:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAK6wAACusBgosNWgAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAMqSURBVFiFvdfbj91TFMDxz57U6GUEMS1aYzyMtCSSDhWjCZMInpAI3khE/QHtgzdRkXgSCS8SES9epKLi0oRKNETjRahREq2KS1stdRujtDPtbA97n5zdn9+5zJxTK9k5v3POXmt991p7r71+IcaoGwkhTOIebMRqzOBTvIG3Y4zTXRmqSoyx5cAKbMJOHMFJnMZ8/jyFaXyMR7G6nb1aH22cP4BvcBxziG3GKfyTIR9D6BYg1KUghPBCDveFlb/24Av8iuUYw41YVsz5G7uxKcZ4aMEpwGt5NY3V/YbHsQ6rcAHOw/kYxigewr5CZw4fYGxBKcCLOFEYehXrMdRhr5yLETxVScsOLOkKAPfn1TYMPIvLFrShUlS2FDZm8XRHACzFAWl3R2xbqPMCYhmeLCAOYEMngAczbcTvuHYxzguIy/FesR9e6gSwU/OoPYHBHgHgviIKX2Flq7k34KhmcVnbi/PC8JX4MgMcxb118wZwdz5aISscqx7VRcox7MrPQ7i+btIAJrAkf9+bI9EPmZY2IAxiTSuAldLq4Y9+AcSUh78KP0tbAcwU35cXMD1JCIFUoGiehlqAz6TNB1f1C0DK+0h+nsNPrQC2a4bqGmlD9kOGcWt+Po6pVgDvSxfJaSkFd4UQBvoAsBYbCoB3a2flM7slA0R8iyt6rAFDeDPbm8eOTpVwGD9qVq7nLbIaZnmksPU1JtsCZMXNmpdRxFasWITzh6Xj3LCzra1OxcD2QjHiGVzdpfORnMqZio2PcF23ABdJF1Np4BPptlyPi6WzPYBzpJZtHe7A6xW9cnyP8TqA//SEIYRL8Bxul7rihvwgtVn78WcGGZXa9HGd5TDujDHuOePXNiHdKjWgZX/YbsxLx/ktqbjVzTlcjUSnvI5JrdlUVp6WesZZ6R1hRrpq9+EVTGS9jTjYAuKIouGpbcurEkIYxC051KNSamazsc+xK8b4S0VnEi/j0hqTP+M27O258egQwZuzs7pI7Mf4WQXIEDc5s9sux+5+1Py2EmP8UOq6GvWhIScxfdYjUERiAt9Jd84J6a16zf8JEKT3yCm8g1UxRv8CC4pyRhzR1uUAAAAASUVORK5CYII="},menu:{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAgCAYAAAAbifjMAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAK6wAACusBgosNWgAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAAWdEVYdENyZWF0aW9uIFRpbWUAMDcvMTUvMTTPsvU0AAAAP0lEQVRIie2SMQoAIBDDUvH/X667g8sJJ9KOhYYOkW0qGaU1MPdC0vGSbV19EACo3YMPAFH5BUBUjsqfAPpVXtNgGDfxEDCtAAAAAElFTkSuQmCC"}};k.prototype.setOptions=function(e,t){if(z[this._defaultsKey]){var i,n=z[this._defaultsKey];for(i in n)n.hasOwnProperty(i)&&(this[i]=e&&i in e?e[i]:t&&i in t?t[i]:n[i])}},k.prototype.updateOption=function(e){var t=z[this._defaultsKey],i=this._options.theme?this._options.theme:this.chart&&this.chart._options.theme?this.chart._options.theme:"theme1",n={},a=this[e];return i&&R[i]&&R[i][this._defaultsKey]&&(n=R[i][this._defaultsKey]),e in t&&(a=e in this._options?this._options[e]:n&&e in n?n[e]:t[e]),a===this[e]?!1:(this[e]=a,!0)},k.prototype.trackChanges=function(e){if(!this.sessionVariables)throw"Session Variable Store not set";this.sessionVariables[e]=this._options[e]},k.prototype.isBeingTracked=function(e){return this._options._oldOptions||(this._options._oldOptions={}),this._options._oldOptions[e]?!0:!1},k.prototype.hasOptionChanged=function(e){if(!this.sessionVariables)throw"Session Variable Store not set";return this.sessionVariables[e]!==this._options[e]},k.prototype.addEventListener=function(e,t,i){e&&t&&(this._eventListeners[e]=this._eventListeners[e]||[],this._eventListeners[e].push({context:i||this,eventHandler:t}))},k.prototype.removeEventListener=function(e,t){if(e&&t&&this._eventListeners[e])for(var i=this._eventListeners[e],n=0;n<i.length;n++)if(i[n].eventHandler===t){i[n].splice(n,1);break}},k.prototype.removeAllEventListeners=function(){this._eventListeners=[]},k.prototype.dispatchEvent=function(e,t,i){if(e&&this._eventListeners[e]){t=t||{};for(var n=this._eventListeners[e],a=0;a<n.length;a++)n[a].eventHandler.call(n[a].context,t)}"function"==typeof this[e]&&this[e].call(i||this.chart._publicChartReference,t)},e(T,k),T.prototype._updateOptions=function(){var e=this;if(this.updateOption("width"),this.updateOption("height"),this.updateOption("dataPointWidth"),this.updateOption("dataPointMinWidth"),this.updateOption("dataPointMaxWidth"),this.updateOption("interactivityEnabled"),this.updateOption("theme"),this.updateOption("colorSet")&&(this._selectedColorSet="undefined"!=typeof H[this.colorSet]?H[this.colorSet]:H.colorSet1),this.updateOption("backgroundColor"),this.backgroundColor||(this.backgroundColor="rgba(0,0,0,0)"),this.updateOption("culture"),this._cultureInfo=new N(this._options.culture),this.updateOption("animationEnabled"),this.animationEnabled=this.animationEnabled&&Y,this.updateOption("animationDuration"),this.updateOption("rangeChanging"),this.updateOption("rangeChanged"),this.updateOption("exportEnabled"),this.updateOption("exportFileName"),this.updateOption("zoomType"),this._options.zoomEnabled?(this._zoomButton||(w(this._zoomButton=document.createElement("button")),_(this,this._zoomButton,"pan"),this._toolBar.appendChild(this._zoomButton),f(this._zoomButton,"click",function(){e.zoomEnabled?(e.zoomEnabled=!1,e.panEnabled=!0,_(e,e._zoomButton,"zoom")):(e.zoomEnabled=!0,e.panEnabled=!1,_(e,e._zoomButton,"pan")),e.render()})),this._resetButton||(w(this._resetButton=document.createElement("button")),_(this,this._resetButton,"reset"),this._toolBar.appendChild(this._resetButton),f(this._resetButton,"click",function(){e._toolTip.hide(),e.zoomEnabled||e.panEnabled?(e.zoomEnabled=!0,e.panEnabled=!1,_(e,e._zoomButton,"pan"),e._defaultCursor="default",e.overlaidCanvas.style.cursor=e._defaultCursor):(e.zoomEnabled=!1,e.panEnabled=!1),e.sessionVariables.axisX&&(e.sessionVariables.axisX.newViewportMinimum=null,e.sessionVariables.axisX.newViewportMaximum=null),e.sessionVariables.axisY&&(e.sessionVariables.axisY.newViewportMinimum=null,e.sessionVariables.axisY.newViewportMaximum=null),e.sessionVariables.axisY2&&(e.sessionVariables.axisY2.newViewportMinimum=null,e.sessionVariables.axisY2.newViewportMaximum=null),e.resetOverlayedCanvas(),w(e._zoomButton,e._resetButton),e._dispatchRangeEvent("rangeChanging","reset"),e.render(),e._dispatchRangeEvent("rangeChanged","reset")}),this.overlaidCanvas.style.cursor=e._defaultCursor),this.zoomEnabled||this.panEnabled||(this._zoomButton?(e._zoomButton.getAttribute("state")===e._cultureInfo.zoomText?(this.panEnabled=!0,this.zoomEnabled=!1):(this.zoomEnabled=!0,this.panEnabled=!1),b(e._zoomButton,e._resetButton)):(this.zoomEnabled=!0,this.panEnabled=!1))):this.panEnabled=this.zoomEnabled=!1,this._menuButton?this.exportEnabled?b(this._menuButton):w(this._menuButton):this.exportEnabled&&Y&&(this._menuButton=document.createElement("button"),_(this,this._menuButton,"menu"),this._toolBar.appendChild(this._menuButton),f(this._menuButton,"click",function(){"none"!==e._dropdownMenu.style.display||e._dropDownCloseTime&&500>=(new Date).getTime()-e._dropDownCloseTime.getTime()||(e._dropdownMenu.style.display="block",e._menuButton.blur(),e._dropdownMenu.focus())},!0)),!this._dropdownMenu&&this.exportEnabled&&Y){this._dropdownMenu=document.createElement("div"),this._dropdownMenu.setAttribute("tabindex",-1),this._dropdownMenu.style.cssText="position: absolute; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; cursor: pointer;right: 1px;top: 25px;min-width: 120px;outline: 0;border: 1px solid silver;font-size: 14px;font-family: Calibri, Verdana, sans-serif;padding: 5px 0px 5px 0px;text-align: left;background-color: #fff;line-height: 20px;box-shadow: 2px 2px 10px #888888;",e._dropdownMenu.style.display="none",this._toolBar.appendChild(this._dropdownMenu),f(this._dropdownMenu,"blur",function(){w(e._dropdownMenu),e._dropDownCloseTime=new Date},!0);var t=document.createElement("div");t.style.cssText="padding: 2px 15px 2px 10px",t.innerHTML=this._cultureInfo.saveJPGText,this._dropdownMenu.appendChild(t),f(t,"mouseover",function(){this.style.backgroundColor="#EEEEEE"},!0),f(t,"mouseout",function(){this.style.backgroundColor="transparent"},!0),f(t,"click",function(){v(e.canvas,"jpeg",e.exportFileName),w(e._dropdownMenu)},!0),t=document.createElement("div"),t.style.cssText="padding: 2px 15px 2px 10px",t.innerHTML=this._cultureInfo.savePNGText,this._dropdownMenu.appendChild(t),f(t,"mouseover",function(){this.style.backgroundColor="#EEEEEE"},!0),f(t,"mouseout",function(){this.style.backgroundColor="transparent"},!0),f(t,"click",function(){v(e.canvas,"png",e.exportFileName),w(e._dropdownMenu)},!0)}if("none"!==this._toolBar.style.display&&this._zoomButton&&(this.panEnabled?_(e,e._zoomButton,"zoom"):_(e,e._zoomButton,"pan"),e._resetButton.getAttribute("state")!==e._cultureInfo.resetText&&_(e,e._resetButton,"reset")),"undefined"==typeof z.Chart.creditHref)this.creditHref="http://canvasjs.com/",this.creditText="CanvasJS.com";else var i=this.updateOption("creditText"),n=this.updateOption("creditHref");(0===this.renderCount||i||n)&&(this._creditLink.setAttribute("href",this.creditHref),this._creditLink.innerHTML=this.creditText),this.creditHref&&this.creditText?this._creditLink.parentElement||this._canvasJSContainer.appendChild(this._creditLink):this._creditLink.parentElement&&this._canvasJSContainer.removeChild(this._creditLink),this._options.toolTip&&this._toolTip._options!==this._options.toolTip&&(this._toolTip._options=this._options.toolTip);for(var a in this._toolTip._options)this._toolTip._options.hasOwnProperty(a)&&this._toolTip.updateOption(a)},T.prototype._updateSize=function(){var e=0,t=0;return this._options.width?e=this.width:this.width=e=0<this._container.clientWidth?this._container.clientWidth:this.width,this._options.height?t=this.height:this.height=t=0<this._container.clientHeight?this._container.clientHeight:this.height,this.canvas.width!==e*ee||this.canvas.height!==t*ee?(x(this.canvas,e,t),x(this.overlaidCanvas,e,t),x(this._eventManager.ghostCanvas,e,t),!0):!1},T.prototype._initialize=function(){this._animator?this._animator.cancelAllAnimations():this._animator=new W(this),this.removeAllEventListeners(),this.disableToolTip=!1,this._axes=[],this.pieDoughnutClickHandler=null,this.animationRequestId&&this.cancelRequestAnimFrame.call(window,this.animationRequestId),this._updateOptions(),this.animatedRender=Y&&this.animationEnabled&&0===this.renderCount,this._updateSize(),this.clearCanvas(),this.ctx.beginPath(),this.axisY2=this.axisY=this.axisX=null,this._indexLabels=[],this._dataInRenderedOrder=[],this._events=[],this._eventManager&&this._eventManager.reset(),this.plotInfo={axisPlacement:null,axisXValueType:null,plotTypes:[]},this.layoutManager=new S(0,0,this.width,this.height,2),this.plotArea.layoutManager&&this.plotArea.layoutManager.reset(),this.data=[];for(var e=0,t=0;t<this._options.data.length;t++)if(e++,!this._options.data[t].type||0<=T._supportedChartTypes.indexOf(this._options.data[t].type)){var i=new I(this,this._options.data[t],this.theme,e-1,++this._eventManager.lastObjectId);null===i.name&&(i.name="DataSeries "+e),null===i.color?1<this._options.data.length?(i._colorSet=[this._selectedColorSet[i.index%this._selectedColorSet.length]],i.color=this._selectedColorSet[i.index%this._selectedColorSet.length]):i._colorSet="line"===i.type||"stepLine"===i.type||"spline"===i.type||"area"===i.type||"stepArea"===i.type||"splineArea"===i.type||"stackedArea"===i.type||"stackedArea100"===i.type||"rangeArea"===i.type||"rangeSplineArea"===i.type||"candlestick"===i.type||"ohlc"===i.type?[this._selectedColorSet[0]]:this._selectedColorSet:i._colorSet=[i.color],null===i.markerSize&&(("line"===i.type||"stepLine"===i.type||"spline"===i.type)&&i.dataPoints&&i.dataPoints.length<this.width/16||"scatter"===i.type)&&(i.markerSize=8),"bubble"!==i.type&&"scatter"!==i.type||!i.dataPoints||(i.dataPoints.some?i.dataPoints.some(function(e){return e.x})&&i.dataPoints.sort(l):i.dataPoints.sort(l)),this.data.push(i);var n,a=i.axisPlacement;if("normal"===a?"xySwapped"===this.plotInfo.axisPlacement?n='You cannot combine "'+i.type+'" with bar chart':"none"===this.plotInfo.axisPlacement?n='You cannot combine "'+i.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="normal"):"xySwapped"===a?"normal"===this.plotInfo.axisPlacement?n='You cannot combine "'+i.type+'" with line, area, column or pie chart':"none"===this.plotInfo.axisPlacement?n='You cannot combine "'+i.type+'" with pie chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="xySwapped"):"none"==a&&("normal"===this.plotInfo.axisPlacement?n='You cannot combine "'+i.type+'" with line, area, column or bar chart':"xySwapped"===this.plotInfo.axisPlacement?n='You cannot combine "'+i.type+'" with bar chart':null===this.plotInfo.axisPlacement&&(this.plotInfo.axisPlacement="none")),n&&window.console)return void window.console.log(n)}this._objectsInitialized=!0},T._supportedChartTypes=function(e){return e.indexOf||(e.indexOf=h),e}("line stepLine spline column area stepArea splineArea bar bubble scatter stackedColumn stackedColumn100 stackedBar stackedBar100 stackedArea stackedArea100 candlestick ohlc rangeColumn rangeBar rangeArea rangeSplineArea pie doughnut funnel".split(" ")),T.prototype.render=function(e){e&&(this._options=e),this._initialize();var t=[];for(e=0;e<this.data.length;e++)("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)&&(this.data[e].axisYType&&"primary"!==this.data[e].axisYType?"secondary"===this.data[e].axisYType&&(this.axisY2||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisY2=new F(this,this._options.axisY2,"axisY","right")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisY2=new F(this,this._options.axisY2,"axisY","top"))),
this.data[e].axisY=this.axisY2):(this.axisY||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisY=new F(this,this._options.axisY,"axisY","left")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisY=new F(this,this._options.axisY,"axisY","bottom"))),this.data[e].axisY=this.axisY),this.axisX||("normal"===this.plotInfo.axisPlacement?this._axes.push(this.axisX=new F(this,this._options.axisX,"axisX","bottom")):"xySwapped"===this.plotInfo.axisPlacement&&this._axes.push(this.axisX=new F(this,this._options.axisX,"axisX","left"))),this.data[e].axisX=this.axisX);this.axisY&&this.axisY2&&(0<this.axisY.gridThickness&&"undefined"==typeof this.axisY2._options.gridThickness?this.axisY2.gridThickness=0:0<this.axisY2.gridThickness&&"undefined"==typeof this.axisY._options.gridThickness&&(this.axisY.gridThickness=0));var i=!1;if(0<this._axes.length&&(this.zoomEnabled||this.panEnabled))for(e=0;e<this._axes.length;e++)if(null!==this._axes[e].viewportMinimum||null!==this._axes[e].viewportMaximum){i=!0;break}if(i?b(this._zoomButton,this._resetButton):(w(this._zoomButton,this._resetButton),this._options.zoomEnabled&&(this.zoomEnabled=!0,this.panEnabled=!1)),this._processData(),this._options.title&&(this._title=new A(this,this._options.title),this._title.dockInsidePlotArea?t.push(this._title):this._title.render()),this._options.subtitles)for(e=0;e<this._options.subtitles.length;e++)this.subtitles=[],i=new j(this,this._options.subtitles[e]),this.subtitles.push(i),i.dockInsidePlotArea?t.push(i):i.render();for(this.legend=new D(this,this._options.legend,this.theme),e=0;e<this.data.length;e++)(this.data[e].showInLegend||"pie"===this.data[e].type||"doughnut"===this.data[e].type)&&this.legend.dataSeries.push(this.data[e]);if(this.legend.dockInsidePlotArea?t.push(this.legend):this.legend.render(),"normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)F.setLayoutAndRender(this.axisX,this.axisY,this.axisY2,this.plotInfo.axisPlacement,this.layoutManager.getFreeSpace());else{if("none"!==this.plotInfo.axisPlacement)return;this.preparePlotArea()}for(e=0;e<t.length;e++)t[e].render();var n=[];if(this.animatedRender){var a=y(this.width,this.height);a.getContext("2d").drawImage(this.canvas,0,0,this.width,this.height)}for(e=0;e<this.plotInfo.plotTypes.length;e++)for(t=this.plotInfo.plotTypes[e],i=0;i<t.plotUnits.length;i++){var r=t.plotUnits[i],s=null;r.targetCanvas=null,this.animatedRender&&(r.targetCanvas=y(this.width,this.height),r.targetCanvasCtx=r.targetCanvas.getContext("2d")),"line"===r.type?s=this.renderLine(r):"stepLine"===r.type?s=this.renderStepLine(r):"spline"===r.type?s=this.renderSpline(r):"column"===r.type?s=this.renderColumn(r):"bar"===r.type?s=this.renderBar(r):"area"===r.type?s=this.renderArea(r):"stepArea"===r.type?s=this.renderStepArea(r):"splineArea"===r.type?s=this.renderSplineArea(r):"stackedColumn"===r.type?s=this.renderStackedColumn(r):"stackedColumn100"===r.type?s=this.renderStackedColumn100(r):"stackedBar"===r.type?s=this.renderStackedBar(r):"stackedBar100"===r.type?s=this.renderStackedBar100(r):"stackedArea"===r.type?s=this.renderStackedArea(r):"stackedArea100"===r.type?s=this.renderStackedArea100(r):"bubble"===r.type?s=s=this.renderBubble(r):"scatter"===r.type?s=this.renderScatter(r):"pie"===r.type?this.renderPie(r):"doughnut"===r.type?this.renderPie(r):"candlestick"===r.type?s=this.renderCandlestick(r):"ohlc"===r.type?s=this.renderCandlestick(r):"rangeColumn"===r.type?s=this.renderRangeColumn(r):"rangeBar"===r.type?s=this.renderRangeBar(r):"rangeArea"===r.type?s=this.renderRangeArea(r):"rangeSplineArea"===r.type&&(s=this.renderRangeSplineArea(r));for(var o=0;o<r.dataSeriesIndexes.length;o++)this._dataInRenderedOrder.push(this.data[r.dataSeriesIndexes[o]]);this.animatedRender&&s&&n.push(s)}this.animatedRender&&0<this._indexLabels.length&&(e=y(this.width,this.height).getContext("2d"),n.push(this.renderIndexLabels(e)));var l=this;0<n.length?(l.disableToolTip=!0,l._animator.animate(200,l.animationDuration,function(e){l.ctx.clearRect(0,0,l.width,l.height),l.ctx.drawImage(a,0,0,Math.floor(l.width*ee),Math.floor(l.height*ee),0,0,l.width,l.height);for(var t=0;t<n.length;t++)s=n[t],1>e&&"undefined"!=typeof s.startTimePercent?e>=s.startTimePercent&&s.animationCallback(s.easingFunction(e-s.startTimePercent,0,1,1-s.startTimePercent),s):s.animationCallback(s.easingFunction(e,0,1,1),s);l.dispatchEvent("dataAnimationIterationEnd",{chart:l})},function(){n=[];for(var e=0;e<l.plotInfo.plotTypes.length;e++)for(var t=l.plotInfo.plotTypes[e],i=0;i<t.plotUnits.length;i++)t.plotUnits[i].targetCanvas=null;a=null,l.disableToolTip=!1})):(0<l._indexLabels.length&&l.renderIndexLabels(),l.dispatchEvent("dataAnimationIterationEnd",{chart:l})),this.attachPlotAreaEventHandlers(),this.zoomEnabled||this.panEnabled||!this._zoomButton||"none"===this._zoomButton.style.display||w(this._zoomButton,this._resetButton),this._toolTip._updateToolTip(),this.renderCount++},T.prototype.attachPlotAreaEventHandlers=function(){this.attachEvent({context:this,chart:this,mousedown:this._plotAreaMouseDown,mouseup:this._plotAreaMouseUp,mousemove:this._plotAreaMouseMove,cursor:this.zoomEnabled?"col-resize":"move",cursor:this.panEnabled?"move":"default",capture:!0,bounds:this.plotArea})},T.prototype.categoriseDataSeries=function(){for(var e="",t=0;t<this.data.length;t++)if(e=this.data[t],e.dataPoints&&0!==e.dataPoints.length&&e.visible&&0<=T._supportedChartTypes.indexOf(e.type)){for(var i=null,n=!1,a=null,r=!1,s=0;s<this.plotInfo.plotTypes.length;s++)if(this.plotInfo.plotTypes[s].type===e.type){n=!0,i=this.plotInfo.plotTypes[s];break}for(n||(i={type:e.type,totalDataSeries:0,plotUnits:[]},this.plotInfo.plotTypes.push(i)),s=0;s<i.plotUnits.length;s++)if(i.plotUnits[s].axisYType===e.axisYType){r=!0,a=i.plotUnits[s];break}r||(a={type:e.type,previousDataSeriesCount:0,index:i.plotUnits.length,plotType:i,axisYType:e.axisYType,axisY:"primary"===e.axisYType?this.axisY:this.axisY2,axisX:this.axisX,dataSeriesIndexes:[],yTotals:[]},i.plotUnits.push(a)),i.totalDataSeries++,a.dataSeriesIndexes.push(t),e.plotUnit=a}for(t=0;t<this.plotInfo.plotTypes.length;t++)for(i=this.plotInfo.plotTypes[t],s=e=0;s<i.plotUnits.length;s++)i.plotUnits[s].previousDataSeriesCount=e,e+=i.plotUnits[s].dataSeriesIndexes.length},T.prototype.assignIdToDataPoints=function(){for(var e=0;e<this.data.length;e++){var t=this.data[e];if(t.dataPoints)for(var i=t.dataPoints.length,n=0;i>n;n++)t.dataPointIds[n]=++this._eventManager.lastObjectId}},T.prototype._processData=function(){this.assignIdToDataPoints(),this.categoriseDataSeries();for(var e=0;e<this.plotInfo.plotTypes.length;e++)for(var t=this.plotInfo.plotTypes[e],i=0;i<t.plotUnits.length;i++){var n=t.plotUnits[i];"line"===n.type||"stepLine"===n.type||"spline"===n.type||"column"===n.type||"area"===n.type||"stepArea"===n.type||"splineArea"===n.type||"bar"===n.type||"bubble"===n.type||"scatter"===n.type?this._processMultiseriesPlotUnit(n):"stackedColumn"===n.type||"stackedBar"===n.type||"stackedArea"===n.type?this._processStackedPlotUnit(n):"stackedColumn100"===n.type||"stackedBar100"===n.type||"stackedArea100"===n.type?this._processStacked100PlotUnit(n):"candlestick"!==n.type&&"ohlc"!==n.type&&"rangeColumn"!==n.type&&"rangeBar"!==n.type&&"rangeArea"!==n.type&&"rangeSplineArea"!==n.type||this._processMultiYPlotUnit(n)}},T.prototype._processMultiseriesPlotUnit=function(e){if(e.dataSeriesIndexes&&!(1>e.dataSeriesIndexes.length))for(var t,i,n=e.axisY.dataInfo,a=e.axisX.dataInfo,r=!1,s=0;s<e.dataSeriesIndexes.length;s++){var o=this.data[e.dataSeriesIndexes[s]],l=0,d=!1,h=!1;if("normal"===o.axisPlacement||"xySwapped"===o.axisPlacement)var c=this.sessionVariables.axisX.newViewportMinimum?this.sessionVariables.axisX.newViewportMinimum:this._options.axisX&&this._options.axisX.viewportMinimum?this._options.axisX.viewportMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-(1/0),u=this.sessionVariables.axisX.newViewportMaximum?this.sessionVariables.axisX.newViewportMaximum:this._options.axisX&&this._options.axisX.viewportMaximum?this._options.axisX.viewportMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0;for((o.dataPoints[l].x&&o.dataPoints[l].x.getTime||"dateTime"===o.xValueType)&&(r=!0),l=0;l<o.dataPoints.length;l++){if("undefined"==typeof o.dataPoints[l].x&&(o.dataPoints[l].x=l),o.dataPoints[l].x.getTime?(r=!0,t=o.dataPoints[l].x.getTime()):t=o.dataPoints[l].x,i=o.dataPoints[l].y,t<a.min&&(a.min=t),t>a.max&&(a.max=t),i<n.min&&(n.min=i),i>n.max&&(n.max=i),l>0){var p=t-o.dataPoints[l-1].x;0>p&&(p*=-1),a.minDiff>p&&0!==p&&(a.minDiff=p),null!==i&&null!==o.dataPoints[l-1].y&&(p=i-o.dataPoints[l-1].y,0>p&&(p*=-1),n.minDiff>p&&0!==p&&(n.minDiff=p))}if(!(c>t)||d){if(!d&&(d=!0,l>0)){l-=2;continue}if(t>u&&!h)h=!0;else if(t>u&&h)continue;o.dataPoints[l].label&&(e.axisX.labels[t]=o.dataPoints[l].label),t<a.viewPortMin&&(a.viewPortMin=t),t>a.viewPortMax&&(a.viewPortMax=t),null!==i&&(i<n.viewPortMin&&(n.viewPortMin=i),i>n.viewPortMax&&(n.viewPortMax=i))}}this.plotInfo.axisXValueType=o.xValueType=r?"dateTime":"number"}},T.prototype._processStackedPlotUnit=function(e){if(e.dataSeriesIndexes&&!(1>e.dataSeriesIndexes.length)){for(var t,i,n=e.axisY.dataInfo,a=e.axisX.dataInfo,r=!1,s=[],o=[],l=1/0,d=0;d<e.dataSeriesIndexes.length;d++){var h=this.data[e.dataSeriesIndexes[d]],u=0,p=!1,f=!1;if("normal"===h.axisPlacement||"xySwapped"===h.axisPlacement)var m=this.sessionVariables.axisX.newViewportMinimum?this.sessionVariables.axisX.newViewportMinimum:this._options.axisX&&this._options.axisX.viewportMinimum?this._options.axisX.viewportMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-(1/0),g=this.sessionVariables.axisX.newViewportMaximum?this.sessionVariables.axisX.newViewportMaximum:this._options.axisX&&this._options.axisX.viewportMaximum?this._options.axisX.viewportMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0;for((h.dataPoints[u].x&&h.dataPoints[u].x.getTime||"dateTime"===h.xValueType)&&(r=!0),u=0;u<h.dataPoints.length;u++){if("undefined"==typeof h.dataPoints[u].x&&(h.dataPoints[u].x=u),h.dataPoints[u].x.getTime?(r=!0,t=h.dataPoints[u].x.getTime()):t=h.dataPoints[u].x,c(h.dataPoints[u].y)?i=0:(i=h.dataPoints[u].y,0===d&&(l=Math.min(i,l))),t<a.min&&(a.min=t),t>a.max&&(a.max=t),u>0){var x=t-h.dataPoints[u-1].x;0>x&&(x*=-1),a.minDiff>x&&0!==x&&(a.minDiff=x),null!==i&&null!==h.dataPoints[u-1].y&&(x=i-h.dataPoints[u-1].y,0>x&&(x*=-1),n.minDiff>x&&0!==x&&(n.minDiff=x))}if(!(m>t)||p){if(!p&&(p=!0,u>0)){u-=2;continue}if(t>g&&!f)f=!0;else if(t>g&&f)continue;h.dataPoints[u].label&&(e.axisX.labels[t]=h.dataPoints[u].label),t<a.viewPortMin&&(a.viewPortMin=t),t>a.viewPortMax&&(a.viewPortMax=t),null!==i&&(e.yTotals[t]=(e.yTotals[t]?e.yTotals[t]:0)+Math.abs(i),i>=0?s[t]=s[t]?s[t]+i:i:o[t]=o[t]?o[t]+i:i)}}this.plotInfo.axisXValueType=h.xValueType=r?"dateTime":"number"}for(u in s)s.hasOwnProperty(u)&&!isNaN(u)&&(e=s[u],e<n.min&&(n.min=Math.min(e,l)),e>n.max&&(n.max=e),u<a.viewPortMin||u>a.viewPortMax||(e<n.viewPortMin&&(n.viewPortMin=Math.min(e,l)),e>n.viewPortMax&&(n.viewPortMax=e)));for(u in o)o.hasOwnProperty(u)&&!isNaN(u)&&(e=o[u],e<n.min&&(n.min=Math.min(e,l)),e>n.max&&(n.max=e),u<a.viewPortMin||u>a.viewPortMax||(e<n.viewPortMin&&(n.viewPortMin=Math.min(e,l)),e>n.viewPortMax&&(n.viewPortMax=e)))}},T.prototype._processStacked100PlotUnit=function(e){if(e.dataSeriesIndexes&&!(1>e.dataSeriesIndexes.length)){for(var t,i,n=e.axisY.dataInfo,a=e.axisX.dataInfo,r=!1,s=!1,o=!1,l=[],d=0;d<e.dataSeriesIndexes.length;d++){var h=this.data[e.dataSeriesIndexes[d]],u=0,p=!1,f=!1;if("normal"===h.axisPlacement||"xySwapped"===h.axisPlacement)var m=this.sessionVariables.axisX.newViewportMinimum?this.sessionVariables.axisX.newViewportMinimum:this._options.axisX&&this._options.axisX.viewportMinimum?this._options.axisX.viewportMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-(1/0),g=this.sessionVariables.axisX.newViewportMaximum?this.sessionVariables.axisX.newViewportMaximum:this._options.axisX&&this._options.axisX.viewportMaximum?this._options.axisX.viewportMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0;for((h.dataPoints[u].x&&h.dataPoints[u].x.getTime||"dateTime"===h.xValueType)&&(r=!0),u=0;u<h.dataPoints.length;u++){if("undefined"==typeof h.dataPoints[u].x&&(h.dataPoints[u].x=u),h.dataPoints[u].x.getTime?(r=!0,t=h.dataPoints[u].x.getTime()):t=h.dataPoints[u].x,i=c(h.dataPoints[u].y)?null:h.dataPoints[u].y,t<a.min&&(a.min=t),t>a.max&&(a.max=t),u>0){var x=t-h.dataPoints[u-1].x;0>x&&(x*=-1),a.minDiff>x&&0!==x&&(a.minDiff=x),c(i)||null===h.dataPoints[u-1].y||(x=i-h.dataPoints[u-1].y,0>x&&(x*=-1),n.minDiff>x&&0!==x&&(n.minDiff=x))}if(!(m>t)||p){if(!p&&(p=!0,u>0)){u-=2;continue}if(t>g&&!f)f=!0;else if(t>g&&f)continue;h.dataPoints[u].label&&(e.axisX.labels[t]=h.dataPoints[u].label),t<a.viewPortMin&&(a.viewPortMin=t),t>a.viewPortMax&&(a.viewPortMax=t),null!==i&&(e.yTotals[t]=(e.yTotals[t]?e.yTotals[t]:0)+Math.abs(i),i>=0?s=!0:0>i&&(o=!0),l[t]=l[t]?l[t]+Math.abs(i):Math.abs(i))}}this.plotInfo.axisXValueType=h.xValueType=r?"dateTime":"number"}s&&!o?(n.max=c(n.viewPortMax)?99:Math.max(n.viewPortMax,99),n.min=c(n.viewPortMin)?1:Math.min(n.viewPortMin,1)):s&&o?(n.max=c(n.viewPortMax)?99:Math.max(n.viewPortMax,99),n.min=c(n.viewPortMin)?-99:Math.min(n.viewPortMin,-99)):!s&&o&&(n.max=c(n.viewPortMax)?-1:Math.max(n.viewPortMax,-1),n.min=c(n.viewPortMin)?-99:Math.min(n.viewPortMin,-99)),n.viewPortMin=n.min,n.viewPortMax=n.max,e.dataPointYSums=l}},T.prototype._processMultiYPlotUnit=function(e){if(e.dataSeriesIndexes&&!(1>e.dataSeriesIndexes.length))for(var t,i,n,a,r=e.axisY.dataInfo,s=e.axisX.dataInfo,o=!1,l=0;l<e.dataSeriesIndexes.length;l++){var d=this.data[e.dataSeriesIndexes[l]],h=0,c=!1,u=!1;if("normal"===d.axisPlacement||"xySwapped"===d.axisPlacement)var p=this.sessionVariables.axisX.newViewportMinimum?this.sessionVariables.axisX.newViewportMinimum:this._options.axisX&&this._options.axisX.viewportMinimum?this._options.axisX.viewportMinimum:this._options.axisX&&this._options.axisX.minimum?this._options.axisX.minimum:-(1/0),f=this.sessionVariables.axisX.newViewportMaximum?this.sessionVariables.axisX.newViewportMaximum:this._options.axisX&&this._options.axisX.viewportMaximum?this._options.axisX.viewportMaximum:this._options.axisX&&this._options.axisX.maximum?this._options.axisX.maximum:1/0;for((d.dataPoints[h].x&&d.dataPoints[h].x.getTime||"dateTime"===d.xValueType)&&(o=!0),h=0;h<d.dataPoints.length;h++){if("undefined"==typeof d.dataPoints[h].x&&(d.dataPoints[h].x=h),d.dataPoints[h].x.getTime?(o=!0,t=d.dataPoints[h].x.getTime()):t=d.dataPoints[h].x,(i=d.dataPoints[h].y)&&i.length&&(n=Math.min.apply(null,i),a=Math.max.apply(null,i)),t<s.min&&(s.min=t),t>s.max&&(s.max=t),n<r.min&&(r.min=n),a>r.max&&(r.max=a),h>0){var m=t-d.dataPoints[h-1].x;0>m&&(m*=-1),s.minDiff>m&&0!==m&&(s.minDiff=m),null!==i[0]&&null!==d.dataPoints[h-1].y[0]&&(m=i[0]-d.dataPoints[h-1].y[0],0>m&&(m*=-1),r.minDiff>m&&0!==m&&(r.minDiff=m))}if(!(p>t)||c){if(!c&&(c=!0,h>0)){h-=2;continue}if(t>f&&!u)u=!0;else if(t>f&&u)continue;d.dataPoints[h].label&&(e.axisX.labels[t]=d.dataPoints[h].label),t<s.viewPortMin&&(s.viewPortMin=t),t>s.viewPortMax&&(s.viewPortMax=t),null!==i&&(n<r.viewPortMin&&(r.viewPortMin=n),a>r.viewPortMax&&(r.viewPortMax=a))}}this.plotInfo.axisXValueType=d.xValueType=o?"dateTime":"number"}},T.prototype.getDataPointAtXY=function(e,t,i){i=i||!1;for(var n=[],a=this._dataInRenderedOrder.length-1;a>=0;a--){var r=null;(r=this._dataInRenderedOrder[a].getDataPointAtXY(e,t,i))&&n.push(r)}for(e=null,t=!1,i=0;i<n.length;i++)if(("line"===n[i].dataSeries.type||"stepLine"===n[i].dataSeries.type||"area"===n[i].dataSeries.type||"stepArea"===n[i].dataSeries.type)&&(a=g("markerSize",n[i].dataPoint,n[i].dataSeries)||8,n[i].distance<=a/2)){t=!0;break}for(i=0;i<n.length;i++)t&&"line"!==n[i].dataSeries.type&&"stepLine"!==n[i].dataSeries.type&&"area"!==n[i].dataSeries.type&&"stepArea"!==n[i].dataSeries.type||(e?n[i].distance<=e.distance&&(e=n[i]):e=n[i]);return e},T.prototype.getObjectAtXY=function(e,t,i){var n=null;if(i=this.getDataPointAtXY(e,t,i||!1))n=i.dataSeries.dataPointIds[i.dataPointIndex];else if(Y)n=m(e,t,this._eventManager.ghostCtx);else for(i=0;i<this.legend.items.length;i++){var a=this.legend.items[i];e>=a.x1&&e<=a.x2&&t>=a.y1&&t<=a.y2&&(n=a.id)}return n},T.prototype.getAutoFontSize=function(e,t,i){return e/=400,Math.round(Math.min(this.width,this.height)*e)},T.prototype.resetOverlayedCanvas=function(){this.overlaidCanvasCtx.clearRect(0,0,this.width,this.height)},T.prototype.clearCanvas=function(){this.ctx.clearRect(0,0,this.width,this.height),this.backgroundColor&&(this.ctx.fillStyle=this.backgroundColor,this.ctx.fillRect(0,0,this.width,this.height))},T.prototype.attachEvent=function(e){this._events.push(e)},T.prototype._touchEventHandler=function(e){if(e.changedTouches&&this.interactivityEnabled){var t=[],i=e.changedTouches,n=i?i[0]:e,a=null;switch(e.type){case"touchstart":case"MSPointerDown":t=["mousemove","mousedown"],this._lastTouchData=K(n),this._lastTouchData.time=new Date;break;case"touchmove":case"MSPointerMove":t=["mousemove"];break;case"touchend":case"MSPointerUp":t="touchstart"===this._lastTouchEventType||"MSPointerDown"===this._lastTouchEventType?["mouseup","click"]:["mouseup"];break;default:return}if(!(i&&1<i.length)){a=K(n),a.time=new Date;try{var r=a.y-this._lastTouchData.y,s=a.time-this._lastTouchData.time;if(15<Math.abs(r)&&(this._lastTouchData.scroll||200>s)){this._lastTouchData.scroll=!0;var o=window.parent||window;o&&o.scrollBy&&o.scrollBy(0,-r)}}catch(l){}if(this._lastTouchEventType=e.type,this._lastTouchData.scroll&&this.zoomEnabled)this.isDrag&&this.resetOverlayedCanvas(),this.isDrag=!1;else for(i=0;i<t.length;i++)a=t[i],r=document.createEvent("MouseEvent"),r.initMouseEvent(a,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(r),e.preventManipulation&&e.preventManipulation(),e.preventDefault&&e.preventDefault()}}},T.prototype._dispatchRangeEvent=function(e,t){var i={};i.chart=this._publicChartReference,i.type=e,i.trigger=t;var n=[];this.axisX&&n.push("axisX"),this.axisY&&n.push("axisY"),this.axisY2&&n.push("axisY2");for(var a=0;a<n.length;a++)i[n[a]]={viewportMinimum:this[n[a]].sessionVariables.newViewportMinimum,viewportMaximum:this[n[a]].sessionVariables.newViewportMaximum};this.dispatchEvent(e,i,this._publicChartReference)},T.prototype._mouseEventHandler=function(e){if(this.interactivityEnabled)if(this._ignoreNextEvent)this._ignoreNextEvent=!1;else{e.preventManipulation&&e.preventManipulation(),e.preventDefault&&e.preventDefault(),"undefined"==typeof e.target&&e.srcElement&&(e.target=e.srcElement);var t,i,n=K(e),a=e.type;if(e.which?i=3==e.which:e.button&&(i=2==e.button),!i){if(T.capturedEventParam)t=T.capturedEventParam,"mouseup"===a&&(T.capturedEventParam=null,t.chart.overlaidCanvas.releaseCapture?t.chart.overlaidCanvas.releaseCapture():document.body.removeEventListener("mouseup",t.chart._mouseEventHandler,!1)),t.hasOwnProperty(a)&&t[a].call(t.context,n.x,n.y);else if(this._events){for(i=0;i<this._events.length;i++)if(this._events[i].hasOwnProperty(a)){t=this._events[i];var r=t.bounds;if(n.x>=r.x1&&n.x<=r.x2&&n.y>=r.y1&&n.y<=r.y2){t[a].call(t.context,n.x,n.y),"mousedown"===a&&!0===t.capture?(T.capturedEventParam=t,this.overlaidCanvas.setCapture?this.overlaidCanvas.setCapture():document.body.addEventListener("mouseup",this._mouseEventHandler,!1)):"mouseup"===a&&(t.chart.overlaidCanvas.releaseCapture?t.chart.overlaidCanvas.releaseCapture():document.body.removeEventListener("mouseup",this._mouseEventHandler,!1));break}t=null}e.target.style.cursor=t&&t.cursor?t.cursor:this._defaultCursor}this._toolTip&&this._toolTip.enabled&&(a=this.plotArea,(n.x<a.x1||n.x>a.x2||n.y<a.y1||n.y>a.y2)&&this._toolTip.hide()),this.isDrag&&this.zoomEnabled||!this._eventManager||this._eventManager.mouseEventHandler(e)}}},T.prototype._plotAreaMouseDown=function(e,t){this.isDrag=!0,this.dragStartPoint={x:e,y:t}},T.prototype._plotAreaMouseUp=function(e,t){if(("normal"===this.plotInfo.axisPlacement||"xySwapped"===this.plotInfo.axisPlacement)&&this.isDrag){var i=t-this.dragStartPoint.y,n=e-this.dragStartPoint.x,a=0<=this.zoomType.indexOf("x"),r=0<=this.zoomType.indexOf("y"),s=!1;if(this.resetOverlayedCanvas(),"xySwapped"===this.plotInfo.axisPlacement)var o=r,r=a,a=o;if(this.panEnabled||this.zoomEnabled){if(this.panEnabled)for(a=r=0;a<this._axes.length;a++)i=this._axes[a],i.viewportMinimum<i.minimum?(r=i.minimum-i.viewportMinimum,i.sessionVariables.newViewportMinimum=i.viewportMinimum+r,i.sessionVariables.newViewportMaximum=i.viewportMaximum+r,s=!0):i.viewportMaximum>i.maximum&&(r=i.viewportMaximum-i.maximum,i.sessionVariables.newViewportMinimum=i.viewportMinimum-r,i.sessionVariables.newViewportMaximum=i.viewportMaximum-r,s=!0);else if((!a||2<Math.abs(n))&&(!r||2<Math.abs(i))&&this.zoomEnabled){if(!this.dragStartPoint)return;i=a?this.dragStartPoint.x:this.plotArea.x1,n=r?this.dragStartPoint.y:this.plotArea.y1,a=a?e:this.plotArea.x2,r=r?t:this.plotArea.y2,2<Math.abs(i-a)&&2<Math.abs(n-r)&&this._zoomPanToSelectedRegion(i,n,a,r)&&(s=!0)}s&&(this._ignoreNextEvent=!0,this._dispatchRangeEvent("rangeChanging","zoom"),this.render(),this._dispatchRangeEvent("rangeChanged","zoom"),s&&this.zoomEnabled&&"none"===this._zoomButton.style.display&&(b(this._zoomButton,this._resetButton),_(this,this._zoomButton,"pan"),_(this,this._resetButton,"reset")))}}this.isDrag=!1},T.prototype._plotAreaMouseMove=function(e,t){if(this.isDrag&&"none"!==this.plotInfo.axisPlacement){var i=0,n=0,a=i=null,a=0<=this.zoomType.indexOf("x"),r=0<=this.zoomType.indexOf("y");"xySwapped"===this.plotInfo.axisPlacement&&(i=r,r=a,a=i),i=this.dragStartPoint.x-e,n=this.dragStartPoint.y-t,2<Math.abs(i)&&8>Math.abs(i)&&(this.panEnabled||this.zoomEnabled)?this._toolTip.hide():this.panEnabled||this.zoomEnabled||this._toolTip.mouseMoveHandler(e,t),(!a||2<Math.abs(i)||!r||2<Math.abs(n))&&(this.panEnabled||this.zoomEnabled)&&(this.panEnabled?(a={x1:a?this.plotArea.x1+i:this.plotArea.x1,y1:r?this.plotArea.y1+n:this.plotArea.y1,x2:a?this.plotArea.x2+i:this.plotArea.x2,y2:r?this.plotArea.y2+n:this.plotArea.y2},this._zoomPanToSelectedRegion(a.x1,a.y1,a.x2,a.y2,!0)&&(this._dispatchRangeEvent("rangeChanging","pan"),this.render(),this._dispatchRangeEvent("rangeChanged","pan"),this.dragStartPoint.x=e,this.dragStartPoint.y=t)):this.zoomEnabled&&(this.resetOverlayedCanvas(),i=this.overlaidCanvasCtx.globalAlpha,this.overlaidCanvasCtx.globalAlpha=.7,this.overlaidCanvasCtx.fillStyle="#A0ABB8",this.overlaidCanvasCtx.fillRect(a?this.dragStartPoint.x:this.plotArea.x1,r?this.dragStartPoint.y:this.plotArea.y1,a?e-this.dragStartPoint.x:this.plotArea.x2-this.plotArea.x1,r?t-this.dragStartPoint.y:this.plotArea.y2-this.plotArea.y1),this.overlaidCanvasCtx.globalAlpha=i))}else this._toolTip.mouseMoveHandler(e,t)},T.prototype._zoomPanToSelectedRegion=function(e,t,i,n,a){a=a||!1;var r=0<=this.zoomType.indexOf("x"),s=0<=this.zoomType.indexOf("y"),o=!1,l=[],d=[];for(this.axisX&&r&&l.push(this.axisX),this.axisY&&s&&l.push(this.axisY),this.axisY2&&s&&l.push(this.axisY2),r=[],s=0;s<l.length;s++){var h=l[s],c=h.convertPixelToValue({x:e,y:t}),u=h.convertPixelToValue({x:i,y:n});if(c>u)var p=u,u=c,c=p;if(isFinite(h.dataInfo.minDiff))if(Math.abs(u-c)<3*Math.abs(h.dataInfo.minDiff)||c<h.minimum||u>h.maximum){if(!a){o=!1;break}}else d.push(h),r.push({val1:c,val2:u}),o=!0}if(o)for(s=0;s<d.length;s++)h=d[s],e=r[s],h.setViewPortRange(e.val1,e.val2);return o},T.prototype.preparePlotArea=function(){var e=this.plotArea,t=this.axisY?this.axisY:this.axisY2;!Y&&(0<e.x1||0<e.y1)&&e.ctx.translate(e.x1,e.y1),this.axisX&&t?(e.x1=this.axisX.lineCoordinates.x1<this.axisX.lineCoordinates.x2?this.axisX.lineCoordinates.x1:t.lineCoordinates.x1,e.y1=this.axisX.lineCoordinates.y1<t.lineCoordinates.y1?this.axisX.lineCoordinates.y1:t.lineCoordinates.y1,e.x2=this.axisX.lineCoordinates.x2>t.lineCoordinates.x2?this.axisX.lineCoordinates.x2:t.lineCoordinates.x2,e.y2=this.axisX.lineCoordinates.y2>this.axisX.lineCoordinates.y1?this.axisX.lineCoordinates.y2:t.lineCoordinates.y2,e.width=e.x2-e.x1,e.height=e.y2-e.y1):(t=this.layoutManager.getFreeSpace(),e.x1=t.x1,e.x2=t.x2,e.y1=t.y1,e.y2=t.y2,e.width=t.width,e.height=t.height),Y||(e.canvas.width=e.width,e.canvas.height=e.height,e.canvas.style.left=e.x1+"px",e.canvas.style.top=e.y1+"px",(0<e.x1||0<e.y1)&&e.ctx.translate(-e.x1,-e.y1)),e.layoutManager=new S(e.x1,e.y1,e.x2,e.y2,2)},T.prototype.getPixelCoordinatesOnPlotArea=function(e,t){return{x:this.axisX.getPixelCoordinatesOnAxis(e).x,y:this.axisY.getPixelCoordinatesOnAxis(t).y}},T.prototype.renderIndexLabels=function(e){e=e||this.plotArea.ctx;for(var t=this.plotArea,i=0,n=0,a=0,r=0,s=0,o=n=r=a=0,l=0;l<this._indexLabels.length;l++){var d,h,c=this._indexLabels[l],s=c.chartType.toLowerCase(),u=g("indexLabelFontColor",c.dataPoint,c.dataSeries),o=g("indexLabelFontSize",c.dataPoint,c.dataSeries);d=g("indexLabelFontFamily",c.dataPoint,c.dataSeries),h=g("indexLabelFontStyle",c.dataPoint,c.dataSeries);var r=g("indexLabelFontWeight",c.dataPoint,c.dataSeries),n=g("indexLabelBackgroundColor",c.dataPoint,c.dataSeries),a=g("indexLabelMaxWidth",c.dataPoint,c.dataSeries),p=g("indexLabelWrap",c.dataPoint,c.dataSeries),f={percent:null,total:null},m=null;(0<=c.dataSeries.type.indexOf("stacked")||"pie"===c.dataSeries.type||"doughnut"===c.dataSeries.type)&&(f=this.getPercentAndTotal(c.dataSeries,c.dataPoint)),(c.dataSeries.indexLabelFormatter||c.dataPoint.indexLabelFormatter)&&(m={chart:this._publicChartReference,dataSeries:c.dataSeries,dataPoint:c.dataPoint,index:c.indexKeyword,total:f.total,percent:f.percent});var x=c.dataPoint.indexLabelFormatter?c.dataPoint.indexLabelFormatter(m):c.dataPoint.indexLabel?this.replaceKeywordsWithValue(c.dataPoint.indexLabel,c.dataPoint,c.dataSeries,null,c.indexKeyword):c.dataSeries.indexLabelFormatter?c.dataSeries.indexLabelFormatter(m):c.dataSeries.indexLabel?this.replaceKeywordsWithValue(c.dataSeries.indexLabel,c.dataPoint,c.dataSeries,null,c.indexKeyword):null;if(null!==x&&""!==x){var i=g("indexLabelPlacement",c.dataPoint,c.dataSeries),f=g("indexLabelOrientation",c.dataPoint,c.dataSeries),m=c.direction,y=c.dataSeries.axisX,v=c.dataSeries.axisY,u=new P(e,{x:0,y:0,maxWidth:a?a:.5*this.width,maxHeight:p?5*o:1.5*o,angle:"horizontal"===f?0:-90,text:x,padding:0,backgroundColor:n,horizontalAlign:"left",fontSize:o,fontFamily:d,fontWeight:r,fontColor:u,fontStyle:h,textBaseline:"top"});if(u.measureText(),0<=s.indexOf("line")||0<=s.indexOf("area")||0<=s.indexOf("bubble")||0<=s.indexOf("scatter")){if(c.dataPoint.x<y.viewportMinimum||c.dataPoint.x>y.viewportMaximum||c.dataPoint.y<v.viewportMinimum||c.dataPoint.y>v.viewportMaximum)continue}else if(0<=s.indexOf("column")){if(c.dataPoint.x<y.viewportMinimum||c.dataPoint.x>y.viewportMaximum||c.bounds.y1>t.y2||c.bounds.y2<t.y1)continue}else if(0<=s.indexOf("bar")){if(c.dataPoint.x<y.viewportMinimum||c.dataPoint.x>y.viewportMaximum||c.bounds.x1>t.x2||c.bounds.x2<t.x1)continue}else if(c.dataPoint.x<y.viewportMinimum||c.dataPoint.x>y.viewportMaximum)continue;a=r=2,"horizontal"===f?(n=u.width,o=u.height):(o=u.width,n=u.height),"normal"===this.plotInfo.axisPlacement?(0<=s.indexOf("line")||0<=s.indexOf("area")?(i="auto",r=4):0<=s.indexOf("stacked")?"auto"===i&&(i="inside"):("bubble"===s||"scatter"===s)&&(i="inside"),d=c.point.x-n/2,"inside"!==i?(n=t.y1,a=t.y2,m>0?(h=c.point.y-o-r,n>h&&(h="auto"===i?Math.max(c.point.y,n)+r:n+r)):(h=c.point.y+r,h>a-o-r&&(h="auto"===i?Math.min(c.point.y,a)-o-r:a-o-r))):(n=Math.max(c.bounds.y1,t.y1),a=Math.min(c.bounds.y2,t.y2),i=0<=s.indexOf("range")?m>0?Math.max(c.bounds.y1,t.y1)+o/2+r:Math.min(c.bounds.y2,t.y2)-o/2-r:(Math.max(c.bounds.y1,t.y1)+Math.min(c.bounds.y2,t.y2))/2,m>0?(h=Math.max(c.point.y,i)-o/2,n>h&&("bubble"===s||"scatter"===s)&&(h=Math.max(c.point.y-o-r,t.y1+r))):(h=Math.min(c.point.y,i)-o/2,h>a-o-r&&("bubble"===s||"scatter"===s)&&(h=Math.min(c.point.y+r,t.y2-o-r))),h=Math.min(h,a-o))):(0<=s.indexOf("line")||0<=s.indexOf("area")||0<=s.indexOf("scatter")?(i="auto",a=4):0<=s.indexOf("stacked")?"auto"===i&&(i="inside"):"bubble"===s&&(i="inside"),h=c.point.y-o/2,"inside"!==i?(r=t.x1,s=t.x2,0>m?(d=c.point.x-n-a,r>d&&(d="auto"===i?Math.max(c.point.x,r)+a:r+a)):(d=c.point.x+a,d>s-n-a&&(d="auto"===i?Math.min(c.point.x,s)-n-a:s-n-a))):(r=Math.max(c.bounds.x1,t.x1),Math.min(c.bounds.x2,t.x2),i=0<=s.indexOf("range")?0>m?Math.max(c.bounds.x1,t.x1)+n/2+a:Math.min(c.bounds.x2,t.x2)-n/2-a:(Math.max(c.bounds.x1,t.x1)+Math.min(c.bounds.x2,t.x2))/2,d=0>m?Math.max(c.point.x,i)-n/2:Math.min(c.point.x,i)-n/2,d=Math.max(d,r))),"vertical"===f&&(h+=o),u.x=d,u.y=h,u.render(!0)}}return{source:e,dest:this.plotArea.ctx,animationCallback:ae.fadeInAnimation,easingFunction:ae.easing.easeInQuad,animationBase:0,startTimePercent:.7}},T.prototype.renderLine=function(e){var t=e.targetCanvasCtx||this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var i=this._eventManager.ghostCtx;t.save();var n=this.plotArea;t.beginPath(),t.rect(n.x1,n.y1,n.width,n.height),t.clip();for(var n=[],a=0;a<e.dataSeriesIndexes.length;a++){var r=e.dataSeriesIndexes[a],s=this.data[r];t.lineWidth=s.lineThickness;var o=s.dataPoints;t.setLineDash&&t.setLineDash(p(s.lineDashType,s.lineThickness));var l=s.id;this._eventManager.objectMap[l]={objectType:"dataSeries",dataSeriesIndex:r},l=d(l),i.strokeStyle=l,i.lineWidth=0<s.lineThickness?Math.max(s.lineThickness,4):0,l=s._colorSet[0],t.strokeStyle=l;var h,c,u=!0,f=0;if(t.beginPath(),0<o.length){for(var m=!1,f=0;f<o.length;f++)if(h=o[f].x.getTime?o[f].x.getTime():o[f].x,!(h<e.axisX.dataInfo.viewPortMin||h>e.axisX.dataInfo.viewPortMax))if("number"!=typeof o[f].y)f>0&&(t.stroke(),Y&&i.stroke()),m=!0;else{h=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(h-e.axisX.conversionParameters.minimum)+.5<<0,c=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(o[f].y-e.axisY.conversionParameters.minimum)+.5<<0;var g=s.dataPointIds[f];if(this._eventManager.objectMap[g]={id:g,objectType:"dataPoint",dataSeriesIndex:r,dataPointIndex:f,x1:h,y1:c},u||m?(t.beginPath(),t.moveTo(h,c),Y&&(i.beginPath(),i.moveTo(h,c)),m=u=!1):(t.lineTo(h,c),Y&&i.lineTo(h,c),0==f%500&&(t.stroke(),t.beginPath(),t.moveTo(h,c),Y&&(i.stroke(),i.beginPath(),i.moveTo(h,c)))),0<o[f].markerSize||0<s.markerSize){var x=s.getMarkerProperties(f,h,c,t);n.push(x),g=d(g),Y&&n.push({x:h,y:c,ctx:i,type:x.type,size:x.size,color:g,borderColor:g,borderThickness:x.borderThickness})}(o[f].indexLabel||s.indexLabel||o[f].indexLabelFormatter||s.indexLabelFormatter)&&this._indexLabels.push({chartType:"line",dataPoint:o[f],dataSeries:s,point:{x:h,y:c},direction:0<=o[f].y?1:-1,color:l})}t.stroke(),Y&&i.stroke()}}return re.drawMarkers(n),t.restore(),t.beginPath(),Y&&i.beginPath(),{source:t,dest:this.plotArea.ctx,animationCallback:ae.xClipAnimation,easingFunction:ae.easing.linear,animationBase:0}}},T.prototype.renderStepLine=function(e){var t=e.targetCanvasCtx||this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var i=this._eventManager.ghostCtx;t.save();var n=this.plotArea;t.beginPath(),t.rect(n.x1,n.y1,n.width,n.height),t.clip();for(var n=[],a=0;a<e.dataSeriesIndexes.length;a++){var r=e.dataSeriesIndexes[a],s=this.data[r];t.lineWidth=s.lineThickness;var o=s.dataPoints;t.setLineDash&&t.setLineDash(p(s.lineDashType,s.lineThickness));var l=s.id;this._eventManager.objectMap[l]={objectType:"dataSeries",dataSeriesIndex:r},l=d(l),i.strokeStyle=l,i.lineWidth=0<s.lineThickness?Math.max(s.lineThickness,4):0,l=s._colorSet[0],t.strokeStyle=l;var h,c,u=!0,f=0;if(t.beginPath(),0<o.length){for(var m=!1,f=0;f<o.length;f++)if(h=o[f].getTime?o[f].x.getTime():o[f].x,!(h<e.axisX.dataInfo.viewPortMin||h>e.axisX.dataInfo.viewPortMax))if("number"!=typeof o[f].y)f>0&&(t.stroke(),Y&&i.stroke()),m=!0;else{var g=c;h=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(h-e.axisX.conversionParameters.minimum)+.5<<0,c=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(o[f].y-e.axisY.conversionParameters.minimum)+.5<<0;var x=s.dataPointIds[f];this._eventManager.objectMap[x]={id:x,objectType:"dataPoint",dataSeriesIndex:r,dataPointIndex:f,x1:h,y1:c},u||m?(t.beginPath(),t.moveTo(h,c),Y&&(i.beginPath(),i.moveTo(h,c)),m=u=!1):(t.lineTo(h,g),Y&&i.lineTo(h,g),t.lineTo(h,c),Y&&i.lineTo(h,c),0==f%500&&(t.stroke(),t.beginPath(),t.moveTo(h,c),Y&&(i.stroke(),i.beginPath(),i.moveTo(h,c)))),(0<o[f].markerSize||0<s.markerSize)&&(g=s.getMarkerProperties(f,h,c,t),n.push(g),x=d(x),Y&&n.push({x:h,y:c,ctx:i,type:g.type,size:g.size,
color:x,borderColor:x,borderThickness:g.borderThickness})),(o[f].indexLabel||s.indexLabel||o[f].indexLabelFormatter||s.indexLabelFormatter)&&this._indexLabels.push({chartType:"stepLine",dataPoint:o[f],dataSeries:s,point:{x:h,y:c},direction:0<=o[f].y?1:-1,color:l})}t.stroke(),Y&&i.stroke()}}return re.drawMarkers(n),t.restore(),t.beginPath(),Y&&i.beginPath(),{source:t,dest:this.plotArea.ctx,animationCallback:ae.xClipAnimation,easingFunction:ae.easing.linear,animationBase:0}}},T.prototype.renderSpline=function(e){function t(e){if(e=M(e,2),0<e.length){i.beginPath(),Y&&n.beginPath(),i.moveTo(e[0].x,e[0].y),Y&&n.moveTo(e[0].x,e[0].y);for(var t=0;t<e.length-3;t+=3)i.bezierCurveTo(e[t+1].x,e[t+1].y,e[t+2].x,e[t+2].y,e[t+3].x,e[t+3].y),Y&&n.bezierCurveTo(e[t+1].x,e[t+1].y,e[t+2].x,e[t+2].y,e[t+3].x,e[t+3].y),t>0&&0===t%3e3&&(i.stroke(),i.beginPath(),i.moveTo(e[t+3].x,e[t+3].y),Y&&(n.stroke(),n.beginPath(),n.moveTo(e[t+3].x,e[t+3].y)));i.stroke(),Y&&n.stroke()}}var i=e.targetCanvasCtx||this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var n=this._eventManager.ghostCtx;i.save();var a=this.plotArea;i.beginPath(),i.rect(a.x1,a.y1,a.width,a.height),i.clip();for(var a=[],r=0;r<e.dataSeriesIndexes.length;r++){var s=e.dataSeriesIndexes[r],o=this.data[s];i.lineWidth=o.lineThickness;var l=o.dataPoints;i.setLineDash&&i.setLineDash(p(o.lineDashType,o.lineThickness));var h=o.id;this._eventManager.objectMap[h]={objectType:"dataSeries",dataSeriesIndex:s},h=d(h),n.strokeStyle=h,n.lineWidth=0<o.lineThickness?Math.max(o.lineThickness,4):0,h=o._colorSet[0],i.strokeStyle=h;var c,u,f=0,m=[];if(i.beginPath(),0<l.length)for(f=0;f<l.length;f++)if(c=l[f].getTime?l[f].x.getTime():l[f].x,!(c<e.axisX.dataInfo.viewPortMin||c>e.axisX.dataInfo.viewPortMax))if("number"!=typeof l[f].y)f>0&&(t(m),m=[]);else{c=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(c-e.axisX.conversionParameters.minimum)+.5<<0,u=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(l[f].y-e.axisY.conversionParameters.minimum)+.5<<0;var g=o.dataPointIds[f];if(this._eventManager.objectMap[g]={id:g,objectType:"dataPoint",dataSeriesIndex:s,dataPointIndex:f,x1:c,y1:u},m[m.length]={x:c,y:u},0<l[f].markerSize||0<o.markerSize){var x=o.getMarkerProperties(f,c,u,i);a.push(x),g=d(g),Y&&a.push({x:c,y:u,ctx:n,type:x.type,size:x.size,color:g,borderColor:g,borderThickness:x.borderThickness})}(l[f].indexLabel||o.indexLabel||l[f].indexLabelFormatter||o.indexLabelFormatter)&&this._indexLabels.push({chartType:"spline",dataPoint:l[f],dataSeries:o,point:{x:c,y:u},direction:0<=l[f].y?1:-1,color:h})}t(m)}return re.drawMarkers(a),i.restore(),i.beginPath(),Y&&n.beginPath(),{source:i,dest:this.plotArea.ctx,animationCallback:ae.xClipAnimation,easingFunction:ae.easing.linear,animationBase:0}}};var ie=function(e,t,i,n,a,r,s,o,l,d,h,c,u){"undefined"==typeof u&&(u=1),s=s||0,o=o||"black";var p=n-t>15&&a-i>15?8:.35*Math.min(n-t,a-i);e.beginPath(),e.moveTo(t,i),e.save(),e.fillStyle=r,e.globalAlpha=u,e.fillRect(t,i,n-t,a-i),e.globalAlpha=1,s>0&&(u=0===s%2?0:.5,e.beginPath(),e.lineWidth=s,e.strokeStyle=o,e.moveTo(t,i),e.rect(t-u,i-u,n-t+2*u,a-i+2*u),e.stroke()),e.restore(),!0===l&&(e.save(),e.beginPath(),e.moveTo(t,i),e.lineTo(t+p,i+p),e.lineTo(n-p,i+p),e.lineTo(n,i),e.closePath(),s=e.createLinearGradient((n+t)/2,i+p,(n+t)/2,i),s.addColorStop(0,r),s.addColorStop(1,"rgba(255, 255, 255, .4)"),e.fillStyle=s,e.fill(),e.restore()),!0===d&&(e.save(),e.beginPath(),e.moveTo(t,a),e.lineTo(t+p,a-p),e.lineTo(n-p,a-p),e.lineTo(n,a),e.closePath(),s=e.createLinearGradient((n+t)/2,a-p,(n+t)/2,a),s.addColorStop(0,r),s.addColorStop(1,"rgba(255, 255, 255, .4)"),e.fillStyle=s,e.fill(),e.restore()),!0===h&&(e.save(),e.beginPath(),e.moveTo(t,i),e.lineTo(t+p,i+p),e.lineTo(t+p,a-p),e.lineTo(t,a),e.closePath(),s=e.createLinearGradient(t+p,(a+i)/2,t,(a+i)/2),s.addColorStop(0,r),s.addColorStop(1,"rgba(255, 255, 255, 0.1)"),e.fillStyle=s,e.fill(),e.restore()),!0===c&&(e.save(),e.beginPath(),e.moveTo(n,i),e.lineTo(n-p,i+p),e.lineTo(n-p,a-p),e.lineTo(n,a),s=e.createLinearGradient(n-p,(a+i)/2,n,(a+i)/2),s.addColorStop(0,r),s.addColorStop(1,"rgba(255, 255, 255, 0.1)"),e.fillStyle=s,s.addColorStop(0,r),s.addColorStop(1,"rgba(255, 255, 255, 0.1)"),e.fillStyle=s,e.fill(),e.closePath(),e.restore())};T.prototype.renderColumn=function(e){var t=e.targetCanvasCtx||this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var i,n,a,r=null,s=this.plotArea,o=0,l=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)<<0,o=this.dataPointMinWidth?this.dataPointMinWidth:this.dataPointWidth?this.dataPointWidth:1,h=this.dataPointMaxWidth?this.dataPointMaxWidth:this.dataPointWidth?this.dataPointWidth:Math.min(.15*this.width,.9*(this.plotArea.width/e.plotType.totalDataSeries))<<0,c=e.axisX.dataInfo.minDiff;for(isFinite(c)||(c=.3*Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)),c=this.dataPointWidth?this.dataPointWidth:.9*(s.width/Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)*Math.abs(c)/e.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&o>h&&(o=Math.min(this.dataPointWidth?this.dataPointWidth:1/0,h)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&o>h&&(h=Math.max(this.dataPointWidth?this.dataPointWidth:-(1/0),o)),o>c&&(c=o),c>h&&(c=h),t.save(),Y&&this._eventManager.ghostCtx.save(),t.beginPath(),t.rect(s.x1,s.y1,s.width,s.height),t.clip(),Y&&(this._eventManager.ghostCtx.rect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.clip()),s=0;s<e.dataSeriesIndexes.length;s++){var h=e.dataSeriesIndexes[s],u=this.data[h],p=u.dataPoints;if(0<p.length)for(var f=c>5&&u.bevelEnabled?!0:!1,o=0;o<p.length;o++)if(a=p[o].getTime?p[o].x.getTime():p[o].x,!(a<e.axisX.dataInfo.viewPortMin||a>e.axisX.dataInfo.viewPortMax)&&"number"==typeof p[o].y){i=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(a-e.axisX.conversionParameters.minimum)+.5<<0,n=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(p[o].y-e.axisY.conversionParameters.minimum)+.5<<0,i=i-e.plotType.totalDataSeries*c/2+(e.previousDataSeriesCount+s)*c<<0;var m,g=i+c<<0;0<=p[o].y?m=l:(m=n,n=l),n>m&&(m=n=m),r=p[o].color?p[o].color:u._colorSet[o%u._colorSet.length],ie(t,i,n,g,m,r,0,null,f&&0<=p[o].y,0>p[o].y&&f,!1,!1,u.fillOpacity),r=u.dataPointIds[o],this._eventManager.objectMap[r]={id:r,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:o,x1:i,y1:n,x2:g,y2:m},r=d(r),Y&&ie(this._eventManager.ghostCtx,i,n,g,m,r,0,null,!1,!1,!1,!1),(p[o].indexLabel||u.indexLabel||p[o].indexLabelFormatter||u.indexLabelFormatter)&&this._indexLabels.push({chartType:"column",dataPoint:p[o],dataSeries:u,point:{x:i+(g-i)/2,y:0<=p[o].y?n:m},direction:0<=p[o].y?1:-1,bounds:{x1:i,y1:Math.min(n,m),x2:g,y2:Math.max(n,m)},color:r})}}return t.restore(),Y&&this._eventManager.ghostCtx.restore(),e=Math.min(l,e.axisY.boundingRect.y2),{source:t,dest:this.plotArea.ctx,animationCallback:ae.yScaleAnimation,easingFunction:ae.easing.easeOutQuart,animationBase:e}}},T.prototype.renderStackedColumn=function(e){var t=e.targetCanvasCtx||this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var i,n=null,a=this.plotArea,r=[],s=[],o=0,l=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)<<0,o=this.dataPointMinWidth?this.dataPointMinWidth:this.dataPointWidth?this.dataPointWidth:1,h=this.dataPointMaxWidth?this.dataPointMaxWidth:this.dataPointWidth?this.dataPointWidth:.15*this.width<<0,c=e.axisX.dataInfo.minDiff;for(isFinite(c)||(c=.3*Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)),c=this.dataPointWidth?this.dataPointWidth:.9*(a.width/Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)*Math.abs(c)/e.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&o>h&&(o=Math.min(this.dataPointWidth?this.dataPointWidth:1/0,h)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&o>h&&(h=Math.max(this.dataPointWidth?this.dataPointWidth:-(1/0),o)),o>c&&(c=o),c>h&&(c=h),t.save(),Y&&this._eventManager.ghostCtx.save(),t.beginPath(),t.rect(a.x1,a.y1,a.width,a.height),t.clip(),Y&&(this._eventManager.ghostCtx.rect(a.x1,a.y1,a.width,a.height),this._eventManager.ghostCtx.clip()),h=0;h<e.dataSeriesIndexes.length;h++){var u=e.dataSeriesIndexes[h],p=this.data[u],f=p.dataPoints;if(0<f.length){var m=c>5&&p.bevelEnabled?!0:!1;for(t.strokeStyle="#4572A7 ",o=0;o<f.length;o++)if(n=f[o].x.getTime?f[o].x.getTime():f[o].x,!(n<e.axisX.dataInfo.viewPortMin||n>e.axisX.dataInfo.viewPortMax)&&"number"==typeof f[o].y){a=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(n-e.axisX.conversionParameters.minimum)+.5<<0,i=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(f[o].y-e.axisY.conversionParameters.minimum);var g,x=a-e.plotType.plotUnits.length*c/2+e.index*c<<0,y=x+c<<0;if(0<=f[o].y){var v=r[n]?r[n]:0;i-=v,g=l-v,r[n]=v+(g-i)}else v=s[n]?s[n]:0,g=i+v,i=l+v,s[n]=v+(g-i);n=f[o].color?f[o].color:p._colorSet[o%p._colorSet.length],ie(t,x,i,y,g,n,0,null,m&&0<=f[o].y,0>f[o].y&&m,!1,!1,p.fillOpacity),n=p.dataPointIds[o],this._eventManager.objectMap[n]={id:n,objectType:"dataPoint",dataSeriesIndex:u,dataPointIndex:o,x1:x,y1:i,x2:y,y2:g},n=d(n),Y&&ie(this._eventManager.ghostCtx,x,i,y,g,n,0,null,!1,!1,!1,!1),(f[o].indexLabel||p.indexLabel||f[o].indexLabelFormatter||p.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedColumn",dataPoint:f[o],dataSeries:p,point:{x:a,y:0<=f[o].y?i:g},direction:0<=f[o].y?1:-1,bounds:{x1:x,y1:Math.min(i,g),x2:y,y2:Math.max(i,g)},color:n})}}}return t.restore(),Y&&this._eventManager.ghostCtx.restore(),e=Math.min(l,e.axisY.boundingRect.y2),{source:t,dest:this.plotArea.ctx,animationCallback:ae.yScaleAnimation,easingFunction:ae.easing.easeOutQuart,animationBase:e}}},T.prototype.renderStackedColumn100=function(e){var t=e.targetCanvasCtx||this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var i,n=null,a=this.plotArea,r=[],s=[],o=0,l=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)<<0,o=this.dataPointMinWidth?this.dataPointMinWidth:this.dataPointWidth?this.dataPointWidth:1,h=this.dataPointMaxWidth?this.dataPointMaxWidth:this.dataPointWidth?this.dataPointWidth:.15*this.width<<0,c=e.axisX.dataInfo.minDiff;for(isFinite(c)||(c=.3*Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)),c=this.dataPointWidth?this.dataPointWidth:.9*(a.width/Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)*Math.abs(c)/e.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&o>h&&(o=Math.min(this.dataPointWidth?this.dataPointWidth:1/0,h)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&o>h&&(h=Math.max(this.dataPointWidth?this.dataPointWidth:-(1/0),o)),o>c&&(c=o),c>h&&(c=h),t.save(),Y&&this._eventManager.ghostCtx.save(),t.beginPath(),t.rect(a.x1,a.y1,a.width,a.height),t.clip(),Y&&(this._eventManager.ghostCtx.rect(a.x1,a.y1,a.width,a.height),this._eventManager.ghostCtx.clip()),h=0;h<e.dataSeriesIndexes.length;h++){var u=e.dataSeriesIndexes[h],p=this.data[u],f=p.dataPoints;if(0<f.length)for(var m=c>5&&p.bevelEnabled?!0:!1,o=0;o<f.length;o++)if(n=f[o].x.getTime?f[o].x.getTime():f[o].x,!(n<e.axisX.dataInfo.viewPortMin||n>e.axisX.dataInfo.viewPortMax)&&"number"==typeof f[o].y){a=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(n-e.axisX.conversionParameters.minimum)+.5<<0,i=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*((0!==e.dataPointYSums[n]?100*(f[o].y/e.dataPointYSums[n]):0)-e.axisY.conversionParameters.minimum);var g,x=a-e.plotType.plotUnits.length*c/2+e.index*c<<0,y=x+c<<0;if(0<=f[o].y){var v=r[n]?r[n]:0;i-=v,g=l-v,r[n]=v+(g-i)}else v=s[n]?s[n]:0,g=i+v,i=l+v,s[n]=v+(g-i);n=f[o].color?f[o].color:p._colorSet[o%p._colorSet.length],ie(t,x,i,y,g,n,0,null,m&&0<=f[o].y,0>f[o].y&&m,!1,!1,p.fillOpacity),n=p.dataPointIds[o],this._eventManager.objectMap[n]={id:n,objectType:"dataPoint",dataSeriesIndex:u,dataPointIndex:o,x1:x,y1:i,x2:y,y2:g},n=d(n),Y&&ie(this._eventManager.ghostCtx,x,i,y,g,n,0,null,!1,!1,!1,!1),(f[o].indexLabel||p.indexLabel||f[o].indexLabelFormatter||p.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedColumn100",dataPoint:f[o],dataSeries:p,point:{x:a,y:0<=f[o].y?i:g},direction:0<=f[o].y?1:-1,bounds:{x1:x,y1:Math.min(i,g),x2:y,y2:Math.max(i,g)},color:n})}}return t.restore(),Y&&this._eventManager.ghostCtx.restore(),e=Math.min(l,e.axisY.boundingRect.y2),{source:t,dest:this.plotArea.ctx,animationCallback:ae.yScaleAnimation,easingFunction:ae.easing.easeOutQuart,animationBase:e}}},T.prototype.renderBar=function(e){var t=e.targetCanvasCtx||this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var i,n,a,r=null,s=this.plotArea,o=0,l=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)<<0,o=this.dataPointMinWidth?this.dataPointMinWidth:this.dataPointWidth?this.dataPointWidth:1,h=this.dataPointMaxWidth?this.dataPointMaxWidth:this.dataPointWidth?this.dataPointWidth:Math.min(.15*this.height,.9*(this.plotArea.height/e.plotType.totalDataSeries))<<0,c=e.axisX.dataInfo.minDiff;for(isFinite(c)||(c=.3*Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)),c=this.dataPointWidth?this.dataPointWidth:.9*(s.height/Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)*Math.abs(c)/e.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&o>h&&(o=Math.min(this.dataPointWidth?this.dataPointWidth:1/0,h)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&o>h&&(h=Math.max(this.dataPointWidth?this.dataPointWidth:-(1/0),o)),o>c&&(c=o),c>h&&(c=h),t.save(),Y&&this._eventManager.ghostCtx.save(),t.beginPath(),t.rect(s.x1,s.y1,s.width,s.height),t.clip(),Y&&(this._eventManager.ghostCtx.rect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.clip()),s=0;s<e.dataSeriesIndexes.length;s++){var h=e.dataSeriesIndexes[s],u=this.data[h],p=u.dataPoints;if(0<p.length){var f=c>5&&u.bevelEnabled?!0:!1;for(t.strokeStyle="#4572A7 ",o=0;o<p.length;o++)if(a=p[o].getTime?p[o].x.getTime():p[o].x,!(a<e.axisX.dataInfo.viewPortMin||a>e.axisX.dataInfo.viewPortMax)&&"number"==typeof p[o].y){n=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(a-e.axisX.conversionParameters.minimum)+.5<<0,i=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(p[o].y-e.axisY.conversionParameters.minimum)+.5<<0,n=n-e.plotType.totalDataSeries*c/2+(e.previousDataSeriesCount+s)*c<<0;var m,g=n+c<<0;0<=p[o].y?m=l:(m=i,i=l),r=p[o].color?p[o].color:u._colorSet[o%u._colorSet.length],ie(t,m,n,i,g,r,0,null,f,!1,!1,!1,u.fillOpacity),r=u.dataPointIds[o],this._eventManager.objectMap[r]={id:r,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:o,x1:m,y1:n,x2:i,y2:g},r=d(r),Y&&ie(this._eventManager.ghostCtx,m,n,i,g,r,0,null,!1,!1,!1,!1),(p[o].indexLabel||u.indexLabel||p[o].indexLabelFormatter||u.indexLabelFormatter)&&this._indexLabels.push({chartType:"bar",dataPoint:p[o],dataSeries:u,point:{x:0<=p[o].y?i:m,y:n+(g-n)/2},direction:0<=p[o].y?1:-1,bounds:{x1:Math.min(m,i),y1:n,x2:Math.max(m,i),y2:g},color:r})}}}return t.restore(),Y&&this._eventManager.ghostCtx.restore(),e=Math.max(l,e.axisX.boundingRect.x2),{source:t,dest:this.plotArea.ctx,animationCallback:ae.xScaleAnimation,easingFunction:ae.easing.easeOutQuart,animationBase:e}}},T.prototype.renderStackedBar=function(e){var t=e.targetCanvasCtx||this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var i,n=null,a=this.plotArea,r=[],s=[],o=0,l=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)<<0,o=this.dataPointMinWidth?this.dataPointMinWidth:this.dataPointWidth?this.dataPointWidth:1,h=this.dataPointMaxWidth?this.dataPointMaxWidth:this.dataPointWidth?this.dataPointWidth:.15*this.height<<0,c=e.axisX.dataInfo.minDiff;for(isFinite(c)||(c=.3*Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)),c=this.dataPointWidth?this.dataPointWidth:.9*(a.height/Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)*Math.abs(c)/e.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&o>h&&(o=Math.min(this.dataPointWidth?this.dataPointWidth:1/0,h)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&o>h&&(h=Math.max(this.dataPointWidth?this.dataPointWidth:-(1/0),o)),o>c&&(c=o),c>h&&(c=h),t.save(),Y&&this._eventManager.ghostCtx.save(),t.beginPath(),t.rect(a.x1,a.y1,a.width,a.height),t.clip(),Y&&(this._eventManager.ghostCtx.rect(a.x1,a.y1,a.width,a.height),this._eventManager.ghostCtx.clip()),h=0;h<e.dataSeriesIndexes.length;h++){var u=e.dataSeriesIndexes[h],p=this.data[u],f=p.dataPoints;if(0<f.length){var m=c>5&&p.bevelEnabled?!0:!1;for(t.strokeStyle="#4572A7 ",o=0;o<f.length;o++)if(n=f[o].x.getTime?f[o].x.getTime():f[o].x,!(n<e.axisX.dataInfo.viewPortMin||n>e.axisX.dataInfo.viewPortMax)&&"number"==typeof f[o].y){a=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(n-e.axisX.conversionParameters.minimum)+.5<<0,i=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(f[o].y-e.axisY.conversionParameters.minimum);var g,x=a-e.plotType.plotUnits.length*c/2+e.index*c<<0,y=x+c<<0;if(0<=f[o].y){var v=r[n]?r[n]:0;g=l+v,i+=v,r[n]=v+(i-g)}else v=s[n]?s[n]:0,g=i-v,i=l-v,s[n]=v+(i-g);n=f[o].color?f[o].color:p._colorSet[o%p._colorSet.length],ie(t,g,x,i,y,n,0,null,m,!1,!1,!1,p.fillOpacity),n=p.dataPointIds[o],this._eventManager.objectMap[n]={id:n,objectType:"dataPoint",dataSeriesIndex:u,dataPointIndex:o,x1:g,y1:x,x2:i,y2:y},n=d(n),Y&&ie(this._eventManager.ghostCtx,g,x,i,y,n,0,null,!1,!1,!1,!1),(f[o].indexLabel||p.indexLabel||f[o].indexLabelFormatter||p.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedBar",dataPoint:f[o],dataSeries:p,point:{x:0<=f[o].y?i:g,y:a},direction:0<=f[o].y?1:-1,bounds:{x1:Math.min(g,i),y1:x,x2:Math.max(g,i),y2:y},color:n})}}}return t.restore(),Y&&this._eventManager.ghostCtx.restore(),e=Math.max(l,e.axisX.boundingRect.x2),{source:t,dest:this.plotArea.ctx,animationCallback:ae.xScaleAnimation,easingFunction:ae.easing.easeOutQuart,animationBase:e}}},T.prototype.renderStackedBar100=function(e){var t=e.targetCanvasCtx||this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var i,n=null,a=this.plotArea,r=[],s=[],o=0,l=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)<<0,o=this.dataPointMinWidth?this.dataPointMinWidth:this.dataPointWidth?this.dataPointWidth:1,h=this.dataPointMaxWidth?this.dataPointMaxWidth:this.dataPointWidth?this.dataPointWidth:.15*this.height<<0,c=e.axisX.dataInfo.minDiff;for(isFinite(c)||(c=.3*Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)),c=this.dataPointWidth?this.dataPointWidth:.9*(a.height/Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)*Math.abs(c)/e.plotType.plotUnits.length)<<0,this.dataPointMaxWidth&&o>h&&(o=Math.min(this.dataPointWidth?this.dataPointWidth:1/0,h)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&o>h&&(h=Math.max(this.dataPointWidth?this.dataPointWidth:-(1/0),o)),o>c&&(c=o),c>h&&(c=h),t.save(),Y&&this._eventManager.ghostCtx.save(),t.beginPath(),t.rect(a.x1,a.y1,a.width,a.height),t.clip(),Y&&(this._eventManager.ghostCtx.rect(a.x1,a.y1,a.width,a.height),this._eventManager.ghostCtx.clip()),h=0;h<e.dataSeriesIndexes.length;h++){var u=e.dataSeriesIndexes[h],p=this.data[u],f=p.dataPoints;if(0<f.length){var m=c>5&&p.bevelEnabled?!0:!1;for(t.strokeStyle="#4572A7 ",o=0;o<f.length;o++)if(n=f[o].x.getTime?f[o].x.getTime():f[o].x,!(n<e.axisX.dataInfo.viewPortMin||n>e.axisX.dataInfo.viewPortMax)&&"number"==typeof f[o].y){a=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(n-e.axisX.conversionParameters.minimum)+.5<<0,i=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*((0!==e.dataPointYSums[n]?100*(f[o].y/e.dataPointYSums[n]):0)-e.axisY.conversionParameters.minimum);var g,x=a-e.plotType.plotUnits.length*c/2+e.index*c<<0,y=x+c<<0;if(0<=f[o].y){var v=r[n]?r[n]:0;g=l+v,i+=v,r[n]=v+(i-g)}else v=s[n]?s[n]:0,g=i-v,i=l-v,s[n]=v+(i-g);n=f[o].color?f[o].color:p._colorSet[o%p._colorSet.length],ie(t,g,x,i,y,n,0,null,m,!1,!1,!1,p.fillOpacity),n=p.dataPointIds[o],this._eventManager.objectMap[n]={id:n,objectType:"dataPoint",dataSeriesIndex:u,dataPointIndex:o,x1:g,y1:x,x2:i,y2:y},n=d(n),Y&&ie(this._eventManager.ghostCtx,g,x,i,y,n,0,null,!1,!1,!1,!1),(f[o].indexLabel||p.indexLabel||f[o].indexLabelFormatter||p.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedBar100",dataPoint:f[o],dataSeries:p,point:{x:0<=f[o].y?i:g,y:a},direction:0<=f[o].y?1:-1,bounds:{x1:Math.min(g,i),y1:x,x2:Math.max(g,i),y2:y},color:n})}}}return t.restore(),Y&&this._eventManager.ghostCtx.restore(),e=Math.max(l,e.axisX.boundingRect.x2),{source:t,dest:this.plotArea.ctx,animationCallback:ae.xScaleAnimation,easingFunction:ae.easing.easeOutQuart,animationBase:e}}},T.prototype.renderArea=function(e){function t(){_&&(0<h.lineThickness&&i.stroke(),0>=e.axisY.viewportMinimum&&0<=e.axisY.viewportMaximum?g=v:0>e.axisY.viewportMaximum?g=r.y1:0<e.axisY.viewportMinimum&&(g=a.y2),i.lineTo(u,g),i.lineTo(_.x,g),i.closePath(),i.globalAlpha=h.fillOpacity,i.fill(),i.globalAlpha=1,Y&&(n.lineTo(u,g),n.lineTo(_.x,g),n.closePath(),n.fill()),i.beginPath(),i.moveTo(u,f),n.beginPath(),n.moveTo(u,f),_={x:u,y:f})}var i=e.targetCanvasCtx||this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var n=this._eventManager.ghostCtx,a=e.axisX.lineCoordinates,r=e.axisY.lineCoordinates,s=[],o=this.plotArea;for(i.save(),Y&&n.save(),i.beginPath(),i.rect(o.x1,o.y1,o.width,o.height),i.clip(),Y&&(n.beginPath(),n.rect(o.x1,o.y1,o.width,o.height),n.clip()),o=0;o<e.dataSeriesIndexes.length;o++){var l=e.dataSeriesIndexes[o],h=this.data[l],c=h.dataPoints,s=h.id;this._eventManager.objectMap[s]={objectType:"dataSeries",dataSeriesIndex:l},s=d(s),n.fillStyle=s;var u,f,m,g,s=[],x=!0,y=0,v=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)+.5<<0,_=null;if(0<c.length){var b=h._colorSet[y%h._colorSet.length];i.fillStyle=b,i.strokeStyle=b,i.lineWidth=h.lineThickness,i.setLineDash&&i.setLineDash(p(h.lineDashType,h.lineThickness));for(var w=!0;y<c.length;y++)if(m=c[y].x.getTime?c[y].x.getTime():c[y].x,!(m<e.axisX.dataInfo.viewPortMin||m>e.axisX.dataInfo.viewPortMax))if("number"!=typeof c[y].y)t(),w=!0;else{u=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(m-e.axisX.conversionParameters.minimum)+.5<<0,f=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(c[y].y-e.axisY.conversionParameters.minimum)+.5<<0,x||w?(i.beginPath(),i.moveTo(u,f),_={x:u,y:f},Y&&(n.beginPath(),n.moveTo(u,f)),w=x=!1):(i.lineTo(u,f),Y&&n.lineTo(u,f),0==y%250&&t());var k=h.dataPointIds[y];this._eventManager.objectMap[k]={id:k,objectType:"dataPoint",dataSeriesIndex:l,dataPointIndex:y,x1:u,y1:f},0!==c[y].markerSize&&(0<c[y].markerSize||0<h.markerSize)&&(m=h.getMarkerProperties(y,u,f,i),s.push(m),k=d(k),Y&&s.push({x:u,y:f,ctx:n,type:m.type,size:m.size,color:k,borderColor:k,borderThickness:m.borderThickness})),(c[y].indexLabel||h.indexLabel||c[y].indexLabelFormatter||h.indexLabelFormatter)&&this._indexLabels.push({chartType:"area",dataPoint:c[y],dataSeries:h,point:{x:u,y:f},direction:0<=c[y].y?1:-1,color:b})}t(),re.drawMarkers(s)}}return i.restore(),Y&&this._eventManager.ghostCtx.restore(),{source:i,dest:this.plotArea.ctx,animationCallback:ae.xClipAnimation,easingFunction:ae.easing.linear,animationBase:0}}},T.prototype.renderSplineArea=function(e){function t(){var t=M(v,2);if(0<t.length){i.beginPath(),i.moveTo(t[0].x,t[0].y),Y&&(n.beginPath(),n.moveTo(t[0].x,t[0].y));for(var s=0;s<t.length-3;s+=3)i.bezierCurveTo(t[s+1].x,t[s+1].y,t[s+2].x,t[s+2].y,t[s+3].x,t[s+3].y),Y&&n.bezierCurveTo(t[s+1].x,t[s+1].y,t[s+2].x,t[s+2].y,t[s+3].x,t[s+3].y);0<h.lineThickness&&i.stroke(),0>=e.axisY.viewportMinimum&&0<=e.axisY.viewportMaximum?m=x:0>e.axisY.viewportMaximum?m=r.y1:0<e.axisY.viewportMinimum&&(m=a.y2),y={x:t[0].x,y:t[0].y},i.lineTo(t[t.length-1].x,m),i.lineTo(y.x,m),i.closePath(),i.globalAlpha=h.fillOpacity,i.fill(),i.globalAlpha=1,Y&&(n.lineTo(t[t.length-1].x,m),n.lineTo(y.x,m),n.closePath(),n.fill())}}var i=e.targetCanvasCtx||this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var n=this._eventManager.ghostCtx,a=e.axisX.lineCoordinates,r=e.axisY.lineCoordinates,s=[],o=this.plotArea;for(i.save(),Y&&n.save(),i.beginPath(),i.rect(o.x1,o.y1,o.width,o.height),i.clip(),Y&&(n.beginPath(),n.rect(o.x1,o.y1,o.width,o.height),n.clip()),o=0;o<e.dataSeriesIndexes.length;o++){var l=e.dataSeriesIndexes[o],h=this.data[l],c=h.dataPoints,s=h.id;this._eventManager.objectMap[s]={objectType:"dataSeries",dataSeriesIndex:l},s=d(s),n.fillStyle=s;var u,f,m,s=[],g=0,x=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)+.5<<0,y=null,v=[];if(0<c.length){for(color=h._colorSet[g%h._colorSet.length],i.fillStyle=color,i.strokeStyle=color,i.lineWidth=h.lineThickness,i.setLineDash&&i.setLineDash(p(h.lineDashType,h.lineThickness));g<c.length;g++)if(u=c[g].x.getTime?c[g].x.getTime():c[g].x,!(u<e.axisX.dataInfo.viewPortMin||u>e.axisX.dataInfo.viewPortMax))if("number"!=typeof c[g].y)g>0&&(t(),v=[]);else{u=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(u-e.axisX.conversionParameters.minimum)+.5<<0,f=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(c[g].y-e.axisY.conversionParameters.minimum)+.5<<0;var _=h.dataPointIds[g];if(this._eventManager.objectMap[_]={id:_,objectType:"dataPoint",dataSeriesIndex:l,dataPointIndex:g,x1:u,y1:f},v[v.length]={x:u,y:f},0!==c[g].markerSize&&(0<c[g].markerSize||0<h.markerSize)){var b=h.getMarkerProperties(g,u,f,i);s.push(b),_=d(_),Y&&s.push({x:u,y:f,ctx:n,type:b.type,size:b.size,color:_,borderColor:_,borderThickness:b.borderThickness})}(c[g].indexLabel||h.indexLabel||c[g].indexLabelFormatter||h.indexLabelFormatter)&&this._indexLabels.push({chartType:"splineArea",dataPoint:c[g],dataSeries:h,point:{x:u,y:f},direction:0<=c[g].y?1:-1,color:color})}t(),re.drawMarkers(s)}}return i.restore(),Y&&this._eventManager.ghostCtx.restore(),{source:i,dest:this.plotArea.ctx,animationCallback:ae.xClipAnimation,easingFunction:ae.easing.linear,animationBase:0}}},T.prototype.renderStepArea=function(e){function t(){_&&(0<h.lineThickness&&i.stroke(),0>=e.axisY.viewportMinimum&&0<=e.axisY.viewportMaximum?g=v:0>e.axisY.viewportMaximum?g=r.y1:0<e.axisY.viewportMinimum&&(g=a.y2),i.lineTo(u,g),i.lineTo(_.x,g),i.closePath(),i.globalAlpha=h.fillOpacity,i.fill(),i.globalAlpha=1,Y&&(n.lineTo(u,g),n.lineTo(_.x,g),n.closePath(),n.fill()),i.beginPath(),i.moveTo(u,f),n.beginPath(),n.moveTo(u,f),_={x:u,y:f})}var i=e.targetCanvasCtx||this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var n=this._eventManager.ghostCtx,a=e.axisX.lineCoordinates,r=e.axisY.lineCoordinates,s=[],o=this.plotArea;for(i.save(),Y&&n.save(),i.beginPath(),i.rect(o.x1,o.y1,o.width,o.height),i.clip(),Y&&(n.beginPath(),n.rect(o.x1,o.y1,o.width,o.height),n.clip()),o=0;o<e.dataSeriesIndexes.length;o++){var l=e.dataSeriesIndexes[o],h=this.data[l],c=h.dataPoints,s=h.id;this._eventManager.objectMap[s]={objectType:"dataSeries",dataSeriesIndex:l},s=d(s),n.fillStyle=s;var u,f,m,g,s=[],x=!0,y=0,v=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)+.5<<0,_=null,b=!1;if(0<c.length){var w=h._colorSet[y%h._colorSet.length];for(i.fillStyle=w,i.strokeStyle=w,i.lineWidth=h.lineThickness,i.setLineDash&&i.setLineDash(p(h.lineDashType,h.lineThickness));y<c.length;y++)if(m=c[y].x.getTime?c[y].x.getTime():c[y].x,!(m<e.axisX.dataInfo.viewPortMin||m>e.axisX.dataInfo.viewPortMax)){var k=f;"number"!=typeof c[y].y?(t(),b=!0):(u=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(m-e.axisX.conversionParameters.minimum)+.5<<0,f=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(c[y].y-e.axisY.conversionParameters.minimum)+.5<<0,x||b?(i.beginPath(),i.moveTo(u,f),_={x:u,y:f},Y&&(n.beginPath(),n.moveTo(u,f)),b=x=!1):(i.lineTo(u,k),Y&&n.lineTo(u,k),i.lineTo(u,f),Y&&n.lineTo(u,f),0==y%250&&t()),k=h.dataPointIds[y],this._eventManager.objectMap[k]={id:k,objectType:"dataPoint",dataSeriesIndex:l,dataPointIndex:y,x1:u,y1:f},0!==c[y].markerSize&&(0<c[y].markerSize||0<h.markerSize)&&(m=h.getMarkerProperties(y,u,f,i),s.push(m),k=d(k),Y&&s.push({x:u,y:f,ctx:n,type:m.type,size:m.size,color:k,borderColor:k,borderThickness:m.borderThickness})),(c[y].indexLabel||h.indexLabel||c[y].indexLabelFormatter||h.indexLabelFormatter)&&this._indexLabels.push({chartType:"stepArea",dataPoint:c[y],dataSeries:h,point:{x:u,y:f},direction:0<=c[y].y?1:-1,color:w}))}t(),re.drawMarkers(s)}}return i.restore(),Y&&this._eventManager.ghostCtx.restore(),{source:i,dest:this.plotArea.ctx,animationCallback:ae.xClipAnimation,easingFunction:ae.easing.linear,animationBase:0}}},T.prototype.renderStackedArea=function(e){var t=e.targetCanvasCtx||this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var i,n,a,r=null,s=[],l=this.plotArea,h=[],c=[],u=0,f=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)<<0,m=this._eventManager.ghostCtx;for(Y&&m.beginPath(),t.save(),Y&&m.save(),t.beginPath(),t.rect(l.x1,l.y1,l.width,l.height),t.clip(),Y&&(m.beginPath(),m.rect(l.x1,l.y1,l.width,l.height),m.clip()),xValuePresent=[],l=0;l<e.dataSeriesIndexes.length;l++){var g=e.dataSeriesIndexes[l],x=this.data[g],y=x.dataPoints;for(x.dataPointIndexes=[],u=0;u<y.length;u++)g=y[u].x.getTime?y[u].x.getTime():y[u].x,x.dataPointIndexes[g]=u,xValuePresent[g]||(c.push(g),xValuePresent[g]=!0);c.sort(o)}for(l=0;l<e.dataSeriesIndexes.length;l++){var g=e.dataSeriesIndexes[l],x=this.data[g],y=x.dataPoints,v=!0,_=[],u=x.id;if(this._eventManager.objectMap[u]={objectType:"dataSeries",dataSeriesIndex:g},u=d(u),m.fillStyle=u,0<c.length){for(r=x._colorSet[0],t.fillStyle=r,t.strokeStyle=r,t.lineWidth=x.lineThickness,t.setLineDash&&t.setLineDash(p(x.lineDashType,x.lineThickness)),u=0;u<c.length;u++){a=c[u];var b=null,b=0<=x.dataPointIndexes[a]?y[x.dataPointIndexes[a]]:{x:a,y:0};if(!(a<e.axisX.dataInfo.viewPortMin||a>e.axisX.dataInfo.viewPortMax)&&"number"==typeof b.y){i=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(a-e.axisX.conversionParameters.minimum)+.5<<0,n=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(b.y-e.axisY.conversionParameters.minimum);var w=h[a]?h[a]:0;if(n-=w,_.push({x:i,y:f-w}),h[a]=f-n,v)t.beginPath(),t.moveTo(i,n),Y&&(m.beginPath(),m.moveTo(i,n)),v=!1;else if(t.lineTo(i,n),Y&&m.lineTo(i,n),0==u%250){for(0<x.lineThickness&&t.stroke();0<_.length;){var k=_.pop();t.lineTo(k.x,k.y),Y&&m.lineTo(k.x,k.y)}t.closePath(),t.globalAlpha=x.fillOpacity,t.fill(),t.globalAlpha=1,t.beginPath(),t.moveTo(i,n),Y&&(m.closePath(),m.fill(),m.beginPath(),m.moveTo(i,n)),_.push({x:i,y:f-w})}if(0<=x.dataPointIndexes[a]){var T=x.dataPointIds[x.dataPointIndexes[a]];this._eventManager.objectMap[T]={id:T,objectType:"dataPoint",dataSeriesIndex:g,dataPointIndex:x.dataPointIndexes[a],x1:i,y1:n}}0<=x.dataPointIndexes[a]&&0!==b.markerSize&&(0<b.markerSize||0<x.markerSize)&&(a=x.getMarkerProperties(u,i,n,t),s.push(a),markerColor=d(T),Y&&s.push({x:i,y:n,ctx:m,type:a.type,size:a.size,color:markerColor,borderColor:markerColor,borderThickness:a.borderThickness})),(b.indexLabel||x.indexLabel||b.indexLabelFormatter||x.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedArea",dataPoint:b,dataSeries:x,point:{x:i,y:n},direction:0<=y[u].y?1:-1,color:r})}}for(0<x.lineThickness&&t.stroke();0<_.length;)k=_.pop(),t.lineTo(k.x,k.y),Y&&m.lineTo(k.x,k.y);t.closePath(),t.globalAlpha=x.fillOpacity,t.fill(),t.globalAlpha=1,t.beginPath(),t.moveTo(i,n),Y&&(m.closePath(),m.fill(),m.beginPath(),m.moveTo(i,n))}delete x.dataPointIndexes}return re.drawMarkers(s),t.restore(),Y&&m.restore(),{source:t,dest:this.plotArea.ctx,animationCallback:ae.xClipAnimation,easingFunction:ae.easing.linear,animationBase:0}}},T.prototype.renderStackedArea100=function(e){var t=e.targetCanvasCtx||this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var i,n,a,r=null,s=this.plotArea,l=[],h=[],c=[],u=0,f=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(0-e.axisY.conversionParameters.minimum)<<0,m=this.dataPointMaxWidth?this.dataPointMaxWidth:.15*this.width<<0,g=e.axisX.dataInfo.minDiff,g=.9*s.width/Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)*Math.abs(g)<<0,x=this._eventManager.ghostCtx;for(t.save(),
Y&&x.save(),t.beginPath(),t.rect(s.x1,s.y1,s.width,s.height),t.clip(),Y&&(x.beginPath(),x.rect(s.x1,s.y1,s.width,s.height),x.clip()),xValuePresent=[],s=0;s<e.dataSeriesIndexes.length;s++){var y=e.dataSeriesIndexes[s],v=this.data[y],_=v.dataPoints;for(v.dataPointIndexes=[],u=0;u<_.length;u++)y=_[u].x.getTime?_[u].x.getTime():_[u].x,v.dataPointIndexes[y]=u,xValuePresent[y]||(c.push(y),xValuePresent[y]=!0);c.sort(o)}for(s=0;s<e.dataSeriesIndexes.length;s++){var y=e.dataSeriesIndexes[s],v=this.data[y],_=v.dataPoints,b=!0,r=v.id;this._eventManager.objectMap[r]={objectType:"dataSeries",dataSeriesIndex:y},r=d(r),x.fillStyle=r,1==_.length&&(g=m),1>g?g=1:g>m&&(g=m);var w=[];if(0<c.length){for(r=v._colorSet[u%v._colorSet.length],t.fillStyle=r,t.strokeStyle=r,t.lineWidth=v.lineThickness,t.setLineDash&&t.setLineDash(p(v.lineDashType,v.lineThickness)),u=0;u<c.length;u++){a=c[u];var k=null,k=0<=v.dataPointIndexes[a]?_[v.dataPointIndexes[a]]:{x:a,y:0};if(!(a<e.axisX.dataInfo.viewPortMin||a>e.axisX.dataInfo.viewPortMax)&&"number"==typeof k.y){n=0!==e.dataPointYSums[a]?100*(k.y/e.dataPointYSums[a]):0,i=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(a-e.axisX.conversionParameters.minimum)+.5<<0,n=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(n-e.axisY.conversionParameters.minimum);var T=h[a]?h[a]:0;if(n-=T,w.push({x:i,y:f-T}),h[a]=f-n,b)t.beginPath(),t.moveTo(i,n),Y&&(x.beginPath(),x.moveTo(i,n)),b=!1;else if(t.lineTo(i,n),Y&&x.lineTo(i,n),0==u%250){for(0<v.lineThickness&&t.stroke();0<w.length;){var M=w.pop();t.lineTo(M.x,M.y),Y&&x.lineTo(M.x,M.y)}t.closePath(),t.globalAlpha=v.fillOpacity,t.fill(),t.globalAlpha=1,t.beginPath(),t.moveTo(i,n),Y&&(x.closePath(),x.fill(),x.beginPath(),x.moveTo(i,n)),w.push({x:i,y:f-T})}if(0<=v.dataPointIndexes[a]){var C=v.dataPointIds[v.dataPointIndexes[a]];this._eventManager.objectMap[C]={id:C,objectType:"dataPoint",dataSeriesIndex:y,dataPointIndex:v.dataPointIndexes[a],x1:i,y1:n}}0<=v.dataPointIndexes[a]&&0!==k.markerSize&&(0<k.markerSize||0<v.markerSize)&&(a=v.getMarkerProperties(u,i,n,t),l.push(a),markerColor=d(C),Y&&l.push({x:i,y:n,ctx:x,type:a.type,size:a.size,color:markerColor,borderColor:markerColor,borderThickness:a.borderThickness})),(k.indexLabel||v.indexLabel||k.indexLabelFormatter||v.indexLabelFormatter)&&this._indexLabels.push({chartType:"stackedArea100",dataPoint:k,dataSeries:v,point:{x:i,y:n},direction:0<=_[u].y?1:-1,color:r})}}for(0<v.lineThickness&&t.stroke();0<w.length;)M=w.pop(),t.lineTo(M.x,M.y),Y&&x.lineTo(M.x,M.y);t.closePath(),t.globalAlpha=v.fillOpacity,t.fill(),t.globalAlpha=1,t.beginPath(),t.moveTo(i,n),Y&&(x.closePath(),x.fill(),x.beginPath(),x.moveTo(i,n))}delete v.dataPointIndexes}return re.drawMarkers(l),t.restore(),Y&&x.restore(),{source:t,dest:this.plotArea.ctx,animationCallback:ae.xClipAnimation,easingFunction:ae.easing.linear,animationBase:0}}},T.prototype.renderBubble=function(e){var t=e.targetCanvasCtx||this.plotArea.ctx,i=e.dataSeriesIndexes.length;if(!(0>=i)){var n,a,r=this.plotArea,s=0,o=this.dataPointMaxWidth?this.dataPointMaxWidth:.15*this.width<<0,s=e.axisX.dataInfo.minDiff,i=.9*(r.width/Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)*Math.abs(s)/i)<<0;t.save(),Y&&this._eventManager.ghostCtx.save(),t.beginPath(),t.rect(r.x1,r.y1,r.width,r.height),t.clip(),Y&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip());for(var l=-(1/0),h=1/0,c=0;c<e.dataSeriesIndexes.length;c++)for(var u=e.dataSeriesIndexes[c],p=this.data[u],f=p.dataPoints,m=0,s=0;s<f.length;s++)n=n=f[s].getTime?f[s].x.getTime():f[s].x,n<e.axisX.dataInfo.viewPortMin||n>e.axisX.dataInfo.viewPortMax||"undefined"==typeof f[s].z||(m=f[s].z,m>l&&(l=m),h>m&&(h=m));for(var g=25*Math.PI,r=Math.max(Math.pow(.25*Math.min(r.height,r.width)/2,2)*Math.PI,g),c=0;c<e.dataSeriesIndexes.length;c++)if(u=e.dataSeriesIndexes[c],p=this.data[u],f=p.dataPoints,1==f.length&&(i=o),1>i?i=1:i>o&&(i=o),0<f.length)for(t.strokeStyle="#4572A7 ",s=0;s<f.length;s++)if(n=n=f[s].getTime?f[s].x.getTime():f[s].x,!(n<e.axisX.dataInfo.viewPortMin||n>e.axisX.dataInfo.viewPortMax)&&"number"==typeof f[s].y){n=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(n-e.axisX.conversionParameters.minimum)+.5<<0,a=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(f[s].y-e.axisY.conversionParameters.minimum)+.5<<0;var m=f[s].z,x=2*Math.max(Math.sqrt((l===h?r/2:g+(r-g)/(l-h)*(m-h))/Math.PI)<<0,1),m=p.getMarkerProperties(s,t);m.size=x,t.globalAlpha=p.fillOpacity,re.drawMarker(n,a,t,m.type,m.size,m.color,m.borderColor,m.borderThickness),t.globalAlpha=1;var y=p.dataPointIds[s];this._eventManager.objectMap[y]={id:y,objectType:"dataPoint",dataSeriesIndex:u,dataPointIndex:s,x1:n,y1:a,size:x},x=d(y),Y&&re.drawMarker(n,a,this._eventManager.ghostCtx,m.type,m.size,x,x,m.borderThickness),(f[s].indexLabel||p.indexLabel||f[s].indexLabelFormatter||p.indexLabelFormatter)&&this._indexLabels.push({chartType:"bubble",dataPoint:f[s],dataSeries:p,point:{x:n,y:a},direction:1,bounds:{x1:n-m.size/2,y1:a-m.size/2,x2:n+m.size/2,y2:a+m.size/2},color:null})}return t.restore(),Y&&this._eventManager.ghostCtx.restore(),{source:t,dest:this.plotArea.ctx,animationCallback:ae.fadeInAnimation,easingFunction:ae.easing.easeInQuad,animationBase:0}}},T.prototype.renderScatter=function(e){var t=e.targetCanvasCtx||this.plotArea.ctx,i=e.dataSeriesIndexes.length;if(!(0>=i)){var n,a,r=this.plotArea,s=0,o=this.dataPointMaxWidth?this.dataPointMaxWidth:.15*this.width<<0,s=e.axisX.dataInfo.minDiff,i=.9*(r.width/Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)*Math.abs(s)/i)<<0;t.save(),Y&&this._eventManager.ghostCtx.save(),t.beginPath(),t.rect(r.x1,r.y1,r.width,r.height),t.clip(),Y&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip());for(var l=0;l<e.dataSeriesIndexes.length;l++){var h=e.dataSeriesIndexes[l],c=this.data[h],u=c.dataPoints;if(1==u.length&&(i=o),1>i?i=1:i>o&&(i=o),0<u.length){t.strokeStyle="#4572A7 ",Math.pow(.3*Math.min(r.height,r.width)/2,2);for(var p=0,f=0,s=0;s<u.length;s++)if(n=n=u[s].getTime?u[s].x.getTime():u[s].x,!(n<e.axisX.dataInfo.viewPortMin||n>e.axisX.dataInfo.viewPortMax)&&"number"==typeof u[s].y){n=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(n-e.axisX.conversionParameters.minimum)+.5<<0,a=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(u[s].y-e.axisY.conversionParameters.minimum)+.5<<0;var m=c.getMarkerProperties(s,n,a,t);t.globalAlpha=c.fillOpacity,re.drawMarker(m.x,m.y,m.ctx,m.type,m.size,m.color,m.borderColor,m.borderThickness),t.globalAlpha=1,Math.sqrt((p-n)*(p-n)+(f-a)*(f-a))<Math.min(m.size,5)&&u.length>Math.min(this.plotArea.width,this.plotArea.height)||(p=c.dataPointIds[s],this._eventManager.objectMap[p]={id:p,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:s,x1:n,y1:a},p=d(p),Y&&re.drawMarker(m.x,m.y,this._eventManager.ghostCtx,m.type,m.size,p,p,m.borderThickness),(u[s].indexLabel||c.indexLabel||u[s].indexLabelFormatter||c.indexLabelFormatter)&&this._indexLabels.push({chartType:"scatter",dataPoint:u[s],dataSeries:c,point:{x:n,y:a},direction:1,bounds:{x1:n-m.size/2,y1:a-m.size/2,x2:n+m.size/2,y2:a+m.size/2},color:null}),p=n,f=a)}}}return t.restore(),Y&&this._eventManager.ghostCtx.restore(),{source:t,dest:this.plotArea.ctx,animationCallback:ae.fadeInAnimation,easingFunction:ae.easing.easeInQuad,animationBase:0}}},T.prototype.renderCandlestick=function(e){var t=e.targetCanvasCtx||this.plotArea.ctx,i=this._eventManager.ghostCtx;if(!(0>=e.dataSeriesIndexes.length)){var n,a,r,s,o,l,h=null,h=this.plotArea,c=0,c=this.dataPointMinWidth?this.dataPointMinWidth:this.dataPointWidth?this.dataPointWidth:1;n=this.dataPointMaxWidth?this.dataPointMaxWidth:this.dataPointWidth?this.dataPointWidth:.015*this.width;var u=e.axisX.dataInfo.minDiff;isFinite(u)||(u=.3*Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)),u=this.dataPointWidth?this.dataPointWidth:.7*h.width/Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)*Math.abs(u)<<0,this.dataPointMaxWidth&&c>n&&(c=Math.min(this.dataPointWidth?this.dataPointWidth:1/0,n)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&c>n&&(n=Math.max(this.dataPointWidth?this.dataPointWidth:-(1/0),c)),c>u&&(u=c),u>n&&(u=n),t.save(),Y&&i.save(),t.beginPath(),t.rect(h.x1,h.y1,h.width,h.height),t.clip(),Y&&(i.rect(h.x1,h.y1,h.width,h.height),i.clip());for(var p=0;p<e.dataSeriesIndexes.length;p++){var f=e.dataSeriesIndexes[p],m=this.data[f],g=m.dataPoints;if(0<g.length)for(var x=u>5&&m.bevelEnabled?!0:!1,c=0;c<g.length;c++)if(l=g[c].getTime?g[c].x.getTime():g[c].x,!(l<e.axisX.dataInfo.viewPortMin||l>e.axisX.dataInfo.viewPortMax)&&null!==g[c].y&&g[c].y.length&&"number"==typeof g[c].y[0]&&"number"==typeof g[c].y[1]&&"number"==typeof g[c].y[2]&&"number"==typeof g[c].y[3]){n=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(l-e.axisX.conversionParameters.minimum)+.5<<0,a=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(g[c].y[0]-e.axisY.conversionParameters.minimum)+.5<<0,r=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(g[c].y[1]-e.axisY.conversionParameters.minimum)+.5<<0,s=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(g[c].y[2]-e.axisY.conversionParameters.minimum)+.5<<0,o=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(g[c].y[3]-e.axisY.conversionParameters.minimum)+.5<<0;var y=n-u/2<<0,v=y+u<<0,h=g[c].color?g[c].color:m._colorSet[0],_=Math.round(Math.max(1,.15*u)),b=0===_%2?0:.5,w=m.dataPointIds[c];this._eventManager.objectMap[w]={id:w,objectType:"dataPoint",dataSeriesIndex:f,dataPointIndex:c,x1:y,y1:a,x2:v,y2:r,x3:n,y3:s,x4:n,y4:o,borderThickness:_,color:h},t.strokeStyle=h,t.beginPath(),t.lineWidth=_,i.lineWidth=Math.max(_,4),"candlestick"===m.type?(t.moveTo(n-b,r),t.lineTo(n-b,Math.min(a,o)),t.stroke(),t.moveTo(n-b,Math.max(a,o)),t.lineTo(n-b,s),t.stroke(),ie(t,y,Math.min(a,o),v,Math.max(a,o),g[c].y[0]<=g[c].y[3]?m.risingColor:h,_,h,x,x,!1,!1,m.fillOpacity),Y&&(h=d(w),i.strokeStyle=h,i.moveTo(n-b,r),i.lineTo(n-b,Math.min(a,o)),i.stroke(),i.moveTo(n-b,Math.max(a,o)),i.lineTo(n-b,s),i.stroke(),ie(i,y,Math.min(a,o),v,Math.max(a,o),h,0,null,!1,!1,!1,!1))):"ohlc"===m.type&&(t.moveTo(n-b,r),t.lineTo(n-b,s),t.stroke(),t.beginPath(),t.moveTo(n,a),t.lineTo(y,a),t.stroke(),t.beginPath(),t.moveTo(n,o),t.lineTo(v,o),t.stroke(),Y&&(h=d(w),i.strokeStyle=h,i.moveTo(n-b,r),i.lineTo(n-b,s),i.stroke(),i.beginPath(),i.moveTo(n,a),i.lineTo(y,a),i.stroke(),i.beginPath(),i.moveTo(n,o),i.lineTo(v,o),i.stroke())),(g[c].indexLabel||m.indexLabel||g[c].indexLabelFormatter||m.indexLabelFormatter)&&this._indexLabels.push({chartType:m.type,dataPoint:g[c],dataSeries:m,point:{x:y+(v-y)/2,y:r},direction:1,bounds:{x1:y,y1:Math.min(r,s),x2:v,y2:Math.max(r,s)},color:h})}}return t.restore(),Y&&i.restore(),{source:t,dest:this.plotArea.ctx,animationCallback:ae.fadeInAnimation,easingFunction:ae.easing.easeInQuad,animationBase:0}}},T.prototype.renderRangeColumn=function(e){var t=e.targetCanvasCtx||this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var i,n,a=null,r=this.plotArea,s=0,s=this.dataPointMinWidth?this.dataPointMinWidth:this.dataPointWidth?this.dataPointWidth:1;i=this.dataPointMaxWidth?this.dataPointMaxWidth:this.dataPointWidth?this.dataPointWidth:.03*this.width;var o=e.axisX.dataInfo.minDiff;isFinite(o)||(o=.3*Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)),o=this.dataPointWidth?this.dataPointWidth:.9*(r.width/Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)*Math.abs(o)/e.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&s>i&&(s=Math.min(this.dataPointWidth?this.dataPointWidth:1/0,i)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&s>i&&(i=Math.max(this.dataPointWidth?this.dataPointWidth:-(1/0),s)),s>o&&(o=s),o>i&&(o=i),t.save(),Y&&this._eventManager.ghostCtx.save(),t.beginPath(),t.rect(r.x1,r.y1,r.width,r.height),t.clip(),Y&&(this._eventManager.ghostCtx.rect(r.x1,r.y1,r.width,r.height),this._eventManager.ghostCtx.clip());for(var l=0;l<e.dataSeriesIndexes.length;l++){var h=e.dataSeriesIndexes[l],c=this.data[h],u=c.dataPoints;if(0<u.length)for(var p=o>5&&c.bevelEnabled?!0:!1,s=0;s<u.length;s++)if(n=u[s].getTime?u[s].x.getTime():u[s].x,!(n<e.axisX.dataInfo.viewPortMin||n>e.axisX.dataInfo.viewPortMax)&&null!==u[s].y&&u[s].y.length&&"number"==typeof u[s].y[0]&&"number"==typeof u[s].y[1]){a=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(n-e.axisX.conversionParameters.minimum)+.5<<0,r=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(u[s].y[0]-e.axisY.conversionParameters.minimum)+.5<<0,i=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(u[s].y[1]-e.axisY.conversionParameters.minimum)+.5<<0;var f=a-e.plotType.totalDataSeries*o/2+(e.previousDataSeriesCount+l)*o<<0,m=f+o<<0,a=u[s].color?u[s].color:c._colorSet[s%c._colorSet.length];if(r>i){var g=r,r=i;i=g}g=c.dataPointIds[s],this._eventManager.objectMap[g]={id:g,objectType:"dataPoint",dataSeriesIndex:h,dataPointIndex:s,x1:f,y1:r,x2:m,y2:i},ie(t,f,r,m,i,a,0,a,p,p,!1,!1,c.fillOpacity),a=d(g),Y&&ie(this._eventManager.ghostCtx,f,r,m,i,a,0,null,!1,!1,!1,!1),(u[s].indexLabel||c.indexLabel||u[s].indexLabelFormatter||c.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeColumn",dataPoint:u[s],dataSeries:c,indexKeyword:0,point:{x:f+(m-f)/2,y:u[s].y[1]>=u[s].y[0]?i:r},direction:u[s].y[1]>=u[s].y[0]?-1:1,bounds:{x1:f,y1:Math.min(r,i),x2:m,y2:Math.max(r,i)},color:a}),this._indexLabels.push({chartType:"rangeColumn",dataPoint:u[s],dataSeries:c,indexKeyword:1,point:{x:f+(m-f)/2,y:u[s].y[1]>=u[s].y[0]?r:i},direction:u[s].y[1]>=u[s].y[0]?1:-1,bounds:{x1:f,y1:Math.min(r,i),x2:m,y2:Math.max(r,i)},color:a}))}}return t.restore(),Y&&this._eventManager.ghostCtx.restore(),{source:t,dest:this.plotArea.ctx,animationCallback:ae.fadeInAnimation,easingFunction:ae.easing.easeInQuad,animationBase:0}}},T.prototype.renderRangeBar=function(e){var t=e.targetCanvasCtx||this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var i,n,a,r=null,s=this.plotArea,o=0,o=this.dataPointMinWidth?this.dataPointMinWidth:this.dataPointWidth?this.dataPointWidth:1;i=this.dataPointMaxWidth?this.dataPointMaxWidth:this.dataPointWidth?this.dataPointWidth:Math.min(.15*this.height,.9*(this.plotArea.height/e.plotType.totalDataSeries))<<0;var l=e.axisX.dataInfo.minDiff;isFinite(l)||(l=.3*Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)),l=this.dataPointWidth?this.dataPointWidth:.9*(s.height/Math.abs(e.axisX.viewportMaximum-e.axisX.viewportMinimum)*Math.abs(l)/e.plotType.totalDataSeries)<<0,this.dataPointMaxWidth&&o>i&&(o=Math.min(this.dataPointWidth?this.dataPointWidth:1/0,i)),!this.dataPointMaxWidth&&this.dataPointMinWidth&&o>i&&(i=Math.max(this.dataPointWidth?this.dataPointWidth:-(1/0),o)),o>l&&(l=o),l>i&&(l=i),t.save(),Y&&this._eventManager.ghostCtx.save(),t.beginPath(),t.rect(s.x1,s.y1,s.width,s.height),t.clip(),Y&&(this._eventManager.ghostCtx.rect(s.x1,s.y1,s.width,s.height),this._eventManager.ghostCtx.clip());for(var h=0;h<e.dataSeriesIndexes.length;h++){var c=e.dataSeriesIndexes[h],u=this.data[c],p=u.dataPoints;if(0<p.length){var f=l>5&&u.bevelEnabled?!0:!1;for(t.strokeStyle="#4572A7 ",o=0;o<p.length;o++)if(a=p[o].getTime?p[o].x.getTime():p[o].x,!(a<e.axisX.dataInfo.viewPortMin||a>e.axisX.dataInfo.viewPortMax)&&null!==p[o].y&&p[o].y.length&&"number"==typeof p[o].y[0]&&"number"==typeof p[o].y[1]){s=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(p[o].y[0]-e.axisY.conversionParameters.minimum)+.5<<0,i=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(p[o].y[1]-e.axisY.conversionParameters.minimum)+.5<<0,n=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(a-e.axisX.conversionParameters.minimum)+.5<<0,n=n-e.plotType.totalDataSeries*l/2+(e.previousDataSeriesCount+h)*l<<0;var m=n+l<<0;s>i&&(r=s,s=i,i=r),r=p[o].color?p[o].color:u._colorSet[o%u._colorSet.length],ie(t,s,n,i,m,r,0,null,f,!1,!1,!1,u.fillOpacity),r=u.dataPointIds[o],this._eventManager.objectMap[r]={id:r,objectType:"dataPoint",dataSeriesIndex:c,dataPointIndex:o,x1:s,y1:n,x2:i,y2:m},r=d(r),Y&&ie(this._eventManager.ghostCtx,s,n,i,m,r,0,null,!1,!1,!1,!1),(p[o].indexLabel||u.indexLabel||p[o].indexLabelFormatter||u.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeBar",dataPoint:p[o],dataSeries:u,indexKeyword:0,point:{x:p[o].y[1]>=p[o].y[0]?s:i,y:n+(m-n)/2},direction:p[o].y[1]>=p[o].y[0]?-1:1,bounds:{x1:Math.min(s,i),y1:n,x2:Math.max(s,i),y2:m},color:r}),this._indexLabels.push({chartType:"rangeBar",dataPoint:p[o],dataSeries:u,indexKeyword:1,point:{x:p[o].y[1]>=p[o].y[0]?i:s,y:n+(m-n)/2},direction:p[o].y[1]>=p[o].y[0]?1:-1,bounds:{x1:Math.min(s,i),y1:n,x2:Math.max(s,i),y2:m},color:r}))}}}return t.restore(),Y&&this._eventManager.ghostCtx.restore(),{source:t,dest:this.plotArea.ctx,animationCallback:ae.fadeInAnimation,easingFunction:ae.easing.easeInQuad,animationBase:0}}},T.prototype.renderRangeArea=function(e){function t(){if(y){var e=null;0<l.lineThickness&&i.stroke();for(var t=s.length-1;t>=0;t--)e=s[t],i.lineTo(e.x,e.y),n.lineTo(e.x,e.y);if(i.closePath(),i.globalAlpha=l.fillOpacity,i.fill(),i.globalAlpha=1,n.fill(),0<l.lineThickness){for(i.beginPath(),i.moveTo(e.x,e.y),t=0;t<s.length;t++)e=s[t],i.lineTo(e.x,e.y);i.stroke()}i.beginPath(),i.moveTo(c,u),n.beginPath(),n.moveTo(c,u),y={x:c,y:u},s=[],s.push({x:c,y:f})}}var i=e.targetCanvasCtx||this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var n=this._eventManager.ghostCtx,a=[],r=this.plotArea;for(i.save(),Y&&n.save(),i.beginPath(),i.rect(r.x1,r.y1,r.width,r.height),i.clip(),Y&&(n.beginPath(),n.rect(r.x1,r.y1,r.width,r.height),n.clip()),r=0;r<e.dataSeriesIndexes.length;r++){var s=[],o=e.dataSeriesIndexes[r],l=this.data[o],h=l.dataPoints,a=l.id;this._eventManager.objectMap[a]={objectType:"dataSeries",dataSeriesIndex:o},a=d(a),n.fillStyle=a;var c,u,f,m,a=[],g=!0,x=0,y=null;if(0<h.length){var v=l._colorSet[x%l._colorSet.length];i.fillStyle=v,i.strokeStyle=v,i.lineWidth=l.lineThickness,i.setLineDash&&i.setLineDash(p(l.lineDashType,l.lineThickness));for(var _=!0;x<h.length;x++)if(m=h[x].x.getTime?h[x].x.getTime():h[x].x,!(m<e.axisX.dataInfo.viewPortMin||m>e.axisX.dataInfo.viewPortMax))if(null!==h[x].y&&h[x].y.length&&"number"==typeof h[x].y[0]&&"number"==typeof h[x].y[1]){if(c=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(m-e.axisX.conversionParameters.minimum)+.5<<0,u=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(h[x].y[0]-e.axisY.conversionParameters.minimum)+.5<<0,f=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(h[x].y[1]-e.axisY.conversionParameters.minimum)+.5<<0,g||_?(i.beginPath(),i.moveTo(c,u),y={x:c,y:u},s=[],s.push({x:c,y:f}),Y&&(n.beginPath(),n.moveTo(c,u)),_=g=!1):(i.lineTo(c,u),s.push({x:c,y:f}),Y&&n.lineTo(c,u),0==x%250&&t()),m=l.dataPointIds[x],this._eventManager.objectMap[m]={id:m,objectType:"dataPoint",dataSeriesIndex:o,dataPointIndex:x,x1:c,y1:u,y2:f},0!==h[x].markerSize&&(0<h[x].markerSize||0<l.markerSize)){var b=l.getMarkerProperties(x,c,f,i);a.push(b);var w=d(m);Y&&a.push({x:c,y:f,ctx:n,type:b.type,size:b.size,color:w,borderColor:w,borderThickness:b.borderThickness}),b=l.getMarkerProperties(x,c,u,i),a.push(b),w=d(m),Y&&a.push({x:c,y:u,ctx:n,type:b.type,size:b.size,color:w,borderColor:w,borderThickness:b.borderThickness})}(h[x].indexLabel||l.indexLabel||h[x].indexLabelFormatter||l.indexLabelFormatter)&&(this._indexLabels.push({chartType:"rangeArea",dataPoint:h[x],dataSeries:l,indexKeyword:0,point:{x:c,y:u},direction:h[x].y[0]<=h[x].y[1]?-1:1,color:v}),this._indexLabels.push({chartType:"rangeArea",dataPoint:h[x],dataSeries:l,indexKeyword:1,point:{x:c,y:f},direction:h[x].y[0]<=h[x].y[1]?1:-1,color:v}))}else t(),_=!0;t(),re.drawMarkers(a)}}return i.restore(),Y&&this._eventManager.ghostCtx.restore(),{source:i,dest:this.plotArea.ctx,animationCallback:ae.xClipAnimation,easingFunction:ae.easing.linear,animationBase:0}}},T.prototype.renderRangeSplineArea=function(e){function t(){var e=M(m,2);if(0<e.length){i.beginPath(),i.moveTo(e[0].x,e[0].y),Y&&(n.beginPath(),n.moveTo(e[0].x,e[0].y));for(var t=0;t<e.length-3;t+=3)i.bezierCurveTo(e[t+1].x,e[t+1].y,e[t+2].x,e[t+2].y,e[t+3].x,e[t+3].y),Y&&n.bezierCurveTo(e[t+1].x,e[t+1].y,e[t+2].x,e[t+2].y,e[t+3].x,e[t+3].y);for(0<o.lineThickness&&i.stroke(),e=M(g,2),i.lineTo(g[g.length-1].x,g[g.length-1].y),t=e.length-1;t>2;t-=3)i.bezierCurveTo(e[t-1].x,e[t-1].y,e[t-2].x,e[t-2].y,e[t-3].x,e[t-3].y),Y&&n.bezierCurveTo(e[t-1].x,e[t-1].y,e[t-2].x,e[t-2].y,e[t-3].x,e[t-3].y);if(i.closePath(),i.globalAlpha=o.fillOpacity,i.fill(),i.globalAlpha=1,0<o.lineThickness){for(i.beginPath(),i.moveTo(g[g.length-1].x,g[g.length-1].y),t=e.length-1;t>2;t-=3)i.bezierCurveTo(e[t-1].x,e[t-1].y,e[t-2].x,e[t-2].y,e[t-3].x,e[t-3].y),Y&&n.bezierCurveTo(e[t-1].x,e[t-1].y,e[t-2].x,e[t-2].y,e[t-3].x,e[t-3].y);i.stroke()}i.beginPath(),Y&&(n.closePath(),n.fill())}}var i=e.targetCanvasCtx||this.plotArea.ctx;if(!(0>=e.dataSeriesIndexes.length)){var n=this._eventManager.ghostCtx,a=[],r=this.plotArea;for(i.save(),Y&&n.save(),i.beginPath(),i.rect(r.x1,r.y1,r.width,r.height),i.clip(),Y&&(n.beginPath(),n.rect(r.x1,r.y1,r.width,r.height),n.clip()),r=0;r<e.dataSeriesIndexes.length;r++){var s=e.dataSeriesIndexes[r],o=this.data[s],l=o.dataPoints,a=o.id;this._eventManager.objectMap[a]={objectType:"dataSeries",dataSeriesIndex:s},a=d(a),n.fillStyle=a;var h,c,u,a=[],f=0,m=[],g=[];if(0<l.length){for(color=o._colorSet[f%o._colorSet.length],i.fillStyle=color,i.strokeStyle=color,i.lineWidth=o.lineThickness,i.setLineDash&&i.setLineDash(p(o.lineDashType,o.lineThickness));f<l.length;f++)if(h=l[f].x.getTime?l[f].x.getTime():l[f].x,!(h<e.axisX.dataInfo.viewPortMin||h>e.axisX.dataInfo.viewPortMax))if(null!==l[f].y&&l[f].y.length&&"number"==typeof l[f].y[0]&&"number"==typeof l[f].y[1]){h=e.axisX.conversionParameters.reference+e.axisX.conversionParameters.pixelPerUnit*(h-e.axisX.conversionParameters.minimum)+.5<<0,c=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(l[f].y[0]-e.axisY.conversionParameters.minimum)+.5<<0,u=e.axisY.conversionParameters.reference+e.axisY.conversionParameters.pixelPerUnit*(l[f].y[1]-e.axisY.conversionParameters.minimum)+.5<<0;var x=o.dataPointIds[f];if(this._eventManager.objectMap[x]={id:x,objectType:"dataPoint",dataSeriesIndex:s,dataPointIndex:f,x1:h,y1:c,y2:u},m[m.length]={x:h,y:c},g[g.length]={x:h,y:u},0!==l[f].markerSize&&(0<l[f].markerSize||0<o.markerSize)){var y=o.getMarkerProperties(f,h,c,i);a.push(y);var v=d(x);Y&&a.push({x:h,y:c,ctx:n,type:y.type,size:y.size,color:v,borderColor:v,borderThickness:y.borderThickness}),y=o.getMarkerProperties(f,h,u,i),a.push(y),v=d(x),Y&&a.push({x:h,y:u,ctx:n,type:y.type,size:y.size,color:v,borderColor:v,borderThickness:y.borderThickness})}(l[f].indexLabel||o.indexLabel||l[f].indexLabelFormatter||o.indexLabelFormatter)&&(this._indexLabels.push({chartType:"splineArea",dataPoint:l[f],dataSeries:o,indexKeyword:0,point:{x:h,y:c},direction:l[f].y[0]<=l[f].y[1]?-1:1,color:color}),this._indexLabels.push({chartType:"splineArea",dataPoint:l[f],dataSeries:o,indexKeyword:1,point:{x:h,y:u},direction:l[f].y[0]<=l[f].y[1]?1:-1,color:color}))}else f>0&&(t(),m=[],g=[]);t(),re.drawMarkers(a)}}return i.restore(),Y&&this._eventManager.ghostCtx.restore(),{source:i,dest:this.plotArea.ctx,animationCallback:ae.xClipAnimation,easingFunction:ae.easing.linear,animationBase:0}}};var ne=function(e,t,i,n,a,r,s,o,l){if("undefined"==typeof o&&(o=1),!Y){var d=Number((s%(2*Math.PI)).toFixed(8));Number((r%(2*Math.PI)).toFixed(8))===d&&(s-=1e-4)}e.save(),e.globalAlpha=o,"pie"===a?(e.beginPath(),e.moveTo(t.x,t.y),e.arc(t.x,t.y,i,r,s,!1),e.fillStyle=n,e.strokeStyle="white",e.lineWidth=2,e.closePath(),e.fill()):"doughnut"===a&&(e.beginPath(),e.arc(t.x,t.y,i,r,s,!1),e.arc(t.x,t.y,l*i,s,r,!0),e.closePath(),e.fillStyle=n,e.strokeStyle="white",e.lineWidth=2,e.fill()),e.globalAlpha=1,e.restore()};T.prototype.renderPie=function(e){function t(){if(d&&h){var e=0,t=0,i=0,n=0;for(w=0;w<h.length;w++){var a=h[w],r=d.dataPointIds[w],s={id:r,objectType:"dataPoint",dataPointIndex:w,dataSeriesIndex:0};m.push(s);var o={percent:null,total:null},u=null,o=l.getPercentAndTotal(d,a);(d.indexLabelFormatter||a.indexLabelFormatter)&&(u={chart:l._options,dataSeries:d,dataPoint:a,total:o.total,percent:o.percent}),o=a.indexLabelFormatter?a.indexLabelFormatter(u):a.indexLabel?l.replaceKeywordsWithValue(a.indexLabel,a,d,w):d.indexLabelFormatter?d.indexLabelFormatter(u):d.indexLabel?l.replaceKeywordsWithValue(d.indexLabel,a,d,w):a.label?a.label:"",l._eventManager.objectMap[r]=s,s.center={x:_.x,y:_.y},s.y=a.y,s.radius=k,s.percentInnerRadius=M,s.indexLabelText=o,s.indexLabelPlacement=d.indexLabelPlacement,s.indexLabelLineColor=a.indexLabelLineColor?a.indexLabelLineColor:d.indexLabelLineColor?d.indexLabelLineColor:a.color?a.color:d._colorSet[w%d._colorSet.length],s.indexLabelLineThickness=c(a.indexLabelLineThickness)?d.indexLabelLineThickness:a.indexLabelLineThickness,s.indexLabelLineDashType=a.indexLabelLineDashType?a.indexLabelLineDashType:d.indexLabelLineDashType,s.indexLabelFontColor=a.indexLabelFontColor?a.indexLabelFontColor:d.indexLabelFontColor,s.indexLabelFontStyle=a.indexLabelFontStyle?a.indexLabelFontStyle:d.indexLabelFontStyle,s.indexLabelFontWeight=a.indexLabelFontWeight?a.indexLabelFontWeight:d.indexLabelFontWeight,s.indexLabelFontSize=a.indexLabelFontSize?a.indexLabelFontSize:d.indexLabelFontSize,s.indexLabelFontFamily=a.indexLabelFontFamily?a.indexLabelFontFamily:d.indexLabelFontFamily,s.indexLabelBackgroundColor=a.indexLabelBackgroundColor?a.indexLabelBackgroundColor:d.indexLabelBackgroundColor?d.indexLabelBackgroundColor:null,s.indexLabelMaxWidth=a.indexLabelMaxWidth?a.indexLabelMaxWidth:d.indexLabelMaxWidth?d.indexLabelMaxWidth:.33*f.width,s.indexLabelWrap="undefined"!=typeof a.indexLabelWrap?a.indexLabelWrap:d.indexLabelWrap,s.startAngle=0===w?d.startAngle?d.startAngle/180*Math.PI:0:m[w-1].endAngle,s.startAngle=(s.startAngle+2*Math.PI)%(2*Math.PI),s.endAngle=s.startAngle+2*Math.PI/b*Math.abs(a.y),a=(s.endAngle+s.startAngle)/2,a=(a+2*Math.PI)%(2*Math.PI),s.midAngle=a,s.midAngle>Math.PI/2-y&&s.midAngle<Math.PI/2+y?((0===e||m[i].midAngle>s.midAngle)&&(i=w),e++):s.midAngle>3*Math.PI/2-y&&s.midAngle<3*Math.PI/2+y&&((0===t||m[n].midAngle>s.midAngle)&&(n=w),t++),s.hemisphere=a>Math.PI/2&&a<=3*Math.PI/2?"left":"right",s.indexLabelTextBlock=new P(l.plotArea.ctx,{fontSize:s.indexLabelFontSize,fontFamily:s.indexLabelFontFamily,fontColor:s.indexLabelFontColor,fontStyle:s.indexLabelFontStyle,fontWeight:s.indexLabelFontWeight,horizontalAlign:"left",backgroundColor:s.indexLabelBackgroundColor,maxWidth:s.indexLabelMaxWidth,maxHeight:s.indexLabelWrap?5*s.indexLabelFontSize:1.5*s.indexLabelFontSize,text:s.indexLabelText,padding:0,textBaseline:"top"}),s.indexLabelTextBlock.measureText()}for(r=a=0,o=!1,w=0;w<h.length;w++)s=m[(i+w)%h.length],e>1&&s.midAngle>Math.PI/2-y&&s.midAngle<Math.PI/2+y&&(e/2>=a&&!o?(s.hemisphere="right",a++):(s.hemisphere="left",o=!0));for(o=!1,w=0;w<h.length;w++)s=m[(n+w)%h.length],t>1&&s.midAngle>3*Math.PI/2-y&&s.midAngle<3*Math.PI/2+y&&(t/2>=r&&!o?(s.hemisphere="left",r++):(s.hemisphere="right",o=!0))}}function i(e){var t=l.plotArea.ctx;for(t.clearRect(f.x1,f.y1,f.width,f.height),t.fillStyle=l.backgroundColor,t.fillRect(f.x1,f.y1,f.width,f.height),t=0;t<h.length;t++){var i=m[t].startAngle,n=m[t].endAngle;if(n>i){var a=.07*k*Math.cos(m[t].midAngle),r=.07*k*Math.sin(m[t].midAngle),s=!1;h[t].exploded?(1e-9<Math.abs(m[t].center.x-(_.x+a))||1e-9<Math.abs(m[t].center.y-(_.y+r)))&&(m[t].center.x=_.x+a*e,m[t].center.y=_.y+r*e,s=!0):(0<Math.abs(m[t].center.x-_.x)||0<Math.abs(m[t].center.y-_.y))&&(m[t].center.x=_.x+a*(1-e),m[t].center.y=_.y+r*(1-e),s=!0),s&&(a={},a.dataSeries=d,a.dataPoint=d.dataPoints[t],a.index=t,l._toolTip.highlightObjects([a])),ne(l.plotArea.ctx,m[t].center,m[t].radius,h[t].color?h[t].color:d._colorSet[t%d._colorSet.length],d.type,i,n,d.fillOpacity,m[t].percentInnerRadius)}}for(e=l.plotArea.ctx,e.save(),e.fillStyle="black",e.strokeStyle="grey",e.textBaseline="middle",e.lineJoin="round",t=t=0;t<h.length;t++)i=m[t],i.indexLabelText&&(i.indexLabelTextBlock.y-=i.indexLabelTextBlock.height/2,n=0,n="left"===i.hemisphere?"inside"!==d.indexLabelPlacement?-(i.indexLabelTextBlock.width+u):-i.indexLabelTextBlock.width/2:"inside"!==d.indexLabelPlacement?u:-i.indexLabelTextBlock.width/2,i.indexLabelTextBlock.x+=n,i.indexLabelTextBlock.render(!0),i.indexLabelTextBlock.x-=n,i.indexLabelTextBlock.y+=i.indexLabelTextBlock.height/2,"inside"!==i.indexLabelPlacement&&0<i.indexLabelLineThickness&&(n=i.center.x+k*Math.cos(i.midAngle),a=i.center.y+k*Math.sin(i.midAngle),e.strokeStyle=i.indexLabelLineColor,e.lineWidth=i.indexLabelLineThickness,e.setLineDash&&e.setLineDash(p(i.indexLabelLineDashType,i.indexLabelLineThickness)),e.beginPath(),e.moveTo(n,a),e.lineTo(i.indexLabelTextBlock.x,i.indexLabelTextBlock.y),e.lineTo(i.indexLabelTextBlock.x+("left"===i.hemisphere?-u:u),i.indexLabelTextBlock.y),e.stroke()),e.lineJoin="miter");e.save()}function n(e,t){var i=0,i=e.indexLabelTextBlock.y-e.indexLabelTextBlock.height/2,n=e.indexLabelTextBlock.y+e.indexLabelTextBlock.height/2,a=t.indexLabelTextBlock.y-t.indexLabelTextBlock.height/2,r=t.indexLabelTextBlock.y+t.indexLabelTextBlock.height/2;return i=t.indexLabelTextBlock.y>e.indexLabelTextBlock.y?a-n:i-r}function a(e){for(var t=null,i=1;i<h.length;i++){if(t=(e+i+m.length)%m.length,m[t].hemisphere!==m[e].hemisphere){t=null;break}if(m[t].indexLabelText&&t!==e&&(0>n(m[t],m[e])||("right"===m[e].hemisphere?m[t].indexLabelTextBlock.y>=m[e].indexLabelTextBlock.y:m[t].indexLabelTextBlock.y<=m[e].indexLabelTextBlock.y)))break;t=null}return t}function r(e,t,i){if(i=(i||0)+1,i>1e3)return 0;t=t||0;var s=0,o=_.y-1*indexLabelRadius,l=_.y+1*indexLabelRadius;if(e>=0&&e<h.length){var d=m[e];if(0>t&&d.indexLabelTextBlock.y<o||t>0&&d.indexLabelTextBlock.y>l)return 0;var c=0,u=0,u=c=c=0;for(0>t?d.indexLabelTextBlock.y-d.indexLabelTextBlock.height/2>o&&d.indexLabelTextBlock.y-d.indexLabelTextBlock.height/2+t<o&&(t=-(o-(d.indexLabelTextBlock.y-d.indexLabelTextBlock.height/2+t))):d.indexLabelTextBlock.y+d.indexLabelTextBlock.height/2<o&&d.indexLabelTextBlock.y+d.indexLabelTextBlock.height/2+t>l&&(t=d.indexLabelTextBlock.y+d.indexLabelTextBlock.height/2+t-l),t=d.indexLabelTextBlock.y+t,o=0,o="right"===d.hemisphere?_.x+Math.sqrt(Math.pow(indexLabelRadius,2)-Math.pow(t-_.y,2)):_.x-Math.sqrt(Math.pow(indexLabelRadius,2)-Math.pow(t-_.y,2)),u=_.x+k*Math.cos(d.midAngle),c=_.y+k*Math.sin(d.midAngle),c=Math.sqrt(Math.pow(o-u,2)+Math.pow(t-c,2)),u=Math.acos(k/indexLabelRadius),c=Math.acos((indexLabelRadius*indexLabelRadius+k*k-c*c)/(2*k*indexLabelRadius)),t=u>c?t-d.indexLabelTextBlock.y:0,o=null,l=1;l<h.length;l++){if(o=(e-l+m.length)%m.length,m[o].hemisphere!==m[e].hemisphere){o=null;break}if(m[o].indexLabelText&&m[o].hemisphere===m[e].hemisphere&&o!==e&&(0>n(m[o],m[e])||("right"===m[e].hemisphere?m[o].indexLabelTextBlock.y<=m[e].indexLabelTextBlock.y:m[o].indexLabelTextBlock.y>=m[e].indexLabelTextBlock.y)))break;o=null}u=o,c=a(e),l=o=0,0>t?(l="right"===d.hemisphere?u:c,s=t,null!==l&&(u=-t,t=d.indexLabelTextBlock.y-d.indexLabelTextBlock.height/2-(m[l].indexLabelTextBlock.y+m[l].indexLabelTextBlock.height/2),g>t-u&&(o=-u,l=r(l,o,i+1),+l.toFixed(v)>+o.toFixed(v)&&(s=t>g?-(t-g):-(u-(l-o)))))):t>0&&(l="right"===d.hemisphere?c:u,s=t,null!==l&&(u=t,t=m[l].indexLabelTextBlock.y-m[l].indexLabelTextBlock.height/2-(d.indexLabelTextBlock.y+d.indexLabelTextBlock.height/2),g>t-u&&(o=u,l=r(l,o,i+1),+l.toFixed(v)<+o.toFixed(v)&&(s=t>g?t-g:u-(o-l))))),s&&(i=d.indexLabelTextBlock.y+s,t=0,t="right"===d.hemisphere?_.x+Math.sqrt(Math.pow(indexLabelRadius,2)-Math.pow(i-_.y,2)):_.x-Math.sqrt(Math.pow(indexLabelRadius,2)-Math.pow(i-_.y,2)),d.midAngle>Math.PI/2-y&&d.midAngle<Math.PI/2+y?(o=(e-1+m.length)%m.length,o=m[o],e=m[(e+1+m.length)%m.length],"left"===d.hemisphere&&"right"===o.hemisphere&&t>o.indexLabelTextBlock.x?t=o.indexLabelTextBlock.x-15:"right"===d.hemisphere&&"left"===e.hemisphere&&t<e.indexLabelTextBlock.x&&(t=e.indexLabelTextBlock.x+15)):d.midAngle>3*Math.PI/2-y&&d.midAngle<3*Math.PI/2+y&&(o=(e-1+m.length)%m.length,o=m[o],e=m[(e+1+m.length)%m.length],"right"===d.hemisphere&&"left"===o.hemisphere&&t<o.indexLabelTextBlock.x?t=o.indexLabelTextBlock.x+15:"left"===d.hemisphere&&"right"===e.hemisphere&&t>e.indexLabelTextBlock.x&&(t=e.indexLabelTextBlock.x-15)),
d.indexLabelTextBlock.y=i,d.indexLabelTextBlock.x=t,d.indexLabelAngle=Math.atan2(d.indexLabelTextBlock.y-_.y,d.indexLabelTextBlock.x-_.x))}return s}function s(){var e=l.plotArea.ctx;e.fillStyle="grey",e.strokeStyle="grey",e.font="16px Arial",e.textBaseline="middle";for(var t=e=0,i=0,s=!0,t=0;10>t&&(1>t||i>0);t++){if((d.radius||!d.radius&&"undefined"!=typeof d.innerRadius&&null!==d.innerRadius&&T>=k-i)&&(s=!1),s&&(k-=i),i=0,"inside"!==d.indexLabelPlacement){for(indexLabelRadius=k*x,e=0;e<h.length;e++){var o=m[e];o.indexLabelTextBlock.x=_.x+indexLabelRadius*Math.cos(o.midAngle),o.indexLabelTextBlock.y=_.y+indexLabelRadius*Math.sin(o.midAngle),o.indexLabelAngle=o.midAngle,o.radius=k,o.percentInnerRadius=M}for(var c,p,e=0;e<h.length;e++){var o=m[e],y=a(e);if(null!==y){c=m[e],p=m[y];var b=0,b=n(c,p)-g;if(0>b){for(var w=p=0,C=0;C<h.length;C++)C!==e&&m[C].hemisphere===o.hemisphere&&(m[C].indexLabelTextBlock.y<o.indexLabelTextBlock.y?p++:w++);p=b/(p+w||1)*w;var w=-1*(b-p),S=C=0;"right"===o.hemisphere?(C=r(e,p),w=-1*(b-C),S=r(y,w),+S.toFixed(v)<+w.toFixed(v)&&+C.toFixed(v)<=+p.toFixed(v)&&r(e,-(w-S))):(C=r(y,p),w=-1*(b-C),S=r(e,w),+S.toFixed(v)<+w.toFixed(v)&&+C.toFixed(v)<=+p.toFixed(v)&&r(y,-(w-S)))}}}}else for(e=0;e<h.length;e++)o=m[e],indexLabelRadius="pie"===d.type?.7*k:.8*k,y=_.x+indexLabelRadius*Math.cos(o.midAngle),p=_.y+indexLabelRadius*Math.sin(o.midAngle),o.indexLabelTextBlock.x=y,o.indexLabelTextBlock.y=p;for(e=0;e<h.length;e++)o=m[e],y=o.indexLabelTextBlock.measureText(),0!==y.height&&0!==y.width&&(y=y=0,"right"===o.hemisphere?(y=f.x2-(o.indexLabelTextBlock.x+o.indexLabelTextBlock.width+u),y*=-1):y=f.x1-(o.indexLabelTextBlock.x-o.indexLabelTextBlock.width-u),y>0&&(!s&&o.indexLabelText&&(p="right"===o.hemisphere?f.x2-o.indexLabelTextBlock.x:o.indexLabelTextBlock.x-f.x1,.3*o.indexLabelTextBlock.maxWidth>p?o.indexLabelText="":o.indexLabelTextBlock.maxWidth=.85*p,.3*o.indexLabelTextBlock.maxWidth<p&&(o.indexLabelTextBlock.x-="right"===o.hemisphere?2:-2)),Math.abs(o.indexLabelTextBlock.y-o.indexLabelTextBlock.height/2-_.y)<k||Math.abs(o.indexLabelTextBlock.y+o.indexLabelTextBlock.height/2-_.y)<k)&&(y/=Math.abs(Math.cos(o.indexLabelAngle)),y>9&&(y*=.3),y>i&&(i=y)),y=y=0,0<o.indexLabelAngle&&o.indexLabelAngle<Math.PI?(y=f.y2-(o.indexLabelTextBlock.y+o.indexLabelTextBlock.height/2+5),y*=-1):y=f.y1-(o.indexLabelTextBlock.y-o.indexLabelTextBlock.height/2-5),y>0&&(!s&&o.indexLabelText&&(p=0<o.indexLabelAngle&&o.indexLabelAngle<Math.PI?-1:1,0===r(e,y*p)&&r(e,2*p)),Math.abs(o.indexLabelTextBlock.x-_.x)<k&&(y/=Math.abs(Math.sin(o.indexLabelAngle)),y>9&&(y*=.3),y>i&&(i=y))));var P=function(e,t,i){for(var n=[],a=0;n.push(m[t]),t!==i;t=(t+1+h.length)%h.length);for(n.sort(function(e,t){return e.y-t.y}),t=0;t<n.length&&(i=n[t],.7*e>a);t++)a+=i.indexLabelTextBlock.height,i.indexLabelTextBlock.text="",i.indexLabelText="",i.indexLabelTextBlock.measureText()};!function(){for(var e=-1,t=-1,i=0,r=!1,s=0;s<h.length;s++)if(r=!1,c=m[s],c.indexLabelText){var o=a(s);if(null!==o){var l=m[o];b=0,b=n(c,l);var d;if(d=0>b){d=c.indexLabelTextBlock.x;var p=c.indexLabelTextBlock.y-c.indexLabelTextBlock.height/2,f=c.indexLabelTextBlock.y+c.indexLabelTextBlock.height/2,g=l.indexLabelTextBlock.y-l.indexLabelTextBlock.height/2,x=l.indexLabelTextBlock.x+l.indexLabelTextBlock.width,y=l.indexLabelTextBlock.y+l.indexLabelTextBlock.height/2;d=c.indexLabelTextBlock.x+c.indexLabelTextBlock.width<l.indexLabelTextBlock.x-u||d>x+u||p>y+u||g-u>f?!1:!0}d?(0>e&&(e=s),o!==e&&(t=o,i+=-b),0===s%Math.max(h.length/10,3)&&(r=!0)):r=!0,r&&i>0&&e>=0&&t>=0&&(P(i,e,t),t=e=-1,i=0)}}i>0&&P(i,e,t)}()}}function o(){if(l.plotArea.layoutManager.reset(),l._title&&(l._title.dockInsidePlotArea||"center"===l._title.horizontalAlign&&"center"===l._title.verticalAlign)&&l._title.render(),l.subtitles)for(var e=0;e<l.subtitles.length;e++){var t=l.subtitles[e];(t.dockInsidePlotArea||"center"===t.horizontalAlign&&"center"===t.verticalAlign)&&t.render()}l.legend&&(l.legend.dockInsidePlotArea||"center"===l.legend.horizontalAlign&&"center"===l.legend.verticalAlign)&&l.legend.render()}var l=this;if(!(0>=e.dataSeriesIndexes.length)){var d=this.data[e.dataSeriesIndexes[0]],h=d.dataPoints,u=10,f=this.plotArea,m=[],g=2,x=1.3,y=20/180*Math.PI,v=6,_={x:(f.x2+f.x1)/2,y:(f.y2+f.y1)/2},b=0;e=!1;for(var w=0;w<h.length;w++)b+=Math.abs(h[w].y),!e&&"undefined"!=typeof h[w].indexLabel&&null!==h[w].indexLabel&&0<h[w].indexLabel.toString().length&&(e=!0),!e&&"undefined"!=typeof h[w].label&&null!==h[w].label&&0<h[w].label.toString().length&&(e=!0);if(0!==b){e=e||"undefined"!=typeof d.indexLabel&&null!==d.indexLabel&&0<d.indexLabel.toString().length;var k="inside"!==d.indexLabelPlacement&&e?.75*Math.min(f.width,f.height)/2:.92*Math.min(f.width,f.height)/2;d.radius&&(k=C(d.radius,k));var T="undefined"!=typeof d.innerRadius&&null!==d.innerRadius?C(d.innerRadius,k):.7*k,M=Math.min(T/k,(k-1)/k);this.pieDoughnutClickHandler=function(e){l.isAnimating||(e=e.dataPoint,e.exploded=e.exploded?!1:!0,1<this.dataPoints.length&&l._animator.animate(0,500,function(e){i(e),o()}))},t(),s(),s(),s(),s(),this.disableToolTip=!0,this._animator.animate(0,this.animatedRender?this.animationDuration:0,function(e){var t=l.plotArea.ctx;for(t.clearRect(f.x1,f.y1,f.width,f.height),t.fillStyle=l.backgroundColor,t.fillRect(f.x1,f.y1,f.width,f.height),e=m[0].startAngle+2*Math.PI*e,t=0;t<h.length;t++){var i=0===t?m[t].startAngle:n,n=i+(m[t].endAngle-m[t].startAngle),a=!1;n>e&&(n=e,a=!0);var r=h[t].color?h[t].color:d._colorSet[t%d._colorSet.length];if(n>i&&ne(l.plotArea.ctx,m[t].center,m[t].radius,r,d.type,i,n,d.fillOpacity,m[t].percentInnerRadius),a)break}o()},function(){l.disableToolTip=!1,l._animator.animate(0,l.animatedRender?500:0,function(e){i(e),o()})})}}},T.prototype.animationRequestId=null,T.prototype.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),T.prototype.cancelRequestAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,S.prototype.registerSpace=function(e,t){"top"===e?this._topOccupied+=t.height:"bottom"===e?this._bottomOccupied+=t.height:"left"===e?this._leftOccupied+=t.width:"right"===e&&(this._rightOccupied+=t.width)},S.prototype.unRegisterSpace=function(e,t){"top"===e?this._topOccupied-=t.height:"bottom"===e?this._bottomOccupied-=t.height:"left"===e?this._leftOccupied-=t.width:"right"===e&&(this._rightOccupied-=t.width)},S.prototype.getFreeSpace=function(){return{x1:this._x1+this._leftOccupied,y1:this._y1+this._topOccupied,x2:this._x2-this._rightOccupied,y2:this._y2-this._bottomOccupied,width:this._x2-this._x1-this._rightOccupied-this._leftOccupied,height:this._y2-this._y1-this._bottomOccupied-this._topOccupied}},S.prototype.reset=function(){this._rightOccupied=this._leftOccupied=this._bottomOccupied=this._topOccupied=this._padding},e(P,k),P.prototype.render=function(e){e&&this.ctx.save();var t=this.ctx.font;this.ctx.textBaseline=this.textBaseline;var i=0;this._isDirty&&this.measureText(this.ctx),this.ctx.translate(this.x,this.y+i),"middle"===this.textBaseline&&(i=-this._lineHeight/2),this.ctx.font=this._getFontString(),this.ctx.rotate(Math.PI/180*this.angle);var n=0,a=this.padding,r=null;for((0<this.borderThickness&&this.borderColor||this.backgroundColor)&&this.ctx.roundRect(0,i,this.width,this.height,this.cornerRadius,this.borderThickness,this.backgroundColor,this.borderColor),this.ctx.fillStyle=this.fontColor,i=0;i<this._wrappedText.lines.length;i++)r=this._wrappedText.lines[i],"right"===this.horizontalAlign?n=this.width-r.width-this.padding:"left"===this.horizontalAlign?n=this.padding:"center"===this.horizontalAlign&&(n=(this.width-2*this.padding)/2-r.width/2+this.padding),this.ctx.fillText(r.text,n,a),a+=r.height;this.ctx.font=t,e&&this.ctx.restore()},P.prototype.setText=function(e){this.text=e,this._isDirty=!0,this._wrappedText=null},P.prototype.measureText=function(){if(null===this.maxWidth)throw"Please set maxWidth and height for TextBlock";return this._wrapText(this.ctx),this._isDirty=!1,{width:this.width,height:this.height}},P.prototype._getLineWithWidth=function(e,t,i){if(e=String(e),!e)return{text:"",width:0};var n=i=0,a=e.length-1,r=1/0;for(this.ctx.font=this._getFontString();a>=n;){var r=Math.floor((n+a)/2),s=e.substr(0,r+1);if(i=this.ctx.measureText(s).width,t>i)n=r+1;else{if(!(i>t))break;a=r-1}}return i>t&&1<s.length&&(s=s.substr(0,s.length-1),i=this.ctx.measureText(s).width),t=!0,(s.length===e.length||" "===e[s.length])&&(t=!1),t&&(e=s.split(" "),1<e.length&&e.pop(),s=e.join(" "),i=this.ctx.measureText(s).width),{text:s,width:i}},P.prototype._wrapText=function(){var e=new String(r(String(this.text))),t=[],i=this.ctx.font,n=0,a=0;for(this.ctx.font=this._getFontString();0<e.length;){var s=this.maxHeight-2*this.padding,o=this._getLineWithWidth(e,this.maxWidth-2*this.padding,!1);o.height=this._lineHeight,t.push(o),a=Math.max(a,o.width),n+=o.height,e=r(e.slice(o.text.length,e.length)),s&&n>s&&(o=t.pop(),n-=o.height)}this._wrappedText={lines:t,width:a,height:n},this.width=a+2*this.padding,this.height=n+2*this.padding,this.ctx.font=i},P.prototype._getFontString=function(){var e;e=""+(this.fontStyle?this.fontStyle+" ":""),e+=this.fontWeight?this.fontWeight+" ":"",e+=this.fontSize?this.fontSize+"px ":"";var t=this.fontFamily?this.fontFamily+"":"";return!Y&&t&&(t=t.split(",")[0],"'"!==t[0]&&'"'!==t[0]&&(t="'"+t+"'")),e+=t},e(A,k),A.prototype.render=function(){if(this.text){var e,t,i=this.dockInsidePlotArea?this.chart.plotArea:this.chart,n=i.layoutManager.getFreeSpace(),a=n.x1,r=n.y1,s=0,o=0,l=this.chart._menuButton&&this.chart.exportEnabled&&"top"===this.verticalAlign?22:0;"top"===this.verticalAlign||"bottom"===this.verticalAlign?(null===this.maxWidth&&(this.maxWidth=n.width-4-l*("center"===this.horizontalAlign?2:1)),o=.5*n.height-this.margin-2,s=0):"center"===this.verticalAlign&&("left"===this.horizontalAlign||"right"===this.horizontalAlign?(null===this.maxWidth&&(this.maxWidth=n.height-4),o=.5*n.width-this.margin-2):"center"===this.horizontalAlign&&(null===this.maxWidth&&(this.maxWidth=n.width-4),o=.5*n.height-4)),this.wrap||(o=Math.min(o,Math.max(1.5*this.fontSize,this.fontSize+2.5*this.padding)));var o=new P(this.ctx,{fontSize:this.fontSize,fontFamily:this.fontFamily,fontColor:this.fontColor,fontStyle:this.fontStyle,fontWeight:this.fontWeight,horizontalAlign:this.horizontalAlign,verticalAlign:this.verticalAlign,borderColor:this.borderColor,borderThickness:this.borderThickness,backgroundColor:this.backgroundColor,maxWidth:this.maxWidth,maxHeight:o,cornerRadius:this.cornerRadius,text:this.text,padding:this.padding,textBaseline:"top"}),d=o.measureText();"top"===this.verticalAlign||"bottom"===this.verticalAlign?("top"===this.verticalAlign?(r=n.y1+2,t="top"):"bottom"===this.verticalAlign&&(r=n.y2-2-d.height,t="bottom"),"left"===this.horizontalAlign?a=n.x1+2:"center"===this.horizontalAlign?a=n.x1+n.width/2-d.width/2:"right"===this.horizontalAlign&&(a=n.x2-2-d.width-l),e=this.horizontalAlign,this.width=d.width,this.height=d.height):"center"===this.verticalAlign&&("left"===this.horizontalAlign?(a=n.x1+2,r=n.y2-2-(this.maxWidth/2-d.width/2),s=-90,t="left",this.width=d.height,this.height=d.width):"right"===this.horizontalAlign?(a=n.x2-2,r=n.y1+2+(this.maxWidth/2-d.width/2),s=90,t="right",this.width=d.height,this.height=d.width):"center"===this.horizontalAlign&&(r=i.y1+(i.height/2-d.height/2),a=i.x1+(i.width/2-d.width/2),t="center",this.width=d.width,this.height=d.height),e="center"),o.x=a,o.y=r,o.angle=s,o.horizontalAlign=e,o.render(!0),i.layoutManager.registerSpace(t,{width:this.width+("left"===t||"right"===t?this.margin+2:0),height:this.height+("top"===t||"bottom"===t?this.margin+2:0)}),this.bounds={x1:a,y1:r,x2:a+this.width,y2:r+this.height},this.ctx.textBaseline="top"}},e(j,k),j.prototype.render=A.prototype.render,e(D,k),D.prototype.render=function(){var e=this.dockInsidePlotArea?this.chart.plotArea:this.chart,t=e.layoutManager.getFreeSpace(),i=null,n=0,a=0,r=0,s=0,o=[],l=[];"top"===this.verticalAlign||"bottom"===this.verticalAlign?(this.orientation="horizontal",i=this.verticalAlign,r=null!==this.maxWidth?this.maxWidth:.7*t.width,s=null!==this.maxHeight?this.maxHeight:.5*t.height):"center"===this.verticalAlign&&(this.orientation="vertical",i=this.horizontalAlign,r=null!==this.maxWidth?this.maxWidth:.5*t.width,s=null!==this.maxHeight?this.maxHeight:.7*t.height);for(var h=0;h<this.dataSeries.length;h++){var c=this.dataSeries[h];if("pie"!==c.type&&"doughnut"!==c.type&&"funnel"!==c.type){var u=c.legendMarkerType?c.legendMarkerType:"line"!==c.type&&"stepLine"!==c.type&&"spline"!==c.type&&"scatter"!==c.type&&"bubble"!==c.type||!c.markerType?I.getDefaultLegendMarker(c.type):c.markerType,p=c.legendText?c.legendText:this.itemTextFormatter?this.itemTextFormatter({chart:this.chart._publicChartReference,legend:this._options,dataSeries:c,dataPoint:null}):c.name,f=c.legendMarkerColor?c.legendMarkerColor:c.markerColor?c.markerColor:c._colorSet[0],m=c.markerSize||"line"!==c.type&&"stepLine"!==c.type&&"spline"!==c.type?.6*this.lineHeight:0,g=c.legendMarkerBorderColor?c.legendMarkerBorderColor:c.markerBorderColor,x=c.legendMarkerBorderThickness?c.legendMarkerBorderThickness:c.markerBorderThickness?Math.max(1,Math.round(.2*m)):0,p=this.chart.replaceKeywordsWithValue(p,c.dataPoints[0],c,h),u={markerType:u,markerColor:f,text:p,textBlock:null,chartType:c.type,markerSize:m,lineColor:c._colorSet[0],dataSeriesIndex:c.index,dataPointIndex:null,markerBorderColor:g,markerBorderThickness:x};o.push(u)}else for(var y=0;y<c.dataPoints.length;y++){var v=c.dataPoints[y],u=v.legendMarkerType?v.legendMarkerType:c.legendMarkerType?c.legendMarkerType:I.getDefaultLegendMarker(c.type),p=v.legendText?v.legendText:c.legendText?c.legendText:this.itemTextFormatter?this.itemTextFormatter({chart:this.chart._publicChartReference,legend:this._options,dataSeries:c,dataPoint:v}):v.name?v.name:"DataPoint: "+(y+1),f=v.legendMarkerColor?v.legendMarkerColor:c.legendMarkerColor?c.legendMarkerColor:v.color?v.color:c.color?c.color:c._colorSet[y%c._colorSet.length],m=.6*this.lineHeight,g=v.legendMarkerBorderColor?v.legendMarkerBorderColor:c.legendMarkerBorderColor?c.legendMarkerBorderColor:v.markerBorderColor?v.markerBorderColor:c.markerBorderColor,x=v.legendMarkerBorderThickness?v.legendMarkerBorderThickness:c.legendMarkerBorderThickness?c.legendMarkerBorderThickness:v.markerBorderThickness||c.markerBorderThickness?Math.max(1,Math.round(.2*m)):0,p=this.chart.replaceKeywordsWithValue(p,v,c,y),u={markerType:u,markerColor:f,text:p,textBlock:null,chartType:c.type,markerSize:m,dataSeriesIndex:h,dataPointIndex:y,markerBorderColor:g,markerBorderThickness:x};(v.showInLegend||c.showInLegend&&!1!==v.showInLegend)&&o.push(u)}}if(!0===this.reversed&&o.reverse(),0<o.length){for(c=null,y=p=v=0,p=null!==this.itemWidth?null!==this.itemMaxWidth?Math.min(this.itemWidth,this.itemMaxWidth,r):Math.min(this.itemWidth,r):null!==this.itemMaxWidth?Math.min(this.itemMaxWidth,r):r,m=0===m?.6*this.lineHeight:m,p-=m+.1*this.horizontalSpacing,h=0;h<o.length;h++)u=o[h],("line"===u.chartType||"spline"===u.chartType||"stepLine"===u.chartType)&&(p-=.2*this.lineHeight),0>=s||"undefined"==typeof s||0>=p||"undefined"==typeof p||("horizontal"===this.orientation?(u.textBlock=new P(this.ctx,{x:0,y:0,maxWidth:p,maxHeight:this.itemWrap?s:this.lineHeight,angle:0,text:u.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"top"}),u.textBlock.measureText(),null!==this.itemWidth&&(u.textBlock.width=this.itemWidth-(m+.1*this.horizontalSpacing+("line"===u.chartType||"spline"===u.chartType||"stepLine"===u.chartType?.2*this.lineHeight:0))),(!c||c.width+Math.round(u.textBlock.width+.1*this.horizontalSpacing+m+(0===c.width?0:this.horizontalSpacing)+("line"===u.chartType||"spline"===u.chartType||"stepLine"===u.chartType?.2*this.lineHeight:0))>r)&&(c={items:[],width:0},l.push(c),this.height+=y,y=0),y=Math.max(y,u.textBlock.height)):(u.textBlock=new P(this.ctx,{x:0,y:0,maxWidth:p,maxHeight:!0===this.itemWrap?s:1.5*this.fontSize,angle:0,text:u.text,horizontalAlign:"left",fontSize:this.fontSize,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontColor:this.fontColor,fontStyle:this.fontStyle,textBaseline:"top"}),u.textBlock.measureText(),null!==this.itemWidth&&(u.textBlock.width=this.itemWidth-(m+.1*this.horizontalSpacing+("line"===u.chartType||"spline"===u.chartType||"stepLine"===u.chartType?.2*this.lineHeight:0))),this.height<=s?(c={items:[],width:0},l.push(c)):(c=l[v],v=(v+1)%l.length),this.height+=u.textBlock.height),u.textBlock.x=c.width,u.textBlock.y=0,c.width+=Math.round(u.textBlock.width+.1*this.horizontalSpacing+m+(0===c.width?0:this.horizontalSpacing)+("line"===u.chartType||"spline"===u.chartType||"stepLine"===u.chartType?.2*this.lineHeight:0)),c.items.push(u),this.width=Math.max(c.width,this.width));this.height=!1===this.itemWrap?l.length*this.lineHeight:this.height+y,this.height=Math.min(s,this.height),this.width=Math.min(r,this.width)}for("top"===this.verticalAlign?(a="left"===this.horizontalAlign?t.x1:"right"===this.horizontalAlign?t.x2-this.width:t.x1+t.width/2-this.width/2,n=t.y1):"center"===this.verticalAlign?(a="left"===this.horizontalAlign?t.x1:"right"===this.horizontalAlign?t.x2-this.width:t.x1+t.width/2-this.width/2,n=t.y1+t.height/2-this.height/2):"bottom"===this.verticalAlign&&(a="left"===this.horizontalAlign?t.x1:"right"===this.horizontalAlign?t.x2-this.width:t.x1+t.width/2-this.width/2,n=t.y2-this.height),this.items=o,h=0;h<this.items.length;h++)u=o[h],u.id=++this.chart._eventManager.lastObjectId,this.chart._eventManager.objectMap[u.id]={id:u.id,objectType:"legendItem",legendItemIndex:h,dataSeriesIndex:u.dataSeriesIndex,dataPointIndex:u.dataPointIndex};for(h=t=0;h<l.length;h++){for(c=l[h],o=y=0;o<c.items.length;o++)u=c.items[o],p=u.textBlock.x+a+(0===o?.2*m:this.horizontalSpacing),f=n+t,v=p,this.chart.data[u.dataSeriesIndex].visible||(this.ctx.globalAlpha=.5),this.ctx.save(),this.ctx.rect(a,n,r,s),this.ctx.clip(),("line"===u.chartType||"stepLine"===u.chartType||"spline"===u.chartType)&&(this.ctx.strokeStyle=u.lineColor,this.ctx.lineWidth=Math.ceil(this.lineHeight/8),this.ctx.beginPath(),this.ctx.moveTo(p-.1*this.lineHeight,f+this.lineHeight/2),this.ctx.lineTo(p+.7*this.lineHeight,f+this.lineHeight/2),this.ctx.stroke(),v-=.1*this.lineHeight),re.drawMarker(p+m/2,f+this.lineHeight/2,this.ctx,u.markerType,u.markerSize,u.markerColor,u.markerBorderColor,u.markerBorderThickness),u.textBlock.x=p+.1*this.horizontalSpacing+m,("line"===u.chartType||"stepLine"===u.chartType||"spline"===u.chartType)&&(u.textBlock.x+=.1*this.lineHeight),u.textBlock.y=f,u.textBlock.render(!0),this.ctx.restore(),y=o>0?Math.max(y,u.textBlock.height):u.textBlock.height,this.chart.data[u.dataSeriesIndex].visible||(this.ctx.globalAlpha=1),p=d(u.id),this.ghostCtx.fillStyle=p,this.ghostCtx.beginPath(),this.ghostCtx.fillRect(v,u.textBlock.y,u.textBlock.x+u.textBlock.width-v,u.textBlock.height),u.x1=this.chart._eventManager.objectMap[u.id].x1=v,u.y1=this.chart._eventManager.objectMap[u.id].y1=u.textBlock.y,u.x2=this.chart._eventManager.objectMap[u.id].x2=u.textBlock.x+u.textBlock.width,u.y2=this.chart._eventManager.objectMap[u.id].y2=u.textBlock.y+u.textBlock.height;t+=y}e.layoutManager.registerSpace(i,{width:this.width+2+2,height:this.height+5+5}),this.bounds={x1:a,y1:n,x2:a+this.width,y2:n+this.height}},e(L,k),L.prototype.render=function(){var e=this.chart.layoutManager.getFreeSpace();this.ctx.fillStyle="red",this.ctx.fillRect(e.x1,e.y1,e.x2,e.y2)},e(I,k),I.prototype.getDefaultAxisPlacement=function(){var e=this.type;return"column"===e||"line"===e||"stepLine"===e||"spline"===e||"area"===e||"stepArea"===e||"splineArea"===e||"stackedColumn"===e||"stackedLine"===e||"bubble"===e||"scatter"===e||"stackedArea"===e||"stackedColumn100"===e||"stackedLine100"===e||"stackedArea100"===e||"candlestick"===e||"ohlc"===e||"rangeColumn"===e||"rangeArea"===e||"rangeSplineArea"===e?"normal":"bar"===e||"stackedBar"===e||"stackedBar100"===e||"rangeBar"===e?"xySwapped":"pie"===e||"doughnut"===e||"funnel"===e?"none":(window.console.log("Unknown Chart Type: "+e),null)},I.getDefaultLegendMarker=function(e){return"column"===e||"stackedColumn"===e||"stackedLine"===e||"bar"===e||"stackedBar"===e||"stackedBar100"===e||"bubble"===e||"scatter"===e||"stackedColumn100"===e||"stackedLine100"===e||"stepArea"===e||"candlestick"===e||"ohlc"===e||"rangeColumn"===e||"rangeBar"===e||"rangeArea"===e||"rangeSplineArea"===e?"square":"line"===e||"stepLine"===e||"spline"===e||"pie"===e||"doughnut"===e||"funnel"===e?"circle":"area"===e||"splineArea"===e||"stackedArea"===e||"stackedArea100"===e?"triangle":(window.console.log("Unknown Chart Type: "+e),null)},I.prototype.getDataPointAtX=function(e,t){if(!this.dataPoints||0===this.dataPoints.length)return null;var i={dataPoint:null,distance:1/0,index:NaN},n=null,a=0,r=0,s=1,o=1/0,l=0,d=0,h=0;for("none"!==this.chart.plotInfo.axisPlacement&&(h=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,h=h>0?Math.min(Math.max((this.dataPoints.length-1)/h*(e-this.dataPoints[0].x)>>0,0),this.dataPoints.length):0);;){if(r=s>0?h+a:h-a,r>=0&&r<this.dataPoints.length){var n=this.dataPoints[r],c=Math.abs(n.x-e);if(c<i.distance&&(i.dataPoint=n,i.distance=c,i.index=r),n=Math.abs(n.x-e),o>=n?o=n:s>0?l++:d++,l>1e3&&d>1e3)break}else if(0>h-a&&h+a>=this.dataPoints.length)break;-1===s?(a++,s=1):s=-1}return t||i.dataPoint.x!==e?t&&null!==i.dataPoint?i:null:i},I.prototype.getDataPointAtXY=function(e,t,i){if(!this.dataPoints||0===this.dataPoints.length||e<this.chart.plotArea.x1||e>this.chart.plotArea.x2||t<this.chart.plotArea.y1||t>this.chart.plotArea.y2)return null;i=i||!1;var n=[],a=0,r=0,s=1,o=!1,l=1/0,d=0,h=0,c=0;for("none"!==this.chart.plotInfo.axisPlacement&&(c=this.chart.axisX.getXValueAt({x:e,y:t}),r=this.dataPoints[this.dataPoints.length-1].x-this.dataPoints[0].x,c=r>0?Math.min(Math.max((this.dataPoints.length-1)/r*(c-this.dataPoints[0].x)>>0,0),this.dataPoints.length):0);;){if(r=s>0?c+a:c-a,r>=0&&r<this.dataPoints.length){var u=this.chart._eventManager.objectMap[this.dataPointIds[r]],p=this.dataPoints[r],f=null;if(u){switch(this.type){case"column":case"stackedColumn":case"stackedColumn100":case"bar":case"stackedBar":case"stackedBar100":case"rangeColumn":case"rangeBar":e>=u.x1&&e<=u.x2&&t>=u.y1&&t<=u.y2&&(n.push({dataPoint:p,dataPointIndex:r,dataSeries:this,distance:Math.min(Math.abs(u.x1-e),Math.abs(u.x2-e),Math.abs(u.y1-t),Math.abs(u.y2-t))}),o=!0);break;case"line":case"stepLine":case"spline":case"area":case"stepArea":case"stackedArea":case"stackedArea100":case"splineArea":case"scatter":var m=g("markerSize",p,this)||4,x=i?20:m,f=Math.sqrt(Math.pow(u.x1-e,2)+Math.pow(u.y1-t,2));x>=f&&n.push({dataPoint:p,dataPointIndex:r,dataSeries:this,distance:f}),r=Math.abs(u.x1-e),l>=r?l=r:s>0?d++:h++,m/2>=f&&(o=!0);break;case"rangeArea":case"rangeSplineArea":m=g("markerSize",p,this)||4,x=i?20:m,f=Math.min(Math.sqrt(Math.pow(u.x1-e,2)+Math.pow(u.y1-t,2)),Math.sqrt(Math.pow(u.x1-e,2)+Math.pow(u.y2-t,2))),x>=f&&n.push({dataPoint:p,dataPointIndex:r,dataSeries:this,distance:f}),r=Math.abs(u.x1-e),l>=r?l=r:s>0?d++:h++,m/2>=f&&(o=!0);break;case"bubble":m=u.size,f=Math.sqrt(Math.pow(u.x1-e,2)+Math.pow(u.y1-t,2)),m/2>=f&&(n.push({dataPoint:p,dataPointIndex:r,dataSeries:this,distance:f}),o=!0);break;case"pie":case"doughnut":m=u.center,x="doughnut"===this.type?u.percentInnerRadius*u.radius:0,f=Math.sqrt(Math.pow(m.x-e,2)+Math.pow(m.y-t,2)),f<u.radius&&f>x&&(f=Math.atan2(t-m.y,e-m.x),0>f&&(f+=2*Math.PI),f=Number(((180*(f/Math.PI)%360+360)%360).toFixed(12)),m=Number(((180*(u.startAngle/Math.PI)%360+360)%360).toFixed(12)),x=Number(((180*(u.endAngle/Math.PI)%360+360)%360).toFixed(12)),0===x&&1<u.endAngle&&(x=360),m>=x&&0!==p.y&&(x+=360,m>f&&(f+=360)),f>m&&x>f&&(n.push({dataPoint:p,dataPointIndex:r,dataSeries:this,distance:0}),o=!0));break;case"candlestick":(e>=u.x1-u.borderThickness/2&&e<=u.x2+u.borderThickness/2&&t>=u.y2-u.borderThickness/2&&t<=u.y3+u.borderThickness/2||Math.abs(u.x2-e+u.x1-e)<u.borderThickness&&t>=u.y1&&t<=u.y4)&&(n.push({dataPoint:p,dataPointIndex:r,dataSeries:this,distance:Math.min(Math.abs(u.x1-e),Math.abs(u.x2-e),Math.abs(u.y2-t),Math.abs(u.y3-t))}),o=!0);break;case"ohlc":(Math.abs(u.x2-e+u.x1-e)<u.borderThickness&&t>=u.y2&&t<=u.y3||e>=u.x1&&e<=(u.x2+u.x1)/2&&t>=u.y1-u.borderThickness/2&&t<=u.y1+u.borderThickness/2||e>=(u.x1+u.x2)/2&&e<=u.x2&&t>=u.y4-u.borderThickness/2&&t<=u.y4+u.borderThickness/2)&&(n.push({dataPoint:p,dataPointIndex:r,dataSeries:this,distance:Math.min(Math.abs(u.x1-e),Math.abs(u.x2-e),Math.abs(u.y2-t),Math.abs(u.y3-t))}),o=!0)}if(o||d>1e3&&h>1e3)break}}else if(0>c-a&&c+a>=this.dataPoints.length)break;-1===s?(a++,s=1):s=-1}for(e=null,t=0;t<n.length;t++)e?n[t].distance<=e.distance&&(e=n[t]):e=n[t];return e},I.prototype.getMarkerProperties=function(e,t,i,n){var a=this.dataPoints;return{x:t,y:i,ctx:n,type:a[e].markerType?a[e].markerType:this.markerType,size:a[e].markerSize?a[e].markerSize:this.markerSize,color:a[e].markerColor?a[e].markerColor:this.markerColor?this.markerColor:a[e].color?a[e].color:this.color?this.color:this._colorSet[e%this._colorSet.length],borderColor:a[e].markerBorderColor?a[e].markerBorderColor:this.markerBorderColor?this.markerBorderColor:null,borderThickness:a[e].markerBorderThickness?a[e].markerBorderThickness:this.markerBorderThickness?this.markerBorderThickness:null}},e(F,k),F.prototype.createLabels=function(){var e,t,i=0,a=0,r=0,i=0;if("bottom"===this._position||"top"===this._position?(i=this.lineCoordinates.width/Math.abs(this.viewportMaximum-this.viewportMinimum)*this.interval,a=this.labelAutoFit?"undefined"==typeof this._options.labelMaxWidth?.9*i>>0:this.labelMaxWidth:"undefined"==typeof this._options.labelMaxWidth?.7*this.chart.width>>0:this.labelMaxWidth,r="undefined"==typeof this._options.labelWrap||this.labelWrap?.5*this.chart.height>>0:1.5*this.labelFontSize):("left"===this._position||"right"===this._position)&&(i=this.lineCoordinates.height/Math.abs(this.viewportMaximum-this.viewportMinimum)*this.interval,a=this.labelAutoFit?"undefined"==typeof this._options.labelMaxWidth?.3*this.chart.width>>0:this.labelMaxWidth:"undefined"==typeof this._options.labelMaxWidth?.5*this.chart.width>>0:this.labelMaxWidth,r="undefined"==typeof this._options.labelWrap||this.labelWrap?2*i>>0:1.5*this.labelFontSize),"axisX"===this.type&&"dateTime"===this.chart.plotInfo.axisXValueType)for(t=n(new Date(this.viewportMaximum),this.interval,this.intervalType),i=this.intervalStartPosition;t>i;n(i,this.interval,this.intervalType))e=i.getTime(),e=this.labelFormatter?this.labelFormatter({chart:this.chart._publicChartReference,axis:this._options,value:i,label:this.labels[i]?this.labels[i]:null}):"axisX"===this.type&&this.labels[e]?this.labels[e]:q(i,this.valueFormatString,this.chart._cultureInfo),e=new P(this.ctx,{x:0,y:0,maxWidth:a,maxHeight:r,angle:this.labelAngle,text:this.prefix+e+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle"}),this._labels.push({position:i.getTime(),textBlock:e,effectiveHeight:null});else{if(t=this.viewportMaximum,this.labels&&this.labels.length){e=Math.ceil(this.interval);for(var s=Math.ceil(this.intervalStartPosition),o=!1,i=s;i<this.viewportMaximum;i+=e){if(!this.labels[i]){o=!1;break}o=!0}o&&(this.interval=e,this.intervalStartPosition=s)}for(i=this.intervalStartPosition;t>=i;i=parseFloat((i+this.interval).toFixed(14)))e=this.labelFormatter?this.labelFormatter({chart:this.chart._publicChartReference,axis:this._options,value:i,label:this.labels[i]?this.labels[i]:null}):"axisX"===this.type&&this.labels[i]?this.labels[i]:G(i,this.valueFormatString,this.chart._cultureInfo),e=new P(this.ctx,{x:0,y:0,maxWidth:a,maxHeight:r,angle:this.labelAngle,text:this.prefix+e+this.suffix,horizontalAlign:"left",fontSize:this.labelFontSize,fontFamily:this.labelFontFamily,fontWeight:this.labelFontWeight,fontColor:this.labelFontColor,fontStyle:this.labelFontStyle,textBaseline:"middle",borderThickness:0}),this._labels.push({position:i,textBlock:e,effectiveHeight:null})}for(i=0;i<this.stripLines.length;i++)t=this.stripLines[i],e=new P(this.ctx,{x:0,y:0,backgroundColor:t.labelBackgroundColor,maxWidth:a,maxHeight:r,angle:this.labelAngle,text:t.labelFormatter?t.labelFormatter({chart:this.chart._publicChartReference,axis:this,stripLine:t}):t.label,horizontalAlign:"left",fontSize:t.labelFontSize,fontFamily:t.labelFontFamily,fontWeight:t.labelFontWeight,fontColor:t._options.labelFontColor||t.color,fontStyle:t.labelFontStyle,textBaseline:"middle",borderThickness:0}),this._labels.push({position:t.value,textBlock:e,effectiveHeight:null,stripLine:t})},F.prototype.createLabelsAndCalculateWidth=function(){var e=0;if(this._labels=[],"left"===this._position||"right"===this._position)for(this.createLabels(),i=0;i<this._labels.length;i++){var t=this._labels[i].textBlock.measureText(),n=0,n=0===this.labelAngle?t.width:t.width*Math.cos(Math.PI/180*Math.abs(this.labelAngle))+t.height/2*Math.sin(Math.PI/180*Math.abs(this.labelAngle));n>e&&(e=n),this._labels[i].effectiveWidth=n}return(this.title?u(this.titleFontFamily,this.titleFontSize,this.titleFontWeight)+2:0)+e+this.tickLength+5},F.prototype.createLabelsAndCalculateHeight=function(){var e=0;this._labels=[];var t,i=0;if(this.createLabels(),"bottom"===this._position||"top"===this._position)for(i=0;i<this._labels.length;i++){t=this._labels[i].textBlock,t=t.measureText();var n=0,n=0===this.labelAngle?t.height:t.width*Math.sin(Math.PI/180*Math.abs(this.labelAngle))+t.height/2*Math.cos(Math.PI/180*Math.abs(this.labelAngle));n>e&&(e=n),this._labels[i].effectiveHeight=n}return(this.title?u(this.titleFontFamily,this.titleFontSize,this.titleFontWeight)+2:0)+e+this.tickLength+5},F.setLayoutAndRender=function(e,t,i,n,a){var r,s,o,l=e.chart,d=l.ctx;e.calculateAxisParameters(),t&&t.calculateAxisParameters(),i&&i.calculateAxisParameters();var h=t?t.margin:0;if(s=i?i.margin:0,"normal"===n){e.lineCoordinates={};var c=Math.ceil(t?t.createLabelsAndCalculateWidth():0);r=Math.round(a.x1+c+h),e.lineCoordinates.x1=r,h=Math.ceil(i?i.createLabelsAndCalculateWidth():0),o=Math.round(a.x2-h-s>e.chart.width-10?e.chart.width-10:a.x2-h-s),e.lineCoordinates.x2=o,e.lineCoordinates.width=Math.abs(o-r);var u=Math.ceil(e.createLabelsAndCalculateHeight());s=Math.round(a.y2-u-e.margin),n=Math.round(a.y2-e.margin),e.lineCoordinates.y1=s,e.lineCoordinates.y2=s,e.boundingRect={x1:r,y1:s,x2:o,y2:n,width:o-r,height:n-s},t&&(r=Math.round(a.x1+t.margin),s=Math.round(10>a.y1?10:a.y1),o=Math.round(a.x1+c+t.margin),n=Math.round(a.y2-u-e.margin),t.lineCoordinates={x1:o,y1:s,x2:o,y2:n,height:Math.abs(n-s)},t.boundingRect={x1:r,y1:s,x2:o,y2:n,width:o-r,height:n-s}),i&&(r=Math.round(e.lineCoordinates.x2),s=Math.round(10>a.y1?10:a.y1),o=Math.round(r+h),n=Math.round(a.y2-u-e.margin),i.lineCoordinates={x1:r,y1:s,x2:r,y2:n,height:Math.abs(n-s)},i.boundingRect={x1:r,y1:s,x2:o,y2:n,width:o-r,height:n-s}),e.calculateValueToPixelConversionParameters(),t&&t.calculateValueToPixelConversionParameters(),i&&i.calculateValueToPixelConversionParameters(),d.save(),d.rect(5,e.boundingRect.y1,e.chart.width-10,e.boundingRect.height),d.clip(),e.renderLabelsTicksAndTitle(),d.restore(),t&&t.renderLabelsTicksAndTitle(),i&&i.renderLabelsTicksAndTitle()}else{c=Math.ceil(e.createLabelsAndCalculateWidth()),t&&(t.lineCoordinates={},r=Math.round(a.x1+c+e.margin),o=Math.round(a.x2>t.chart.width-10?t.chart.width-10:a.x2),t.lineCoordinates.x1=r,t.lineCoordinates.x2=o,t.lineCoordinates.width=Math.abs(o-r)),i&&(i.lineCoordinates={},r=Math.round(a.x1+c+e.margin),o=Math.round(a.x2>i.chart.width-10?i.chart.width-10:a.x2),i.lineCoordinates.x1=r,i.lineCoordinates.x2=o,i.lineCoordinates.width=Math.abs(o-r));var u=Math.ceil(t?t.createLabelsAndCalculateHeight():0),p=Math.ceil(i?i.createLabelsAndCalculateHeight():0);t&&(s=Math.round(a.y2-u-t.margin),n=Math.round(a.y2-h>t.chart.height-10?t.chart.height-10:a.y2-h),t.lineCoordinates.y1=s,t.lineCoordinates.y2=s,t.boundingRect={x1:r,y1:s,x2:o,y2:n,width:o-r,height:u}),i&&(s=Math.round(a.y1+i.margin),n=a.y1+i.margin+p,i.lineCoordinates.y1=n,i.lineCoordinates.y2=n,i.boundingRect={x1:r,y1:s,x2:o,y2:n,width:o-r,height:p}),r=Math.round(a.x1+e.margin),s=Math.round(i?i.lineCoordinates.y2:10>a.y1?10:a.y1),o=Math.round(a.x1+c+e.margin),n=Math.round(t?t.lineCoordinates.y1:a.y2-h>e.chart.height-10?e.chart.height-10:a.y2-h),
e.lineCoordinates={x1:o,y1:s,x2:o,y2:n,height:Math.abs(n-s)},e.boundingRect={x1:r,y1:s,x2:o,y2:n,width:o-r,height:n-s},e.calculateValueToPixelConversionParameters(),t&&t.calculateValueToPixelConversionParameters(),i&&i.calculateValueToPixelConversionParameters(),t&&t.renderLabelsTicksAndTitle(),i&&i.renderLabelsTicksAndTitle(),e.renderLabelsTicksAndTitle()}l.preparePlotArea(),a=e.chart.plotArea,d.save(),d.rect(a.x1,a.y1,Math.abs(a.x2-a.x1),Math.abs(a.y2-a.y1)),d.clip(),e.renderStripLinesOfThicknessType("value"),t&&t.renderStripLinesOfThicknessType("value"),i&&i.renderStripLinesOfThicknessType("value"),e.renderInterlacedColors(),t&&t.renderInterlacedColors(),i&&i.renderInterlacedColors(),d.restore(),e.renderGrid(),t&&t.renderGrid(),i&&i.renderGrid(),e.renderAxisLine(),t&&t.renderAxisLine(),i&&i.renderAxisLine(),e.renderStripLinesOfThicknessType("pixel"),t&&t.renderStripLinesOfThicknessType("pixel"),i&&i.renderStripLinesOfThicknessType("pixel")},F.prototype.renderLabelsTicksAndTitle=function(){var e=!1,t=0,i=1,n=0;if(0!==this.labelAngle&&360!==this.labelAngle&&(i=1.2),"undefined"==typeof this._options.interval){if("bottom"===this._position||"top"===this._position){for(r=0;r<this._labels.length;r++)a=this._labels[r],a.position<this.viewportMinimum||a.stripLine||(a=a.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)+a.textBlock.height*Math.sin(Math.PI/180*this.labelAngle),t+=a);t>this.lineCoordinates.width*i&&(e=!0)}if("left"===this._position||"right"===this._position){for(r=0;r<this._labels.length;r++)a=this._labels[r],a.position<this.viewportMinimum||a.stripLine||(a=a.textBlock.height*Math.cos(Math.PI/180*this.labelAngle)+a.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),t+=a);t>this.lineCoordinates.height*i&&(e=!0)}}if("bottom"===this._position){for(var a,r=0,r=0;r<this._labels.length;r++)a=this._labels[r],a.position<this.viewportMinimum||a.position>this.viewportMaximum||(t=this.getPixelCoordinatesOnAxis(a.position),(this.tickThickness&&!this._labels[r].stripLine||this._labels[r].stripLine&&"pixel"===this._labels[r].stripLine._thicknessType)&&(this._labels[r].stripLine?(i=this._labels[r].stripLine,this.ctx.lineWidth=i.thickness,this.ctx.strokeStyle=i.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),i=1===this.ctx.lineWidth%2?(t.x<<0)+.5:t.x<<0,this.ctx.beginPath(),this.ctx.moveTo(i,t.y<<0),this.ctx.lineTo(i,t.y+this.tickLength<<0),this.ctx.stroke()),(!e||0===n++%2||this._labels[r].stripLine)&&(0===a.textBlock.angle?(t.x-=a.textBlock.width/2,t.y+=this.tickLength+a.textBlock.fontSize/2):(t.x-=0>this.labelAngle?a.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,t.y+=this.tickLength+Math.abs(0>this.labelAngle?a.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)-5:5)),a.textBlock.x=t.x,a.textBlock.y=t.y,a.textBlock.render(!0)));this.title&&(this._titleTextBlock=new P(this.ctx,{x:this.lineCoordinates.x1,y:this.boundingRect.y2-this.titleFontSize-5,maxWidth:this.lineCoordinates.width,maxHeight:1.5*this.titleFontSize,angle:0,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.y=this.boundingRect.y2-this._titleTextBlock.height-3,this._titleTextBlock.render(!0))}else if("top"===this._position){for(r=0;r<this._labels.length;r++)a=this._labels[r],a.position<this.viewportMinimum||a.position>this.viewportMaximum||(t=this.getPixelCoordinatesOnAxis(a.position),(this.tickThickness&&!this._labels[r].stripLine||this._labels[r].stripLine&&"pixel"===this._labels[r].stripLine._thicknessType)&&(this._labels[r].stripLine?(i=this._labels[r].stripLine,this.ctx.lineWidth=i.thickness,this.ctx.strokeStyle=i.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),i=1===this.ctx.lineWidth%2?(t.x<<0)+.5:t.x<<0,this.ctx.beginPath(),this.ctx.moveTo(i,t.y<<0),this.ctx.lineTo(i,t.y-this.tickLength<<0),this.ctx.stroke()),(!e||0===n++%2||this._labels[r].stripLine)&&(0===a.textBlock.angle?(t.x-=a.textBlock.width/2,t.y-=this.tickLength+a.textBlock.height/2):(t.x-=0<this.labelAngle?a.textBlock.width*Math.cos(Math.PI/180*this.labelAngle):0,t.y-=this.tickLength+Math.abs(0<this.labelAngle?a.textBlock.width*Math.sin(Math.PI/180*this.labelAngle)+5:5)),a.textBlock.x=t.x,a.textBlock.y=t.y,a.textBlock.render(!0)));this.title&&(this._titleTextBlock=new P(this.ctx,{x:this.lineCoordinates.x1,y:this.boundingRect.y1+1,maxWidth:this.lineCoordinates.width,maxHeight:1.5*this.titleFontSize,angle:0,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.x=this.lineCoordinates.x1+this.lineCoordinates.width/2-this._titleTextBlock.width/2,this._titleTextBlock.render(!0))}else if("left"===this._position){for(r=0;r<this._labels.length;r++)a=this._labels[r],a.position<this.viewportMinimum||a.position>this.viewportMaximum||(t=this.getPixelCoordinatesOnAxis(a.position),(this.tickThickness&&!this._labels[r].stripLine||this._labels[r].stripLine&&"pixel"===this._labels[r].stripLine._thicknessType)&&(this._labels[r].stripLine?(i=this._labels[r].stripLine,this.ctx.lineWidth=i.thickness,this.ctx.strokeStyle=i.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),i=1===this.ctx.lineWidth%2?(t.y<<0)+.5:t.y<<0,this.ctx.beginPath(),this.ctx.moveTo(t.x<<0,i),this.ctx.lineTo(t.x-this.tickLength<<0,i),this.ctx.stroke()),(!e||0===n++%2||this._labels[r].stripLine)&&(a.textBlock.x=t.x-a.textBlock.width*Math.cos(Math.PI/180*this.labelAngle)-this.tickLength-5,a.textBlock.y=0===this.labelAngle?t.y:t.y-a.textBlock.width*Math.sin(Math.PI/180*this.labelAngle),a.textBlock.render(!0)));this.title&&(this._titleTextBlock=new P(this.ctx,{x:this.boundingRect.x1+1,y:this.lineCoordinates.y2,maxWidth:this.lineCoordinates.height,maxHeight:1.5*this.titleFontSize,angle:-90,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.y=this.lineCoordinates.height/2+this._titleTextBlock.width/2+this.lineCoordinates.y1,this._titleTextBlock.render(!0))}else if("right"===this._position){for(r=0;r<this._labels.length;r++)a=this._labels[r],a.position<this.viewportMinimum||a.position>this.viewportMaximum||(t=this.getPixelCoordinatesOnAxis(a.position),(this.tickThickness&&!this._labels[r].stripLine||this._labels[r].stripLine&&"pixel"===this._labels[r].stripLine._thicknessType)&&(this._labels[r].stripLine?(i=this._labels[r].stripLine,this.ctx.lineWidth=i.thickness,this.ctx.strokeStyle=i.color):(this.ctx.lineWidth=this.tickThickness,this.ctx.strokeStyle=this.tickColor),i=1===this.ctx.lineWidth%2?(t.y<<0)+.5:t.y<<0,this.ctx.beginPath(),this.ctx.moveTo(t.x<<0,i),this.ctx.lineTo(t.x+this.tickLength<<0,i),this.ctx.stroke()),(!e||0===n++%2||this._labels[r].stripLine)&&(a.textBlock.x=t.x+this.tickLength+5,a.textBlock.y=t.y,a.textBlock.render(!0)));this.title&&(this._titleTextBlock=new P(this.ctx,{x:this.boundingRect.x2-1,y:this.lineCoordinates.y2,maxWidth:this.lineCoordinates.height,maxHeight:1.5*this.titleFontSize,angle:90,text:this.title,horizontalAlign:"center",fontSize:this.titleFontSize,fontFamily:this.titleFontFamily,fontWeight:this.titleFontWeight,fontColor:this.titleFontColor,fontStyle:this.titleFontStyle,textBaseline:"top"}),this._titleTextBlock.measureText(),this._titleTextBlock.y=this.lineCoordinates.height/2-this._titleTextBlock.width/2+this.lineCoordinates.y1,this._titleTextBlock.render(!0))}},F.prototype.renderInterlacedColors=function(){var e,t,i=this.chart.plotArea.ctx,n=this.chart.plotArea,a=0;if(e=!0,"bottom"!==this._position&&"top"!==this._position||!this.interlacedColor){if(("left"===this._position||"right"===this._position)&&this.interlacedColor)for(i.fillStyle=this.interlacedColor,a=0;a<this._labels.length;a++)this._labels[a].stripLine||(e?(t=this.getPixelCoordinatesOnAxis(this._labels[a].position),e=a+1>=this._labels.length-1?this.getPixelCoordinatesOnAxis(this.viewportMaximum):this.getPixelCoordinatesOnAxis(this._labels[a+1].position),i.fillRect(n.x1,e.y,Math.abs(n.x1-n.x2),Math.abs(e.y-t.y)),e=!1):e=!0)}else for(i.fillStyle=this.interlacedColor,a=0;a<this._labels.length;a++)this._labels[a].stripLine||(e?(e=this.getPixelCoordinatesOnAxis(this._labels[a].position),t=a+1>=this._labels.length-1?this.getPixelCoordinatesOnAxis(this.viewportMaximum):this.getPixelCoordinatesOnAxis(this._labels[a+1].position),i.fillRect(e.x,n.y1,Math.abs(t.x-e.x),Math.abs(n.y1-n.y2)),e=!1):e=!0);i.beginPath()},F.prototype.renderStripLinesOfThicknessType=function(e){if(this.stripLines&&0<this.stripLines.length&&e)for(var t=0,t=0;t<this.stripLines.length;t++){var i=this.stripLines[t];i._thicknessType===e&&("pixel"===e&&(i.value<this.viewportMinimum||i.value>this.viewportMaximum)||(i.showOnTop?this.chart.addEventListener("dataAnimationIterationEnd",i.render,i):i.render()))}},F.prototype.renderGrid=function(){if(this.gridThickness&&0<this.gridThickness){var e=this.chart.ctx;e.save();var t,i=this.chart.plotArea;if(e.lineWidth=this.gridThickness,e.strokeStyle=this.gridColor,e.setLineDash&&e.setLineDash(p(this.gridDashType,this.gridThickness)),"bottom"===this._position||"top"===this._position)for(n=0;n<this._labels.length&&!this._labels[n].stripLine;n++)this._labels[n].position<this.viewportMinimum||this._labels[n].position>this.viewportMaximum||(e.beginPath(),t=this.getPixelCoordinatesOnAxis(this._labels[n].position),t=1===e.lineWidth%2?(t.x<<0)+.5:t.x<<0,e.moveTo(t,i.y1<<0),e.lineTo(t,i.y2<<0),e.stroke());else if("left"===this._position||"right"===this._position)for(var n=0;n<this._labels.length&&!this._labels[n].stripLine;n++)0===n&&"axisY"===this.type&&this.chart.axisX&&this.chart.axisX.lineThickness||this._labels[n].position<this.viewportMinimum||this._labels[n].position>this.viewportMaximum||(e.beginPath(),t=this.getPixelCoordinatesOnAxis(this._labels[n].position),t=1===e.lineWidth%2?(t.y<<0)+.5:t.y<<0,e.moveTo(i.x1<<0,t),e.lineTo(i.x2<<0,t),e.stroke());e.restore()}},F.prototype.renderAxisLine=function(){var e=this.chart.ctx;if(e.save(),"bottom"===this._position||"top"===this._position){if(this.lineThickness){e.lineWidth=this.lineThickness,e.strokeStyle=this.lineColor?this.lineColor:"black",e.setLineDash&&e.setLineDash(p(this.lineDashType,this.lineThickness));var t=1===this.lineThickness%2?(this.lineCoordinates.y1<<0)+.5:this.lineCoordinates.y1<<0;e.beginPath(),e.moveTo(this.lineCoordinates.x1,t),e.lineTo(this.lineCoordinates.x2,t),e.stroke()}}else"left"!==this._position&&"right"!==this._position||!this.lineThickness||(e.lineWidth=this.lineThickness,e.strokeStyle=this.lineColor,e.setLineDash&&e.setLineDash(p(this.lineDashType,this.lineThickness)),t=1===this.lineThickness%2?(this.lineCoordinates.x1<<0)+.5:this.lineCoordinates.x1<<0,e.beginPath(),e.moveTo(t,this.lineCoordinates.y1),e.lineTo(t,this.lineCoordinates.y2),e.stroke());e.restore()},F.prototype.getPixelCoordinatesOnAxis=function(e){var t={};if("bottom"===this._position||"top"===this._position){var i=this.conversionParameters.pixelPerUnit;t.x=this.conversionParameters.reference+i*(e-this.viewportMinimum),t.y=this.lineCoordinates.y1}return("left"===this._position||"right"===this._position)&&(i=-this.conversionParameters.pixelPerUnit,t.y=this.conversionParameters.reference-i*(e-this.viewportMinimum),t.x=this.lineCoordinates.x2),t},F.prototype.convertPixelToValue=function(e){if(!e)return null;var t=0;return t=this.conversionParameters.minimum+(("left"===this._position||"right"===this._position?e.y:e.x)-this.conversionParameters.reference)/this.conversionParameters.pixelPerUnit},F.prototype.setViewPortRange=function(e,t){this.sessionVariables.newViewportMinimum=this.viewportMinimum=Math.min(e,t),this.sessionVariables.newViewportMaximum=this.viewportMaximum=Math.max(e,t)},F.prototype.getXValueAt=function(e){if(!e)return null;var t=null;return"left"===this._position?t=(this.chart.axisX.viewportMaximum-this.chart.axisX.viewportMinimum)/this.chart.axisX.lineCoordinates.height*(this.chart.axisX.lineCoordinates.y2-e.y)+this.chart.axisX.viewportMinimum:"bottom"===this._position&&(t=(this.chart.axisX.viewportMaximum-this.chart.axisX.viewportMinimum)/this.chart.axisX.lineCoordinates.width*(e.x-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.viewportMinimum),t},F.prototype.calculateValueToPixelConversionParameters=function(e){this.reversed=!1,e={pixelPerUnit:null,minimum:null,reference:null};var t=this.lineCoordinates.width,i=this.lineCoordinates.height;e.minimum=this.viewportMinimum,("bottom"===this._position||"top"===this._position)&&(e.pixelPerUnit=(this.reversed?-1:1)*t/Math.abs(this.viewportMaximum-this.viewportMinimum),e.reference=this.reversed?this.lineCoordinates.x2:this.lineCoordinates.x1),("left"===this._position||"right"===this._position)&&(e.pixelPerUnit=(this.reversed?1:-1)*i/Math.abs(this.viewportMaximum-this.viewportMinimum),e.reference=this.reversed?this.lineCoordinates.y1:this.lineCoordinates.y2),this.conversionParameters=e},F.prototype.calculateAxisParameters=function(){var e=this.chart.layoutManager.getFreeSpace(),t=!1;"bottom"===this._position||"top"===this._position?(this.maxWidth=e.width,this.maxHeight=e.height):(this.maxWidth=e.height,this.maxHeight=e.width);var i,n,a,r,e="axisX"===this.type?500>this.maxWidth?8:Math.max(6,Math.floor(this.maxWidth/62)):Math.max(Math.floor(this.maxWidth/40),2);if(r=0,(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum=this.minimum),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum=this.maximum),"axisX"===this.type?(i=null!==this.viewportMinimum?this.viewportMinimum:this.dataInfo.viewPortMin,n=null!==this.viewportMaximum?this.viewportMaximum:this.dataInfo.viewPortMax,0===n-i&&(r="undefined"==typeof this._options.interval?.4:this._options.interval,n+=r,i-=r),1/0!==this.dataInfo.minDiff?a=this.dataInfo.minDiff:n-i>1?a=.5*Math.abs(n-i):(a=1,"dateTime"===this.chart.plotInfo.axisXValueType&&(t=!0))):"axisY"===this.type&&(i=null!==this.viewportMinimum?this.viewportMinimum:this.dataInfo.viewPortMin,n=null!==this.viewportMaximum?this.viewportMaximum:this.dataInfo.viewPortMax,isFinite(i)||isFinite(n)?isFinite(i)?isFinite(n)||(n=i):i=n:(n="undefined"==typeof this._options.interval?-(1/0):this._options.interval,i=0),0===i&&0===n?(n+=9,i=0):0===n-i?(r=Math.min(Math.abs(.01*Math.abs(n)),5),n+=r,i-=r):i>n?(r=Math.min(Math.abs(.01*Math.abs(n-i)),5),n>=0?i=n-r:n=i+r):(r=Math.min(Math.abs(.01*Math.abs(n-i)),.05),0!==n&&(n+=r),0!==i&&(i-=r)),a=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:n-i>1?.5*Math.abs(n-i):1,this.includeZero&&(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&i>0&&(i=0),this.includeZero&&(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&0>n&&(n=0)),r=(isNaN(this.viewportMaximum)||null===this.viewportMaximum?n:this.viewportMaximum)-(isNaN(this.viewportMinimum)||null===this.viewportMinimum?i:this.viewportMinimum),"axisX"===this.type&&"dateTime"===this.chart.plotInfo.axisXValueType?(this.intervalType||(e>=r/1?(this.interval=1,this.intervalType="millisecond"):e>=r/2?(this.interval=2,this.intervalType="millisecond"):e>=r/5?(this.interval=5,this.intervalType="millisecond"):e>=r/10?(this.interval=10,this.intervalType="millisecond"):e>=r/20?(this.interval=20,this.intervalType="millisecond"):e>=r/50?(this.interval=50,this.intervalType="millisecond"):e>=r/100?(this.interval=100,this.intervalType="millisecond"):e>=r/200?(this.interval=200,this.intervalType="millisecond"):e>=r/250?(this.interval=250,this.intervalType="millisecond"):e>=r/300?(this.interval=300,this.intervalType="millisecond"):e>=r/400?(this.interval=400,this.intervalType="millisecond"):e>=r/500?(this.interval=500,this.intervalType="millisecond"):r/(1*V.secondDuration)<=e?(this.interval=1,this.intervalType="second"):r/(2*V.secondDuration)<=e?(this.interval=2,this.intervalType="second"):r/(5*V.secondDuration)<=e?(this.interval=5,this.intervalType="second"):r/(10*V.secondDuration)<=e?(this.interval=10,this.intervalType="second"):r/(15*V.secondDuration)<=e?(this.interval=15,this.intervalType="second"):r/(20*V.secondDuration)<=e?(this.interval=20,this.intervalType="second"):r/(30*V.secondDuration)<=e?(this.interval=30,this.intervalType="second"):r/(1*V.minuteDuration)<=e?(this.interval=1,this.intervalType="minute"):r/(2*V.minuteDuration)<=e?(this.interval=2,this.intervalType="minute"):r/(5*V.minuteDuration)<=e?(this.interval=5,this.intervalType="minute"):r/(10*V.minuteDuration)<=e?(this.interval=10,this.intervalType="minute"):r/(15*V.minuteDuration)<=e?(this.interval=15,this.intervalType="minute"):r/(20*V.minuteDuration)<=e?(this.interval=20,this.intervalType="minute"):r/(30*V.minuteDuration)<=e?(this.interval=30,this.intervalType="minute"):r/(1*V.hourDuration)<=e?(this.interval=1,this.intervalType="hour"):r/(2*V.hourDuration)<=e?(this.interval=2,this.intervalType="hour"):r/(3*V.hourDuration)<=e?(this.interval=3,this.intervalType="hour"):r/(6*V.hourDuration)<=e?(this.interval=6,this.intervalType="hour"):r/(1*V.dayDuration)<=e?(this.interval=1,this.intervalType="day"):r/(2*V.dayDuration)<=e?(this.interval=2,this.intervalType="day"):r/(4*V.dayDuration)<=e?(this.interval=4,this.intervalType="day"):r/(1*V.weekDuration)<=e?(this.interval=1,this.intervalType="week"):r/(2*V.weekDuration)<=e?(this.interval=2,this.intervalType="week"):r/(3*V.weekDuration)<=e?(this.interval=3,this.intervalType="week"):r/(1*V.monthDuration)<=e?(this.interval=1,this.intervalType="month"):r/(2*V.monthDuration)<=e?(this.interval=2,this.intervalType="month"):r/(3*V.monthDuration)<=e?(this.interval=3,this.intervalType="month"):r/(6*V.monthDuration)<=e?(this.interval=6,this.intervalType="month"):(this.interval=r/(1*V.yearDuration)<=e?1:r/(2*V.yearDuration)<=e?2:r/(4*V.yearDuration)<=e?4:Math.floor(F.getNiceNumber(r/(e-1),!0)/V.yearDuration),this.intervalType="year")),(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum=i-a/2),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum=n+a/2),t?this.autoValueFormatString="MMM DD YYYY HH:mm":"year"===this.intervalType?this.autoValueFormatString="YYYY":"month"===this.intervalType?this.autoValueFormatString="MMM YYYY":"week"===this.intervalType?this.autoValueFormatString="MMM DD YYYY":"day"===this.intervalType?this.autoValueFormatString="MMM DD YYYY":"hour"===this.intervalType?this.autoValueFormatString="hh:mm TT":"minute"===this.intervalType?this.autoValueFormatString="hh:mm TT":"second"===this.intervalType?this.autoValueFormatString="hh:mm:ss TT":"millisecond"===this.intervalType&&(this.autoValueFormatString="fff'ms'"),this.valueFormatString||(this.valueFormatString=this.autoValueFormatString)):(this.intervalType="number",r=F.getNiceNumber(r,!1),this.interval=this._options&&0<this._options.interval?this._options.interval:F.getNiceNumber(r/(e-1),!0),(null===this.viewportMinimum||isNaN(this.viewportMinimum))&&(this.viewportMinimum="axisX"===this.type?i-a/2:Math.floor(i/this.interval)*this.interval),(null===this.viewportMaximum||isNaN(this.viewportMaximum))&&(this.viewportMaximum="axisX"===this.type?n+a/2:Math.ceil(n/this.interval)*this.interval),0===this.viewportMaximum&&0===this.viewportMinimum&&(0===this._options.viewportMinimum?this.viewportMaximum+=10:0===this._options.viewportMaximum&&(this.viewportMinimum-=10),this._options&&"undefined"==typeof this._options.interval&&(this.interval=F.getNiceNumber((this.viewportMaximum-this.viewportMinimum)/(e-1),!0)))),(null===this.minimum||null===this.maximum)&&("axisX"===this.type?(i=null!==this.minimum?this.minimum:this.dataInfo.min,n=null!==this.maximum?this.maximum:this.dataInfo.max,0===n-i&&(r="undefined"==typeof this._options.interval?.4:this._options.interval,n+=r,i-=r),a=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:n-i>1?.5*Math.abs(n-i):1):"axisY"===this.type&&(i=null!==this.minimum?this.minimum:this.dataInfo.min,n=null!==this.maximum?this.maximum:this.dataInfo.max,isFinite(i)||isFinite(n)?0===i&&0===n?(n+=9,i=0):0===n-i?(r=Math.min(Math.abs(.01*Math.abs(n)),5),n+=r,i-=r):i>n?(r=Math.min(Math.abs(.01*Math.abs(n-i)),5),n>=0?i=n-r:n=i+r):(r=Math.min(Math.abs(.01*Math.abs(n-i)),.05),0!==n&&(n+=r),0!==i&&(i-=r)):(n="undefined"==typeof this._options.interval?-(1/0):this._options.interval,i=0),a=1/0!==this.dataInfo.minDiff?this.dataInfo.minDiff:n-i>1?.5*Math.abs(n-i):1,this.includeZero&&(null===this.minimum||isNaN(this.minimum))&&i>0&&(i=0),this.includeZero&&(null===this.maximum||isNaN(this.maximum))&&0>n&&(n=0)),"axisX"===this.type&&"dateTime"===this.chart.plotInfo.axisXValueType?((null===this.minimum||isNaN(this.minimum))&&(this.minimum=i-a/2),(null===this.maximum||isNaN(this.maximum))&&(this.maximum=n+a/2)):(this.intervalType="number",null===this.minimum&&(this.minimum="axisX"===this.type?i-a/2:Math.floor(i/this.interval)*this.interval,this.minimum=Math.min(this.minimum,null===this.sessionVariables.viewportMinimum||isNaN(this.sessionVariables.viewportMinimum)?1/0:this.sessionVariables.viewportMinimum)),null===this.maximum&&(this.maximum="axisX"===this.type?n+a/2:Math.ceil(n/this.interval)*this.interval,this.maximum=Math.max(this.maximum,null===this.sessionVariables.viewportMaximum||isNaN(this.sessionVariables.viewportMaximum)?-(1/0):this.sessionVariables.viewportMaximum)),0===this.maximum&&0===this.minimum&&(0===this._options.minimum?this.maximum+=10:0===this._options.maximum&&(this.minimum-=10)))),this.viewportMinimum=Math.max(this.viewportMinimum,this.minimum),this.viewportMaximum=Math.min(this.viewportMaximum,this.maximum),this.intervalStartPosition="axisX"===this.type&&"dateTime"===this.chart.plotInfo.axisXValueType?this.getLabelStartPoint(new Date(this.viewportMinimum),this.intervalType,this.interval):Math.floor((this.viewportMinimum+.2*this.interval)/this.interval)*this.interval,!this.valueFormatString&&(this.valueFormatString="#,##0.##",r=Math.abs(this.viewportMaximum-this.viewportMinimum),1>r)&&(t=Math.floor(Math.abs(Math.log(r)/Math.LN10))+2,(isNaN(t)||!isFinite(t))&&(t=2),t>2))for(i=0;t-2>i;i++)this.valueFormatString+="#"},F.getNiceNumber=function(e,t){var i=Math.floor(Math.log(e)/Math.LN10),n=e/Math.pow(10,i);return Number(((t?1.5>n?1:3>n?2:7>n?5:10:1>=n?1:2>=n?2:5>=n?5:10)*Math.pow(10,i)).toFixed(20))},F.prototype.getLabelStartPoint=function(){var e=V[this.intervalType+"Duration"]*this.interval,e=new Date(Math.floor(this.viewportMinimum/e)*e);return"millisecond"!==this.intervalType&&("second"===this.intervalType?0<e.getMilliseconds()&&(e.setSeconds(e.getSeconds()+1),e.setMilliseconds(0)):"minute"===this.intervalType?(0<e.getSeconds()||0<e.getMilliseconds())&&(e.setMinutes(e.getMinutes()+1),e.setSeconds(0),e.setMilliseconds(0)):"hour"===this.intervalType?(0<e.getMinutes()||0<e.getSeconds()||0<e.getMilliseconds())&&(e.setHours(e.getHours()+1),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)):"day"===this.intervalType?(0<e.getHours()||0<e.getMinutes()||0<e.getSeconds()||0<e.getMilliseconds())&&(e.setDate(e.getDate()+1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)):"week"===this.intervalType?(0<e.getDay()||0<e.getHours()||0<e.getMinutes()||0<e.getSeconds()||0<e.getMilliseconds())&&(e.setDate(e.getDate()+(7-e.getDay())),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)):"month"===this.intervalType?(1<e.getDate()||0<e.getHours()||0<e.getMinutes()||0<e.getSeconds()||0<e.getMilliseconds())&&(e.setMonth(e.getMonth()+1),e.setDate(1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)):"year"===this.intervalType&&(0<e.getMonth()||1<e.getDate()||0<e.getHours()||0<e.getMinutes()||0<e.getSeconds()||0<e.getMilliseconds())&&(e.setFullYear(e.getFullYear()+1),e.setMonth(0),e.setDate(1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0))),e},e(E,k),E.prototype.render=function(){this.ctx.save();var e=this.parent.getPixelCoordinatesOnAxis(this.value),t=Math.abs("pixel"===this._thicknessType?this.thickness:this.parent.conversionParameters.pixelPerUnit*this.thickness);if(t>0){var i=null===this.opacity?1:this.opacity;this.ctx.strokeStyle=this.color,this.ctx.beginPath();var n=this.ctx.globalAlpha;this.ctx.globalAlpha=i,d(this.id);var a,r,s,o;this.ctx.lineWidth=t,this.ctx.setLineDash&&this.ctx.setLineDash(p(this.lineDashType,t)),"bottom"===this.parent._position||"top"===this.parent._position?(a=r=1===this.ctx.lineWidth%2?(e.x<<0)+.5:e.x<<0,s=this.chart.plotArea.y1,o=this.chart.plotArea.y2):("left"===this.parent._position||"right"===this.parent._position)&&(s=o=1===this.ctx.lineWidth%2?(e.y<<0)+.5:e.y<<0,a=this.chart.plotArea.x1,r=this.chart.plotArea.x2),this.ctx.moveTo(a,s),this.ctx.lineTo(r,o),this.ctx.stroke(),this.ctx.globalAlpha=n}this.ctx.restore()},e(O,k),O.prototype._initialize=function(){if(this.enabled){this.container=document.createElement("div"),this.container.setAttribute("class","canvasjs-chart-tooltip"),this.container.style.position="absolute",this.container.style.height="auto",this.container.style.boxShadow="1px 1px 2px 2px rgba(0,0,0,0.1)",this.container.style.zIndex="1000",this.container.style.display="none";var e;e='<div style=" width: auto;height: auto;min-width: 50px;',e+="line-height: auto;",e+="margin: 0px 0px 0px 0px;",e+="padding: 5px;",e+="font-family: Calibri, Arial, Georgia, serif;",e+="font-weight: normal;",e+="font-style: "+(Y?"italic;":"normal;"),e+="font-size: 14px;",e+="color: #000000;",e+="text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);",e+="text-align: left;",e+="border: 2px solid gray;",e+=Y?"background: rgba(255,255,255,.9);":"background: rgb(255,255,255);",e+="text-indent: 0px;",e+="white-space: nowrap;",e+="border-radius: 5px;",e+="-moz-user-select:none;",e+="-khtml-user-select: none;",e+="-webkit-user-select: none;",e+="-ms-user-select: none;",e+="user-select: none;",Y||(e+="filter: alpha(opacity = 90);",e+="filter: progid:DXImageTransform.Microsoft.Shadow(Strength=3, Direction=135, Color='#666666');"),e+='} "> Sample Tooltip</div>',this.container.innerHTML=e,this.contentDiv=this.container.firstChild,this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.chart._canvasJSContainer.appendChild(this.container)}},O.prototype.mouseMoveHandler=function(e,t){this._lastUpdated&&40>(new Date).getTime()-this._lastUpdated||(this._lastUpdated=(new Date).getTime(),this._updateToolTip(e,t))},O.prototype._updateToolTip=function(e,t){if(!this.chart.disableToolTip){if("undefined"==typeof e||"undefined"==typeof t){if(isNaN(this._prevX)||isNaN(this._prevY))return;e=this._prevX,t=this._prevY}else this._prevX=e,this._prevY=t;var i=null,n=null,a=[],r=0;if(this.shared&&this.enabled&&"none"!==this.chart.plotInfo.axisPlacement){for(r="xySwapped"===this.chart.plotInfo.axisPlacement?(this.chart.axisX.viewportMaximum-this.chart.axisX.viewportMinimum)/this.chart.axisX.lineCoordinates.height*(this.chart.axisX.lineCoordinates.y2-t)+this.chart.axisX.viewportMinimum:(this.chart.axisX.viewportMaximum-this.chart.axisX.viewportMinimum)/this.chart.axisX.lineCoordinates.width*(e-this.chart.axisX.lineCoordinates.x1)+this.chart.axisX.viewportMinimum,n=[],i=0;i<this.chart.data.length;i++){var s=this.chart.data[i].getDataPointAtX(r,!0);s&&0<=s.index&&(s.dataSeries=this.chart.data[i],null!==s.dataPoint.y&&n.push(s))}if(0===n.length)return;for(n.sort(function(e,t){return e.distance-t.distance}),r=n[0],i=0;i<n.length;i++)n[i].dataPoint.x.valueOf()===r.dataPoint.x.valueOf()&&a.push(n[i]);n=null}else{if(s=this.chart.getDataPointAtXY(e,t,!0))this.currentDataPointIndex=s.dataPointIndex,this.currentSeriesIndex=s.dataSeries.index;else if(Y)if(s=m(e,t,this.chart._eventManager.ghostCtx),s>0&&"undefined"!=typeof this.chart._eventManager.objectMap[s]){if(eventObject=this.chart._eventManager.objectMap[s],"legendItem"===eventObject.objectType)return;this.currentSeriesIndex=eventObject.dataSeriesIndex,this.currentDataPointIndex=0<=eventObject.dataPointIndex?eventObject.dataPointIndex:-1}else this.currentDataPointIndex=-1;else this.currentDataPointIndex=-1;if(0<=this.currentSeriesIndex){if(n=this.chart.data[this.currentSeriesIndex],s={},0<=this.currentDataPointIndex)i=n.dataPoints[this.currentDataPointIndex],s.dataSeries=n,s.dataPoint=i,s.index=this.currentDataPointIndex,s.distance=Math.abs(i.x-r);else{if(!this.enabled||"line"!==n.type&&"stepLine"!==n.type&&"spline"!==n.type&&"area"!==n.type&&"stepArea"!==n.type&&"splineArea"!==n.type&&"stackedArea"!==n.type&&"stackedArea100"!==n.type&&"rangeArea"!==n.type&&"rangeSplineArea"!==n.type&&"candlestick"!==n.type&&"ohlc"!==n.type)return;r=n.axisX.conversionParameters.minimum+(e-n.axisX.conversionParameters.reference)/n.axisX.conversionParameters.pixelPerUnit,s=n.getDataPointAtX(r,!0),s.dataSeries=n,this.currentDataPointIndex=s.index,i=s.dataPoint}if(!c(s.dataPoint.y))if(s.dataSeries.axisY)if(0<s.dataPoint.y.length){for(i=r=0;i<s.dataPoint.y.length;i++)s.dataPoint.y[i]<s.dataSeries.axisY.viewportMinimum?r--:s.dataPoint.y[i]>s.dataSeries.axisY.viewportMaximum&&r++;r<s.dataPoint.y.length&&r>-s.dataPoint.y.length&&a.push(s)}else"column"===n.type||"bar"===n.type?0>s.dataPoint.y?0>s.dataSeries.axisY.viewportMinimum&&s.dataSeries.axisY.viewportMaximum>=s.dataPoint.y&&a.push(s):s.dataSeries.axisY.viewportMinimum<=s.dataPoint.y&&0<=s.dataSeries.axisY.viewportMaximum&&a.push(s):"bubble"===n.type?(r=this.chart._eventManager.objectMap[n.dataPointIds[s.index]].size/2,s.dataPoint.y>=s.dataSeries.axisY.viewportMinimum-r&&s.dataPoint.y<=s.dataSeries.axisY.viewportMaximum+r&&a.push(s)):(0<=s.dataSeries.type.indexOf("100")||"stackedColumn"===n.type||"stackedBar"===n.type||s.dataPoint.y>=s.dataSeries.axisY.viewportMinimum&&s.dataPoint.y<=s.dataSeries.axisY.viewportMaximum)&&a.push(s);else a.push(s)}}if(0<a.length&&(this.highlightObjects(a),this.enabled))if(r="",r=this.getToolTipInnerHTML({entries:a}),null!==r){this.contentDiv.innerHTML=r,this.contentDiv.innerHTML=r,r=!1,"none"===this.container.style.display&&(r=!0,this.container.style.display="block");try{this.contentDiv.style.background=this.backgroundColor?this.backgroundColor:Y?"rgba(255,255,255,.9)":"rgb(255,255,255)",this.contentDiv.style.borderRightColor=this.contentDiv.style.borderLeftColor=this.contentDiv.style.borderColor=this.borderColor?this.borderColor:a[0].dataPoint.color?a[0].dataPoint.color:a[0].dataSeries.color?a[0].dataSeries.color:a[0].dataSeries._colorSet[a[0].index%a[0].dataSeries._colorSet.length],this.contentDiv.style.borderWidth=this.borderThickness||0===this.borderThickness?this.borderThickness+"px":"2px",this.contentDiv.style.borderRadius=this.cornerRadius||0===this.cornerRadius?this.cornerRadius+"px":"5px",this.container.style.borderRadius=this.contentDiv.style.borderRadius,this.contentDiv.style.fontSize=this.fontSize||0===this.fontSize?this.fontSize+"px":"14px",this.contentDiv.style.color=this.fontColor?this.fontColor:"#000000",this.contentDiv.style.fontFamily=this.fontFamily?this.fontFamily:"Calibri, Arial, Georgia, serif;",this.contentDiv.style.fontWeight=this.fontWeight?this.fontWeight:"normal",this.contentDiv.style.fontStyle=this.fontStyle?this.fontStyle:Y?"italic":"normal"}catch(o){}"pie"===a[0].dataSeries.type||"doughnut"===a[0].dataSeries.type||"funnel"===a[0].dataSeries.type||"bar"===a[0].dataSeries.type||"rangeBar"===a[0].dataSeries.type||"stackedBar"===a[0].dataSeries.type||"stackedBar100"===a[0].dataSeries.type?toolTipLeft=e-10-this.container.clientWidth:(toolTipLeft=a[0].dataSeries.axisX.conversionParameters.reference+a[0].dataSeries.axisX.conversionParameters.pixelPerUnit*(a[0].dataPoint.x-a[0].dataSeries.axisX.conversionParameters.minimum)-this.container.clientWidth<<0,toolTipLeft-=10),0>toolTipLeft&&(toolTipLeft+=this.container.clientWidth+20),toolTipLeft+this.container.clientWidth>Math.max(this.chart._container.clientWidth,this.chart.width)&&(toolTipLeft=Math.max(0,Math.max(this.chart._container.clientWidth,this.chart.width)-this.container.clientWidth)),toolTipLeft+="px",a=1!==a.length||this.shared||"line"!==a[0].dataSeries.type&&"stepLine"!==a[0].dataSeries.type&&"spline"!==a[0].dataSeries.type&&"area"!==a[0].dataSeries.type&&"stepArea"!==a[0].dataSeries.type&&"splineArea"!==a[0].dataSeries.type&&"stackedArea"!==a[0].dataSeries.type&&"stackedArea100"!==a[0].dataSeries.type?"bar"===a[0].dataSeries.type||"rangeBar"===a[0].dataSeries.type||"stackedBar"===a[0].dataSeries.type||"stackedBar100"===a[0].dataSeries.type?a[0].dataSeries.axisX.conversionParameters.reference+a[0].dataSeries.axisX.conversionParameters.pixelPerUnit*(a[0].dataPoint.x-a[0].dataSeries.axisX.viewportMinimum)+.5<<0:t:a[0].dataSeries.axisY.conversionParameters.reference+a[0].dataSeries.axisY.conversionParameters.pixelPerUnit*(a[0].dataPoint.y-a[0].dataSeries.axisY.viewportMinimum)+.5<<0,
a=-a+10,0<a+this.container.clientHeight+5&&(a-=a+this.container.clientHeight+5-0),this.container.style.left=toolTipLeft,this.container.style.bottom=a+"px",!this.animationEnabled||r?this.disableAnimation():this.enableAnimation()}else this.hide(!1)}},O.prototype.highlightObjects=function(e){var t=this.chart.overlaidCanvasCtx;this.chart.resetOverlayedCanvas(),t.clearRect(0,0,this.chart.width,this.chart.height),t.save();var i=this.chart.plotArea,n=0;for(t.rect(i.x1,i.y1,i.x2-i.x1,i.y2-i.y1),t.clip(),i=0;i<e.length;i++){var a=e[i];if((a=this.chart._eventManager.objectMap[a.dataSeries.dataPointIds[a.index]])&&a.objectType&&"dataPoint"===a.objectType){var n=this.chart.data[a.dataSeriesIndex],r=n.dataPoints[a.dataPointIndex],s=a.dataPointIndex;!1===r.highlightEnabled||!0!==n.highlightEnabled&&!0!==r.highlightEnabled||("line"===n.type||"stepLine"===n.type||"spline"===n.type||"scatter"===n.type||"area"===n.type||"stepArea"===n.type||"splineArea"===n.type||"stackedArea"===n.type||"stackedArea100"===n.type||"rangeArea"===n.type||"rangeSplineArea"===n.type?(r=n.getMarkerProperties(s,a.x1,a.y1,this.chart.overlaidCanvasCtx),r.size=Math.max(1.5*r.size<<0,10),r.borderColor=r.borderColor||"#FFFFFF",r.borderThickness=r.borderThickness||Math.ceil(.1*r.size),re.drawMarkers([r]),"undefined"!=typeof a.y2&&(r=n.getMarkerProperties(s,a.x1,a.y2,this.chart.overlaidCanvasCtx),r.size=Math.max(1.5*r.size<<0,10),r.borderColor=r.borderColor||"#FFFFFF",r.borderThickness=r.borderThickness||Math.ceil(.1*r.size),re.drawMarkers([r]))):"bubble"===n.type?(r=n.getMarkerProperties(s,a.x1,a.y1,this.chart.overlaidCanvasCtx),r.size=a.size,r.color="white",r.borderColor="white",t.globalAlpha=.3,re.drawMarkers([r]),t.globalAlpha=1):"column"===n.type||"stackedColumn"===n.type||"stackedColumn100"===n.type||"bar"===n.type||"rangeBar"===n.type||"stackedBar"===n.type||"stackedBar100"===n.type||"rangeColumn"===n.type?ie(t,a.x1,a.y1,a.x2,a.y2,"white",0,null,!1,!1,!1,!1,.3):"pie"===n.type||"doughnut"===n.type?ne(t,a.center,a.radius,"white",n.type,a.startAngle,a.endAngle,.3,a.percentInnerRadius):"candlestick"===n.type?(t.globalAlpha=1,t.strokeStyle=a.color,t.lineWidth=2*a.borderThickness,n=0===t.lineWidth%2?0:.5,t.beginPath(),t.moveTo(a.x3-n,a.y2),t.lineTo(a.x3-n,Math.min(a.y1,a.y4)),t.stroke(),t.beginPath(),t.moveTo(a.x3-n,Math.max(a.y1,a.y4)),t.lineTo(a.x3-n,a.y3),t.stroke(),ie(t,a.x1,Math.min(a.y1,a.y4),a.x2,Math.max(a.y1,a.y4),"transparent",2*a.borderThickness,a.color,!1,!1,!1,!1),t.globalAlpha=1):"ohlc"===n.type&&(t.globalAlpha=1,t.strokeStyle=a.color,t.lineWidth=2*a.borderThickness,n=0===t.lineWidth%2?0:.5,t.beginPath(),t.moveTo(a.x3-n,a.y2),t.lineTo(a.x3-n,a.y3),t.stroke(),t.beginPath(),t.moveTo(a.x3,a.y1),t.lineTo(a.x1,a.y1),t.stroke(),t.beginPath(),t.moveTo(a.x3,a.y4),t.lineTo(a.x2,a.y4),t.stroke(),t.globalAlpha=1))}}t.restore(),t.globalAlpha=1,t.beginPath()},O.prototype.getToolTipInnerHTML=function(e){e=e.entries;for(var t=null,i=null,n=null,a=0,r="",s=!0,o=0;o<e.length;o++)if(e[o].dataSeries.toolTipContent||e[o].dataPoint.toolTipContent){s=!1;break}if(s&&(this.content&&"function"==typeof this.content||this.contentFormatter))e={chart:this.chart._publicChartReference,toolTip:this._options,entries:e},t=this.contentFormatter?this.contentFormatter(e):this.content(e);else if(this.shared&&"none"!==this.chart.plotInfo.axisPlacement){for(var l="",o=0;o<e.length;o++)i=e[o].dataSeries,n=e[o].dataPoint,a=e[o].index,r="",0===o&&s&&!this.content&&(l+="undefined"!=typeof this.chart.axisX.labels[n.x]?this.chart.axisX.labels[n.x]:"{x}",l+="</br>",l=this.chart.replaceKeywordsWithValue(l,n,i,a)),null===n.toolTipContent||"undefined"==typeof n.toolTipContent&&null===i._options.toolTipContent||("line"===i.type||"stepLine"===i.type||"spline"===i.type||"area"===i.type||"stepArea"===i.type||"splineArea"===i.type||"column"===i.type||"bar"===i.type||"scatter"===i.type||"stackedColumn"===i.type||"stackedColumn100"===i.type||"stackedBar"===i.type||"stackedBar100"===i.type||"stackedArea"===i.type||"stackedArea100"===i.type?r+=n.toolTipContent?n.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.fontColor?"":"'color:{color};'")+"\"'>{name}:</span>&nbsp;&nbsp;{y}":"bubble"===i.type?r+=n.toolTipContent?n.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.fontColor?"":"'color:{color};'")+"\"'>{name}:</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":"rangeColumn"===i.type||"rangeBar"===i.type||"rangeArea"===i.type||"rangeSplineArea"===i.type?r+=n.toolTipContent?n.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.fontColor?"":"'color:{color};'")+"\"'>{name}:</span>&nbsp;&nbsp;{y[0]},&nbsp;{y[1]}":("candlestick"===i.type||"ohlc"===i.type)&&(r+=n.toolTipContent?n.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.fontColor?"":"'color:{color};'")+"\"'>{name}:</span><br/>Open: &nbsp;&nbsp;{y[0]}<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}<br/>Low:&nbsp;&nbsp;&nbsp;{y[2]}<br/>Close: &nbsp;&nbsp;{y[3]}"),null===t&&(t=""),!0===this.reversed?(t=this.chart.replaceKeywordsWithValue(r,n,i,a)+t,o<e.length-1&&(t="</br>"+t)):(t+=this.chart.replaceKeywordsWithValue(r,n,i,a),o<e.length-1&&(t+="</br>")));null!==t&&(t=l+t)}else{if(i=e[0].dataSeries,n=e[0].dataPoint,a=e[0].index,null===n.toolTipContent||"undefined"==typeof n.toolTipContent&&null===i._options.toolTipContent)return null;"line"===i.type||"stepLine"===i.type||"spline"===i.type||"area"===i.type||"stepArea"===i.type||"splineArea"===i.type||"column"===i.type||"bar"===i.type||"scatter"===i.type||"stackedColumn"===i.type||"stackedColumn100"===i.type||"stackedBar"===i.type||"stackedBar100"===i.type||"stackedArea"===i.type||"stackedArea100"===i.type?r=n.toolTipContent?n.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.fontColor?"":"'color:{color};'")+"\"'>"+(n.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}":"bubble"===i.type?r=n.toolTipContent?n.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.fontColor?"":"'color:{color};'")+"\"'>"+(n.label?"{label}":"{x}")+":</span>&nbsp;&nbsp;{y}, &nbsp;&nbsp;{z}":"pie"===i.type||"doughnut"===i.type||"funnel"===i.type?r=n.toolTipContent?n.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.fontColor?"":"'color:{color};'")+"\"'>"+(n.name?"{name}:</span>&nbsp;&nbsp;":n.label?"{label}:</span>&nbsp;&nbsp;":"</span>")+"{y}":"rangeColumn"===i.type||"rangeBar"===i.type||"rangeArea"===i.type||"rangeSplineArea"===i.type?r=n.toolTipContent?n.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.fontColor?"":"'color:{color};'")+"\"'>"+(n.label?"{label}":"{x}")+" :</span>&nbsp;&nbsp;{y[0]}, &nbsp;{y[1]}":("candlestick"===i.type||"ohlc"===i.type)&&(r=n.toolTipContent?n.toolTipContent:i.toolTipContent?i.toolTipContent:this.content&&"function"!=typeof this.content?this.content:"<span style='\""+(this.fontColor?"":"'color:{color};'")+"\"'>"+(n.label?"{label}":"{x}")+"</span><br/>Open: &nbsp;&nbsp;{y[0]}<br/>High: &nbsp;&nbsp;&nbsp;{y[1]}<br/>Low: &nbsp;&nbsp;&nbsp;&nbsp;{y[2]}<br/>Close: &nbsp;&nbsp;{y[3]}"),null===t&&(t=""),t+=this.chart.replaceKeywordsWithValue(r,n,i,a)}return t},O.prototype.enableAnimation=function(){this.container.style.WebkitTransition||(this.container.style.WebkitTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.MozTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.MsTransition="left .2s ease-out, bottom .2s ease-out",this.container.style.transition="left .2s ease-out, bottom .2s ease-out")},O.prototype.disableAnimation=function(){this.container.style.WebkitTransition&&(this.container.style.WebkitTransition="",this.container.style.MozTransition="",this.container.style.MsTransition="",this.container.style.transition="")},O.prototype.hide=function(e){this.enabled&&(this.container.style.display="none",this.currentSeriesIndex=-1,this._prevY=this._prevX=NaN,("undefined"==typeof e||e)&&this.chart.resetOverlayedCanvas())},T.prototype.getPercentAndTotal=function(e,t){var n=null,a=null,r=null;if(0<=e.type.indexOf("stacked"))a=0,n=t.x.getTime?t.x.getTime():t.x,n in e.plotUnit.yTotals&&(a=e.plotUnit.yTotals[n],r=isNaN(t.y)?0:0===a?0:100*(t.y/a));else if("pie"===e.type||"doughnut"===e.type){for(i=a=0;i<e.dataPoints.length;i++)isNaN(e.dataPoints[i].y)||(a+=e.dataPoints[i].y);r=isNaN(t.y)?0:100*(t.y/a)}return{percent:r,total:a}},T.prototype.replaceKeywordsWithValue=function(e,t,i,n,a){var s=this;if(a="undefined"==typeof a?0:a,(0<=i.type.indexOf("stacked")||"pie"===i.type||"doughnut"===i.type)&&(0<=e.indexOf("#percent")||0<=e.indexOf("#total"))){var o="#percent",l="#total",d=this.getPercentAndTotal(i,t),l=isNaN(d.total)?l:d.total,o=isNaN(d.percent)?o:d.percent;do{if(d="",i.percentFormatString)d=i.percentFormatString;else{var d="#,##0.",h=Math.max(Math.ceil(Math.log(1/Math.abs(o))/Math.LN10),2);(isNaN(h)||!isFinite(h))&&(h=2);for(var c=0;h>c;c++)d+="#"}e=e.replace("#percent",G(o,d,s._cultureInfo)),e=e.replace("#total",G(l,i.yValueFormatString?i.yValueFormatString:"#,##0.########"))}while(0<=e.indexOf("#percent")||0<=e.indexOf("#total"))}return e.replace(/\{.*?\}|"[^"]*"|'[^']*'/g,function(e){if('"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1])return e.slice(1,e.length-1);e=r(e.slice(1,e.length-1)),e=e.replace("#index",a);var o=null;try{var l=e.match(/(.*?)\s*\[\s*(.*?)\s*\]/);l&&0<l.length&&(o=r(l[2]),e=r(l[1]))}catch(d){}if(l=null,"color"===e)return t.color?t.color:i.color?i.color:i._colorSet[n%i._colorSet.length];if(t.hasOwnProperty(e))l=t;else{if(!i.hasOwnProperty(e))return"";l=i}return l=l[e],null!==o&&(l=l[o]),"x"===e?"dateTime"===s.plotInfo.axisXValueType||"dateTime"===i.xValueType||t.x&&t.x.getTime?q(l,t.xValueFormatString?t.xValueFormatString:i.xValueFormatString?i.xValueFormatString:s.axisX&&s.axisX.autoValueFormatString?s.axisX.autoValueFormatString:"DD MMM YY",s._cultureInfo):G(l,t.xValueFormatString?t.xValueFormatString:i.xValueFormatString?i.xValueFormatString:"#,##0.########",s._cultureInfo):"y"===e?G(l,t.yValueFormatString?t.yValueFormatString:i.yValueFormatString?i.yValueFormatString:"#,##0.########",s._cultureInfo):"z"===e?G(l,t.zValueFormatString?t.zValueFormatString:i.zValueFormatString?i.zValueFormatString:"#,##0.########",s._cultureInfo):l})},B.prototype.reset=function(){this.lastObjectId=0,this.objectMap=[],this.rectangularRegionEventSubscriptions=[],this.previousDataPointEventObject=null,this.eventObjects=[],Y&&(this.ghostCtx.clearRect(0,0,this.chart.width,this.chart.height),this.ghostCtx.beginPath())},B.prototype.getNewObjectTrackingId=function(){return++this.lastObjectId},B.prototype.mouseEventHandler=function(e){if("mousemove"===e.type||"click"===e.type){var t=[],i=K(e),n=null;if((n=this.chart.getObjectAtXY(i.x,i.y,!1))&&"undefined"!=typeof this.objectMap[n])if(n=this.objectMap[n],"dataPoint"===n.objectType){var a=this.chart.data[n.dataSeriesIndex],r=a.dataPoints[n.dataPointIndex],s=n.dataPointIndex;n.eventParameter={x:i.x,y:i.y,dataPoint:r,dataSeries:a._options,dataPointIndex:s,dataSeriesIndex:a.index,chart:this.chart._publicChartReference},n.eventContext={context:r,userContext:r,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},t.push(n),n=this.objectMap[a.id],n.eventParameter={x:i.x,y:i.y,dataPoint:r,dataSeries:a._options,dataPointIndex:s,dataSeriesIndex:a.index,chart:this.chart._publicChartReference},n.eventContext={context:a,userContext:a._options,mouseover:"mouseover",mousemove:"mousemove",mouseout:"mouseout",click:"click"},t.push(this.objectMap[a.id])}else"legendItem"===n.objectType&&(a=this.chart.data[n.dataSeriesIndex],r=null!==n.dataPointIndex?a.dataPoints[n.dataPointIndex]:null,n.eventParameter={x:i.x,y:i.y,dataSeries:a._options,dataPoint:r,dataPointIndex:n.dataPointIndex,dataSeriesIndex:n.dataSeriesIndex,chart:this.chart._publicChartReference},n.eventContext={context:this.chart.legend,userContext:this.chart.legend._options,mouseover:"itemmouseover",mousemove:"itemmousemove",mouseout:"itemmouseout",click:"itemclick"},t.push(n));for(a=[],i=0;i<this.mouseoveredObjectMaps.length;i++){for(r=!0,n=0;n<t.length;n++)if(t[n].id===this.mouseoveredObjectMaps[i].id){r=!1;break}r?this.fireEvent(this.mouseoveredObjectMaps[i],"mouseout",e):a.push(this.mouseoveredObjectMaps[i])}for(this.mouseoveredObjectMaps=a,i=0;i<t.length;i++){for(a=!1,n=0;n<this.mouseoveredObjectMaps.length;n++)if(t[i].id===this.mouseoveredObjectMaps[n].id){a=!0;break}a||(this.fireEvent(t[i],"mouseover",e),this.mouseoveredObjectMaps.push(t[i])),"click"===e.type?this.fireEvent(t[i],"click",e):"mousemove"===e.type&&this.fireEvent(t[i],"mousemove",e)}}},B.prototype.fireEvent=function(e,t,i){if(e&&t){var n=e.eventParameter,a=e.eventContext,r=e.eventContext.userContext;r&&a&&r[a[t]]&&r[a[t]].call(r,n),"mouseout"!==t?r.cursor&&r.cursor!==i.target.style.cursor&&(i.target.style.cursor=r.cursor):(i.target.style.cursor=this.chart._defaultCursor,delete e.eventParameter,delete e.eventContext),"click"===t&&"dataPoint"===e.objectType&&this.chart.pieDoughnutClickHandler&&this.chart.pieDoughnutClickHandler.call(this.chart.data[e.dataSeriesIndex],n)}},e(N,k),W.prototype.animate=function(e,t,i,n,a){var r=this;for(this.chart.isAnimating=!0,a=a||ae.easing.linear,i&&this.animations.push({startTime:(new Date).getTime()+(e?e:0),duration:t,animationCallback:i,onComplete:n}),e=[];0<this.animations.length;)t=this.animations.shift(),i=(new Date).getTime(),n=0,t.startTime<=i&&(n=a(Math.min(i-t.startTime,t.duration),0,1,t.duration),n=Math.min(n,1),isNaN(n)||!isFinite(n))&&(n=1),1>n&&e.push(t),t.animationCallback(n),n>=1&&t.onComplete&&t.onComplete();this.animations=e,0<this.animations.length?this.animationRequestId=this.chart.requestAnimFrame.call(window,function(){r.animate.call(r)}):this.chart.isAnimating=!1},W.prototype.cancelAllAnimations=function(){this.animations=[],this.animationRequestId&&this.chart.cancelRequestAnimFrame.call(window,this.animationRequestId),this.animationRequestId=null,this.chart.isAnimating=!1};var ae={yScaleAnimation:function(e,t){if(0!==e){var i=t.dest,n=t.source.canvas,a=t.animationBase;i.drawImage(n,0,0,n.width,n.height,0,a-a*e,i.canvas.width/ee,e*i.canvas.height/ee)}},xScaleAnimation:function(e,t){if(0!==e){var i=t.dest,n=t.source.canvas,a=t.animationBase;i.drawImage(n,0,0,n.width,n.height,a-a*e,0,e*i.canvas.width/ee,i.canvas.height/ee)}},xClipAnimation:function(e,t){if(0!==e){var i=t.dest,n=t.source.canvas;i.save(),e>0&&i.drawImage(n,0,0,n.width*e,n.height,0,0,n.width*e/ee,n.height/ee),i.restore()}},fadeInAnimation:function(e,t){if(0!==e){var i=t.dest,n=t.source.canvas;i.save(),i.globalAlpha=e,i.drawImage(n,0,0,n.width,n.height,0,0,i.canvas.width/ee,i.canvas.height/ee),i.restore()}},easing:{linear:function(e,t,i,n){return i*e/n+t},easeOutQuad:function(e,t,i,n){return-i*(e/=n)*(e-2)+t},easeOutQuart:function(e,t,i,n){return-i*((e=e/n-1)*e*e*e-1)+t},easeInQuad:function(e,t,i,n){return i*(e/=n)*e+t},easeInQuart:function(e,t,i,n){return i*(e/=n)*e*e*e+t}}},re={drawMarker:function(e,t,i,n,a,r,s,o){if(i){var l=1;i.fillStyle=r?r:"#000000",i.strokeStyle=s?s:"#000000",i.lineWidth=o?o:0,"circle"===n?(i.moveTo(e,t),i.beginPath(),i.arc(e,t,a/2,0,2*Math.PI,!1),r&&i.fill(),o&&(s?i.stroke():(l=i.globalAlpha,i.globalAlpha=.15,i.strokeStyle="black",i.stroke(),i.globalAlpha=l))):"square"===n?(i.beginPath(),i.rect(e-a/2,t-a/2,a,a),r&&i.fill(),o&&(s?i.stroke():(l=i.globalAlpha,i.globalAlpha=.15,i.strokeStyle="black",i.stroke(),i.globalAlpha=l))):"triangle"===n?(i.beginPath(),i.moveTo(e-a/2,t+a/2),i.lineTo(e+a/2,t+a/2),i.lineTo(e,t-a/2),i.closePath(),r&&i.fill(),o&&(s?i.stroke():(l=i.globalAlpha,i.globalAlpha=.15,i.strokeStyle="black",i.stroke(),i.globalAlpha=l)),i.beginPath()):"cross"===n&&(i.strokeStyle=r,i.lineWidth=a/4,i.beginPath(),i.moveTo(e-a/2,t-a/2),i.lineTo(e+a/2,t+a/2),i.stroke(),i.moveTo(e+a/2,t-a/2),i.lineTo(e-a/2,t+a/2),i.stroke())}},drawMarkers:function(e){for(var t=0;t<e.length;t++){var i=e[t];re.drawMarker(i.x,i.y,i.ctx,i.type,i.size,i.color,i.borderColor,i.borderThickness)}}},se={Chart:function(e,t){var i=new T(e,t,this);this.render=function(){i.render(this.options)},this.options=i._options},addColorSet:function(e,t){H[e]=t},addCultureInfo:function(e,t){X[e]=t},formatNumber:function(e,t,i){if(i=i||"en",X[i])return G(e,t||"#,##0.##",new N(i));throw"Unknown Culture Name"},formatDate:function(e,t,i){if(i=i||"en",X[i])return q(e,t||"DD MMM YYYY",new N(i));throw"Unknown Culture Name"}};se.Chart.version="v1.8.0 GA",window.CanvasJS=se}(),document.createElement("canvas").getContext||function(){function e(){return this.context_||(this.context_=new p(this))}function t(e,t,i){var n=j.call(arguments,2);return function(){return e.apply(t,n.concat(j.call(arguments)))}}function i(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function n(e){e.namespaces.g_vml_||e.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"),e.namespaces.g_o_||e.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML"),e.styleSheets.ex_canvas_||(e=e.createStyleSheet(),e.owningElement.id="ex_canvas_",e.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}")}function a(e){var t=e.srcElement;switch(e.propertyName){case"width":t.getContext().clearRect(),t.style.width=t.attributes.width.nodeValue+"px",t.firstChild.style.width=t.clientWidth+"px";break;case"height":t.getContext().clearRect(),t.style.height=t.attributes.height.nodeValue+"px",t.firstChild.style.height=t.clientHeight+"px"}}function r(e){e=e.srcElement,e.firstChild&&(e.firstChild.style.width=e.clientWidth+"px",e.firstChild.style.height=e.clientHeight+"px")}function s(){return[[1,0,0],[0,1,0],[0,0,1]]}function o(e,t){for(var i=s(),n=0;3>n;n++)for(var a=0;3>a;a++){for(var r=0,o=0;3>o;o++)r+=e[n][o]*t[o][a];i[n][a]=r}return i}function l(e,t){t.fillStyle=e.fillStyle,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.strokeStyle=e.strokeStyle,t.globalAlpha=e.globalAlpha,t.font=e.font,t.textAlign=e.textAlign,t.textBaseline=e.textBaseline,t.arcScaleX_=e.arcScaleX_,t.arcScaleY_=e.arcScaleY_,t.lineScale_=e.lineScale_}function d(e){var t=e.indexOf("(",3),i=e.indexOf(")",t+1),t=e.substring(t+1,i).split(",");return(4!=t.length||"a"!=e.charAt(3))&&(t[3]=1),t}function h(e,t,i){return Math.min(i,Math.max(t,e))}function c(e,t,i){return 0>i&&i++,i>1&&i--,1>6*i?e+6*(t-e)*i:1>2*i?t:2>3*i?e+6*(t-e)*(2/3-i):e}function u(e){if(e in O)return O[e];var t,i=1;if(e=String(e),"#"==e.charAt(0))t=e;else if(/^rgb/.test(e)){i=d(e),t="#";for(var n,a=0;3>a;a++)n=-1!=i[a].indexOf("%")?Math.floor(255*(parseFloat(i[a])/100)):+i[a],t+=L[h(n,0,255)];i=+i[3]}else if(/^hsl/.test(e)){if(a=i=d(e),t=parseFloat(a[0])/360%360,0>t&&t++,n=h(parseFloat(a[1])/100,0,1),a=h(parseFloat(a[2])/100,0,1),0==n)n=a=t=a;else{var r=.5>a?a*(1+n):a+n-a*n,s=2*a-r;n=c(s,r,t+1/3),a=c(s,r,t),t=c(s,r,t-1/3)}t="#"+L[Math.floor(255*n)]+L[Math.floor(255*a)]+L[Math.floor(255*t)],i=i[3]}else t=E[e]||e;return O[e]={color:t,alpha:i}}function p(e){this.m_=s(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.fillStyle=this.strokeStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*P,this.globalAlpha=1,this.font="10px sans-serif",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=e;var t="width:"+e.clientWidth+"px;height:"+e.clientHeight+"px;overflow:hidden;position:absolute",i=e.ownerDocument.createElement("div");i.style.cssText=t,e.appendChild(i),t=i.cloneNode(!1),t.style.backgroundColor="red",t.style.filter="alpha(opacity=0)",e.appendChild(t),this.element_=i,this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}function f(e,t,i,n){e.currentPath_.push({type:"bezierCurveTo",cp1x:t.x,cp1y:t.y,cp2x:i.x,cp2y:i.y,x:n.x,y:n.y}),e.currentX_=n.x,e.currentY_=n.y}function m(e,t){var i=u(e.strokeStyle),n=i.color,i=i.alpha*e.globalAlpha,a=e.lineScale_*e.lineWidth;1>a&&(i*=a),t.push("<g_vml_:stroke",' opacity="',i,'"',' joinstyle="',e.lineJoin,'"',' miterlimit="',e.miterLimit,'"',' endcap="',N[e.lineCap]||"square",'"',' weight="',a,'px"',' color="',n,'" />')}function g(e,t,i,n){var a=e.fillStyle,r=e.arcScaleX_,s=e.arcScaleY_,o=n.x-i.x,l=n.y-i.y;if(a instanceof v){var d=0,h=n=0,c=0,p=1;if("gradient"==a.type_){d=a.x1_/r,i=a.y1_/s;var f=x(e,a.x0_/r,a.y0_/s),d=x(e,d,i),d=180*Math.atan2(d.x-f.x,d.y-f.y)/Math.PI;0>d&&(d+=360),1e-6>d&&(d=0)}else f=x(e,a.x0_,a.y0_),n=(f.x-i.x)/o,h=(f.y-i.y)/l,o/=r*P,l/=s*P,p=w.max(o,l),c=2*a.r0_/p,p=2*a.r1_/p-c;r=a.colors_,r.sort(function(e,t){return e.offset-t.offset}),s=r.length,f=r[0].color,i=r[s-1].color,o=r[0].alpha*e.globalAlpha,e=r[s-1].alpha*e.globalAlpha;for(var l=[],m=0;s>m;m++){var g=r[m];l.push(g.offset*p+c+" "+g.color)}t.push('<g_vml_:fill type="',a.type_,'"',' method="none" focus="100%"',' color="',f,'"',' color2="',i,'"',' colors="',l.join(","),'"',' opacity="',e,'"',' g_o_:opacity2="',o,'"',' angle="',d,'"',' focusposition="',n,",",h,'" />')}else a instanceof _?o&&l&&t.push("<g_vml_:fill",' position="',-i.x/o*r*r,",",-i.y/l*s*s,'"',' type="tile"',' src="',a.src_,'" />'):(a=u(e.fillStyle),t.push('<g_vml_:fill color="',a.color,'" opacity="',a.alpha*e.globalAlpha,'" />'))}function x(e,t,i){return e=e.m_,{x:P*(t*e[0][0]+i*e[1][0]+e[2][0])-A,y:P*(t*e[0][1]+i*e[1][1]+e[2][1])-A}}function y(e,t,i){isFinite(t[0][0])&&isFinite(t[0][1])&&isFinite(t[1][0])&&isFinite(t[1][1])&&isFinite(t[2][0])&&isFinite(t[2][1])&&(e.m_=t,i&&(e.lineScale_=S(C(t[0][0]*t[1][1]-t[0][1]*t[1][0]))))}function v(e){this.type_=e,this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0,this.colors_=[]}function _(e,t){if(!e||1!=e.nodeType||"IMG"!=e.tagName)throw new b("TYPE_MISMATCH_ERR");if("complete"!=e.readyState)throw new b("INVALID_STATE_ERR");switch(t){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=t;break;default:throw new b("SYNTAX_ERR")}this.src_=e.src,this.width_=e.width,this.height_=e.height}function b(e){this.code=this[e],this.message=e+": DOM Exception "+this.code}var w=Math,k=w.round,T=w.sin,M=w.cos,C=w.abs,S=w.sqrt,P=10,A=P/2;navigator.userAgent.match(/MSIE ([\d.]+)?/);var j=Array.prototype.slice;n(document);var D={init:function(e){e=e||document,e.createElement("canvas"),e.attachEvent("onreadystatechange",t(this.init_,this,e))},init_:function(e){e=e.getElementsByTagName("canvas");for(var t=0;t<e.length;t++)this.initElement(e[t])},initElement:function(t){if(!t.getContext){t.getContext=e,n(t.ownerDocument),t.innerHTML="",t.attachEvent("onpropertychange",a),t.attachEvent("onresize",r);var i=t.attributes;i.width&&i.width.specified?t.style.width=i.width.nodeValue+"px":t.width=t.clientWidth,i.height&&i.height.specified?t.style.height=i.height.nodeValue+"px":t.height=t.clientHeight}return t}};D.init();for(var L=[],I=0;16>I;I++)for(var F=0;16>F;F++)L[16*I+F]=I.toString(16)+F.toString(16);var E={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},O={},B={},N={butt:"flat",round:"round"},I=p.prototype;I.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},I.beginPath=function(){this.currentPath_=[]},I.moveTo=function(e,t){var i=x(this,e,t);this.currentPath_.push({type:"moveTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},I.lineTo=function(e,t){var i=x(this,e,t);this.currentPath_.push({type:"lineTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},I.bezierCurveTo=function(e,t,i,n,a,r){a=x(this,a,r),e=x(this,e,t),i=x(this,i,n),f(this,e,i,a)},I.quadraticCurveTo=function(e,t,i,n){e=x(this,e,t),i=x(this,i,n),n={x:this.currentX_+2/3*(e.x-this.currentX_),y:this.currentY_+2/3*(e.y-this.currentY_)},f(this,n,{x:n.x+(i.x-this.currentX_)/3,y:n.y+(i.y-this.currentY_)/3},i)},I.arc=function(e,t,i,n,a,r){i*=P;var s=r?"at":"wa",o=e+M(n)*i-A,l=t+T(n)*i-A;n=e+M(a)*i-A,a=t+T(a)*i-A,o!=n||r||(o+=.125),e=x(this,e,t),o=x(this,o,l),n=x(this,n,a),this.currentPath_.push({type:s,x:e.x,y:e.y,radius:i,xStart:o.x,yStart:o.y,xEnd:n.x,yEnd:n.y})},I.rect=function(e,t,i,n){this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+n),this.lineTo(e,t+n),this.closePath()},I.strokeRect=function(e,t,i,n){var a=this.currentPath_;this.beginPath(),this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+n),this.lineTo(e,t+n),this.closePath(),this.stroke(),this.currentPath_=a},I.fillRect=function(e,t,i,n){var a=this.currentPath_;this.beginPath(),this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+n),this.lineTo(e,t+n),this.closePath(),this.fill(),this.currentPath_=a},I.createLinearGradient=function(e,t,i,n){var a=new v("gradient");return a.x0_=e,a.y0_=t,a.x1_=i,a.y1_=n,a},I.createRadialGradient=function(e,t,i,n,a,r){var s=new v("gradientradial");return s.x0_=e,s.y0_=t,s.r0_=i,s.x1_=n,s.y1_=a,s.r1_=r,s},I.drawImage=function(e,t){var i,n,a,r,s,o,l,d;a=e.runtimeStyle.width,r=e.runtimeStyle.height,e.runtimeStyle.width="auto",e.runtimeStyle.height="auto";var h=e.width,c=e.height;if(e.runtimeStyle.width=a,e.runtimeStyle.height=r,3==arguments.length)i=arguments[1],n=arguments[2],s=o=0,l=a=h,d=r=c;else if(5==arguments.length)i=arguments[1],n=arguments[2],a=arguments[3],r=arguments[4],s=o=0,l=h,d=c;else{if(9!=arguments.length)throw Error("Invalid number of arguments");s=arguments[1],o=arguments[2],l=arguments[3],d=arguments[4],i=arguments[5],n=arguments[6],a=arguments[7],r=arguments[8]}var u=x(this,i,n),p=[];if(p.push(" <g_vml_:group",' coordsize="',10*P,",",10*P,'"',' coordorigin="0,0"',' style="width:',10,"px;height:",10,"px;position:absolute;"),1!=this.m_[0][0]||this.m_[0][1]||1!=this.m_[1][1]||this.m_[1][0]){var f=[];f.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",k(u.x/P),",","Dy=",k(u.y/P),"");var m=x(this,i+a,n),g=x(this,i,n+r);i=x(this,i+a,n+r),u.x=w.max(u.x,m.x,g.x,i.x),u.y=w.max(u.y,m.y,g.y,i.y),p.push("padding:0 ",k(u.x/P),"px ",k(u.y/P),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",f.join(""),", sizingmethod='clip');")}else p.push("top:",k(u.y/P),"px;left:",k(u.x/P),"px;");p.push(' ">','<g_vml_:image src="',e.src,'"',' style="width:',P*a,"px;"," height:",P*r,'px"',' cropleft="',s/h,'"',' croptop="',o/c,'"',' cropright="',(h-s-l)/h,'"',' cropbottom="',(c-o-d)/c,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",p.join(""))},I.stroke=function(e){var t=[];t.push("<g_vml_:shape",' filled="',!!e,'"',' style="position:absolute;width:',10,"px;height:",10,'px;"',' coordorigin="0,0"',' coordsize="',10*P,",",10*P,'"',' stroked="',!e,'"',' path="');for(var i={x:null,y:null},n={x:null,y:null},a=0;a<this.currentPath_.length;a++){var r=this.currentPath_[a];switch(r.type){case"moveTo":t.push(" m ",k(r.x),",",k(r.y));break;case"lineTo":t.push(" l ",k(r.x),",",k(r.y));break;case"close":t.push(" x "),r=null;break;case"bezierCurveTo":t.push(" c ",k(r.cp1x),",",k(r.cp1y),",",k(r.cp2x),",",k(r.cp2y),",",k(r.x),",",k(r.y));break;case"at":case"wa":t.push(" ",r.type," ",k(r.x-this.arcScaleX_*r.radius),",",k(r.y-this.arcScaleY_*r.radius)," ",k(r.x+this.arcScaleX_*r.radius),",",k(r.y+this.arcScaleY_*r.radius)," ",k(r.xStart),",",k(r.yStart)," ",k(r.xEnd),",",k(r.yEnd))}r&&((null==i.x||r.x<i.x)&&(i.x=r.x),(null==n.x||r.x>n.x)&&(n.x=r.x),(null==i.y||r.y<i.y)&&(i.y=r.y),(null==n.y||r.y>n.y)&&(n.y=r.y))}t.push(' ">'),e?g(this,t,i,n):m(this,t),t.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",t.join(""))},I.fill=function(){this.stroke(!0)},I.closePath=function(){this.currentPath_.push({type:"close"})},I.save=function(){var e={};l(this,e),this.aStack_.push(e),this.mStack_.push(this.m_),this.m_=o(s(),this.m_)},I.restore=function(){this.aStack_.length&&(l(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},I.translate=function(e,t){y(this,o([[1,0,0],[0,1,0],[e,t,1]],this.m_),!1)},I.rotate=function(e){var t=M(e);e=T(e),y(this,o([[t,e,0],[-e,t,0],[0,0,1]],this.m_),!1)},I.scale=function(e,t){this.arcScaleX_*=e,this.arcScaleY_*=t,y(this,o([[e,0,0],[0,t,0],[0,0,1]],this.m_),!0)},I.transform=function(e,t,i,n,a,r){y(this,o([[e,t,0],[i,n,0],[a,r,1]],this.m_),!0)},I.setTransform=function(e,t,i,n,a,r){y(this,[[e,t,0],[i,n,0],[a,r,1]],!0)},I.drawText_=function(e,t,n,a,r){var s=this.m_;a=0;var o,l=1e3,d=0,h=[];if(o=this.font,B[o])o=B[o];else{var c=document.createElement("div").style;try{c.font=o}catch(u){}o=B[o]={style:c.fontStyle||"normal",variant:c.fontVariant||"normal",weight:c.fontWeight||"normal",size:c.fontSize||10,family:c.fontFamily||"sans-serif"}}var c=o,p=this.element_;o={};for(var f in c)o[f]=c[f];switch(f=parseFloat(p.currentStyle.fontSize),p=parseFloat(c.size),"number"==typeof c.size?o.size=c.size:-1!=c.size.indexOf("px")?o.size=p:-1!=c.size.indexOf("em")?o.size=f*p:-1!=c.size.indexOf("%")?o.size=f/100*p:-1!=c.size.indexOf("pt")?o.size=p/.75:o.size=f,o.size*=.981,f=o.style+" "+o.variant+" "+o.weight+" "+o.size+"px "+o.family,p=this.element_.currentStyle,c=this.textAlign.toLowerCase()){case"left":case"center":case"right":break;case"end":c="ltr"==p.direction?"right":"left";break;case"start":c="rtl"==p.direction?"right":"left";break;default:c="left"}switch(this.textBaseline){case"hanging":case"top":d=o.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":d=-o.size/2.25}switch(c){case"right":a=1e3,l=.05;break;case"center":a=l=500}t=x(this,t+0,n+d),h.push('<g_vml_:line from="',-a,' 0" to="',l,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!r,'" stroked="',!!r,'" style="position:absolute;width:1px;height:1px;">'),r?m(this,h):g(this,h,{x:-a,y:0},{x:l,y:o.size}),r=s[0][0].toFixed(3)+","+s[1][0].toFixed(3)+","+s[0][1].toFixed(3)+","+s[1][1].toFixed(3)+",0,0",
t=k(t.x/P)+","+k(t.y/P),h.push('<g_vml_:skew on="t" matrix="',r,'" ',' offset="',t,'" origin="',a,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',i(e),'" style="v-text-align:',c,";font:",i(f),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",h.join(""))},I.fillText=function(e,t,i,n){this.drawText_(e,t,i,n,!1)},I.strokeText=function(e,t,i,n){this.drawText_(e,t,i,n,!0)},I.measureText=function(e){this.textMeasureEl_||(this.element_.insertAdjacentHTML("beforeEnd",'<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>'),this.textMeasureEl_=this.element_.lastChild);var t=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(t.createTextNode(e)),{width:this.textMeasureEl_.offsetWidth}},I.clip=function(){},I.arcTo=function(){},I.createPattern=function(e,t){return new _(e,t)},v.prototype.addColorStop=function(e,t){t=u(t),this.colors_.push({offset:e,color:t.color,alpha:t.alpha})},I=b.prototype=Error(),I.INDEX_SIZE_ERR=1,I.DOMSTRING_SIZE_ERR=2,I.HIERARCHY_REQUEST_ERR=3,I.WRONG_DOCUMENT_ERR=4,I.INVALID_CHARACTER_ERR=5,I.NO_DATA_ALLOWED_ERR=6,I.NO_MODIFICATION_ALLOWED_ERR=7,I.NOT_FOUND_ERR=8,I.NOT_SUPPORTED_ERR=9,I.INUSE_ATTRIBUTE_ERR=10,I.INVALID_STATE_ERR=11,I.SYNTAX_ERR=12,I.INVALID_MODIFICATION_ERR=13,I.NAMESPACE_ERR=14,I.INVALID_ACCESS_ERR=15,I.VALIDATION_ERR=16,I.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=D,CanvasRenderingContext2D=p,CanvasGradient=v,CanvasPattern=_,DOMException=b}(),!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e,t){"use strict";if(!e.jstree){var i,n,a=0,r=!1,s=!1,o=!1,l=[],d=e("script:last").attr("src"),h=window.document,c=h.createElement("LI");c.setAttribute("role","treeitem"),i=h.createElement("I"),i.className="jstree-icon jstree-ocl",i.setAttribute("role","presentation"),c.appendChild(i),i=h.createElement("A"),i.className="jstree-anchor",i.setAttribute("href","#"),i.setAttribute("tabindex","-1"),n=h.createElement("I"),n.className="jstree-icon jstree-themeicon",n.setAttribute("role","presentation"),i.appendChild(n),c.appendChild(i),i=n=null,e.jstree={version:"3.3.0",defaults:{plugins:[]},plugins:{},path:d&&-1!==d.indexOf("/")?d.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},e.jstree.create=function(t,i){var n=new e.jstree.core(++a),r=i;return i=e.extend(!0,{},e.jstree.defaults,i),r&&r.plugins&&(i.plugins=r.plugins),e.each(i.plugins,function(e,t){"core"!==e&&(n=n.plugin(t,i[t]))}),e(t).data("jstree",n),n.init(t,i),n},e.jstree.destroy=function(){e(".jstree:jstree").jstree("destroy"),e(h).off(".jstree")},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},e.jstree.reference=function(t){var i=null,n=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!n||!n.length)try{n=e(t)}catch(a){}if(!n||!n.length)try{n=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(a){}return n&&n.length&&(n=n.closest(".jstree")).length&&(n=n.data("jstree"))?i=n:e(".jstree").each(function(){var n=e(this).data("jstree");return n&&n._model.data[t]?(i=n,!1):void 0}),i},e.fn.jstree=function(i){var n="string"==typeof i,a=Array.prototype.slice.call(arguments,1),r=null;return i!==!0||this.length?(this.each(function(){var s=e.jstree.reference(this),o=n&&s?s[i]:null;return r=n&&o?o.apply(s,a):null,s||n||i!==t&&!e.isPlainObject(i)||e.jstree.create(this,i),(s&&!n||i===!0)&&(r=s||!1),null!==r&&r!==t?!1:void 0}),null!==r&&r!==t?r:this):!1},e.expr[":"].jstree=e.expr.createPseudo(function(i){return function(i){return e(i).hasClass("jstree")&&e(i).data("jstree")!==t}}),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},e.jstree.core.prototype={plugin:function(t,i){var n=e.jstree.plugins[t];return n?(this._data[t]={},n.prototype=this,new n(i,this)):this},init:function(t,i){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=i,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().height()||24,this.trigger("loading"),this.load_node(e.jstree.root)},destroy:function(e){if(this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(t){}e||this.element.empty(),this.teardown()},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var t="",i=null,n=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(h.selection&&h.selection.empty)h.selection.empty();else if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(i){}}}).on("mousedown.jstree",e.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),n=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",e.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",e.proxy(function(e){return e.target.tagName&&"input"===e.target.tagName.toLowerCase()?!0:void(this.settings.core.dblclick_toggle&&this.toggle_node(e.target))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){t.preventDefault(),t.currentTarget!==h.activeElement&&e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",e.proxy(function(t){if(t.target.tagName&&"input"===t.target.tagName.toLowerCase())return!0;if(32!==t.which&&13!==t.which&&(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey))return!0;var i=null;switch(this._data.core.rtl&&(37===t.which?t.which=39:39===t.which&&(t.which=37)),t.which){case 32:t.ctrlKey&&(t.type="click",e(t.currentTarget).trigger(t));break;case 13:t.type="click",e(t.currentTarget).trigger(t);break;case 37:t.preventDefault(),this.is_open(t.currentTarget)?this.close_node(t.currentTarget):(i=this.get_parent(t.currentTarget),i&&i.id!==e.jstree.root&&this.get_node(i,!0).children(".jstree-anchor").focus());break;case 38:t.preventDefault(),i=this.get_prev_dom(t.currentTarget),i&&i.length&&i.children(".jstree-anchor").focus();break;case 39:t.preventDefault(),this.is_closed(t.currentTarget)?this.open_node(t.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()}):this.is_open(t.currentTarget)&&(i=this.get_node(t.currentTarget,!0).children(".jstree-children")[0],i&&e(this._firstChild(i)).children(".jstree-anchor").focus());break;case 40:t.preventDefault(),i=this.get_next_dom(t.currentTarget),i&&i.length&&i.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:t.preventDefault(),i=this._firstChild(this.get_container_ul()[0]),i&&e(i).children(".jstree-anchor").filter(":visible").focus();break;case 35:t.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus();break;case 113:t.preventDefault(),this.edit(t.currentTarget)}},this)).on("load_node.jstree",e.proxy(function(t,i){i.status&&(i.node.id!==e.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(e.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var t,i,n=[];for(t=0,i=this._data.core.selected.length;i>t;t++)n=n.concat(this._model.data[this._data.core.selected[t]].parents);for(n=e.vakata.array_unique(n),t=0,i=n.length;i>t;t++)this.open_node(n[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",e.proxy(function(n){if(n.target.tagName&&"input"===n.target.tagName.toLowerCase())return!0;i&&clearTimeout(i),i=setTimeout(function(){t=""},500);var a=String.fromCharCode(n.which).toLowerCase(),r=this.element.find(".jstree-anchor").filter(":visible"),s=r.index(h.activeElement)||0,o=!1;if(t+=a,t.length>1){if(r.slice(s).each(e.proxy(function(i,n){return 0===e(n).text().toLowerCase().indexOf(t)?(e(n).focus(),o=!0,!1):void 0},this)),o)return;if(r.slice(0,s).each(e.proxy(function(i,n){return 0===e(n).text().toLowerCase().indexOf(t)?(e(n).focus(),o=!0,!1):void 0},this)),o)return}if(new RegExp("^"+a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(t)){if(r.slice(s+1).each(e.proxy(function(t,i){return e(i).text().toLowerCase().charAt(0)===a?(e(i).focus(),o=!0,!1):void 0},this)),o)return;if(r.slice(0,s+1).each(e.proxy(function(t,i){return e(i).text().toLowerCase().charAt(0)===a?(e(i).focus(),o=!0,!1):void 0},this)),o)return}},this)).on("init.jstree",e.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",e.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",e.proxy(function(t){this._data.core.focused=null,e(t.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",e.proxy(function(t){var i=this.get_node(t.currentTarget);i&&i.id&&(this._data.core.focused=i.id),this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave(),e(t.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",e.proxy(function(){if(+new Date-n>500&&!this._data.core.focused){n=0;var e=this.get_node(this.element.attr("aria-activedescendant"),!0);e&&e.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",e.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),e(h).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var i=this.settings.core.strings;return e.isFunction(i)?i.call(this,t):i&&i[t]?i[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t,i){t&&t.id&&(t=t.id);var n;try{if(this._model.data[t])t=this._model.data[t];else if("string"==typeof t&&this._model.data[t.replace(/^#/,"")])t=this._model.data[t.replace(/^#/,"")];else if("string"==typeof t&&(n=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[n.closest(".jstree-node").attr("id")])t=this._model.data[n.closest(".jstree-node").attr("id")];else if((n=e(t,this.element)).length&&this._model.data[n.closest(".jstree-node").attr("id")])t=this._model.data[n.closest(".jstree-node").attr("id")];else{if(!(n=e(t,this.element)).length||!n.hasClass("jstree"))return!1;t=this._model.data[e.jstree.root]}return i&&(t=t.id===e.jstree.root?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(a){return!1}},get_path:function(t,i,n){if(t=t.parents?t:this.get_node(t),!t||t.id===e.jstree.root||!t.parents)return!1;var a,r,s=[];for(s.push(n?t.id:t.text),a=0,r=t.parents.length;r>a;a++)s.push(n?t.parents[a]:this.get_text(t.parents[a]));return s=s.reverse().slice(1),i?s.join(i):s},get_next_dom:function(t,i){var n;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(n=this._firstChild(this.get_container_ul()[0]);n&&0===n.offsetHeight;)n=this._nextSibling(n);return n?e(n):!1}if(!t||!t.length)return!1;if(i){n=t[0];do n=this._nextSibling(n);while(n&&0===n.offsetHeight);return n?e(n):!1}if(t.hasClass("jstree-open")){for(n=this._firstChild(t.children(".jstree-children")[0]);n&&0===n.offsetHeight;)n=this._nextSibling(n);if(null!==n)return e(n)}n=t[0];do n=this._nextSibling(n);while(n&&0===n.offsetHeight);return null!==n?e(n):t.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(t,i){var n;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(n=this.get_container_ul()[0].lastChild;n&&0===n.offsetHeight;)n=this._previousSibling(n);return n?e(n):!1}if(!t||!t.length)return!1;if(i){n=t[0];do n=this._previousSibling(n);while(n&&0===n.offsetHeight);return n?e(n):!1}n=t[0];do n=this._previousSibling(n);while(n&&0===n.offsetHeight);if(null!==n){for(t=e(n);t.hasClass("jstree-open");)t=t.children(".jstree-children").first().children(".jstree-node:visible:last");return t}return n=t[0].parentNode.parentNode,n&&n.className&&-1!==n.className.indexOf("jstree-node")?e(n):!1},get_parent:function(t){return t=this.get_node(t),t&&t.id!==e.jstree.root?t.parent:!1},get_children_dom:function(e){return e=this.get_node(e,!0),e[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):e&&e.length?e.children(".jstree-children").children(".jstree-node"):!1},is_parent:function(e){return e=this.get_node(e),e&&(e.state.loaded===!1||e.children.length>0)},is_loaded:function(e){return e=this.get_node(e),e&&e.state.loaded},is_loading:function(e){return e=this.get_node(e),e&&e.state&&e.state.loading},is_open:function(e){return e=this.get_node(e),e&&e.state.opened},is_closed:function(e){return e=this.get_node(e),e&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,i){var n,a,r,s,o;if(e.isArray(t))return this._load_nodes(t.slice(),i),!0;if(t=this.get_node(t),!t)return i&&i.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,r=0,s=t.parents.length;s>r;r++)this._model.data[t.parents[r]].children_d=e.vakata.array_filter(this._model.data[t.parents[r]].children_d,function(i){return-1===e.inArray(i,t.children_d)});for(n=0,a=t.children_d.length;a>n;n++)this._model.data[t.children_d[n]].state.selected&&(o=!0),delete this._model.data[t.children_d[n]];o&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(i){return-1===e.inArray(i,t.children_d)})),t.children=[],t.children_d=[],o&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.failed=!1,t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(t,e.proxy(function(e){t=this._model.data[t.id],t.state.loading=!1,t.state.loaded=e,t.state.failed=!t.state.loaded;var n=this.get_node(t,!0),a=0,r=0,s=this._model.data,o=!1;for(a=0,r=t.children.length;r>a;a++)if(s[t.children[a]]&&!s[t.children[a]].state.hidden){o=!0;break}t.state.loaded&&n&&n.length&&(n.removeClass("jstree-closed jstree-open jstree-leaf"),o?"#"!==t.id&&n.addClass(t.state.opened?"jstree-open":"jstree-closed"):n.addClass("jstree-leaf")),n.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:t,status:e}),i&&i.call(this,t,e)},this)),!0},_load_nodes:function(e,t,i,n){var a,r,s=!0,o=function(){this._load_nodes(e,t,!0)},l=this._model.data,d=[];for(a=0,r=e.length;r>a;a++)l[e[a]]&&(!l[e[a]].state.loaded&&!l[e[a]].state.failed||!i&&n)&&(this.is_loading(e[a])||this.load_node(e[a],o),s=!1);if(s){for(a=0,r=e.length;r>a;a++)l[e[a]]&&l[e[a]].state.loaded&&d.push(e[a]);t&&!t.done&&(t.call(this,d),t.done=!0)}},load_all:function(t,i){if(t||(t=e.jstree.root),t=this.get_node(t),!t)return!1;var n,a,r=[],s=this._model.data,o=s[t.id].children_d;for(t.state&&!t.state.loaded&&r.push(t.id),n=0,a=o.length;a>n;n++)s[o[n]]&&s[o[n]].state&&!s[o[n]].state.loaded&&r.push(o[n]);r.length?this._load_nodes(r,function(){this.load_all(t,i)}):(i&&i.call(this,t),this.trigger("load_all",{node:t}))},_load_node:function(t,i){var n,a=this.settings.core.data;return a?e.isFunction(a)?a.call(this,t,e.proxy(function(n){n===!1?i.call(this,!1):this["string"==typeof n?"_append_html_data":"_append_json_data"](t,"string"==typeof n?e(e.parseHTML(n)).filter(function(){return 3!==this.nodeType}):n,function(e){i.call(this,e)})},this)):"object"==typeof a?a.url?(a=e.extend(!0,{},a),e.isFunction(a.url)&&(a.url=a.url.call(this,t)),e.isFunction(a.data)&&(a.data=a.data.call(this,t)),e.ajax(a).done(e.proxy(function(n,a,r){var s=r.getResponseHeader("Content-Type");return s&&-1!==s.indexOf("json")||"object"==typeof n?this._append_json_data(t,n,function(e){i.call(this,e)}):s&&-1!==s.indexOf("html")||"string"==typeof n?this._append_html_data(t,e(e.parseHTML(n)).filter(function(){return 3!==this.nodeType}),function(e){i.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:r})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1))},this)).fail(e.proxy(function(e){i.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},this.settings.core.error.call(this,this._data.core.last_error)},this))):(n=e.isArray(a)||e.isPlainObject(a)?JSON.parse(JSON.stringify(a)):a,t.id===e.jstree.root?this._append_json_data(t,n,function(e){i.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1))):"string"==typeof a?t.id===e.jstree.root?this._append_html_data(t,e(e.parseHTML(a)).filter(function(){return 3!==this.nodeType}),function(e){i.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),i.call(this,!1)):i.call(this,!1):t.id===e.jstree.root?this._append_html_data(t,this._data.core.original_container_html.clone(!0),function(e){i.call(this,e)}):i.call(this,!1)},_node_changed:function(e){e=this.get_node(e),e&&this._model.changed.push(e.id)},_append_html_data:function(t,i,n){t=this.get_node(t),t.children=[],t.children_d=[];var a,r,s,o=i.is("ul")?i.children():i,l=t.id,d=[],h=[],c=this._model.data,u=c[l],p=this._data.core.selected.length;for(o.each(e.proxy(function(t,i){a=this._parse_model_from_html(e(i),l,u.parents.concat()),a&&(d.push(a),h.push(a),c[a].children_d.length&&(h=h.concat(c[a].children_d)))},this)),u.children=d,u.children_d=h,r=0,s=u.parents.length;s>r;r++)c[u.parents[r]].children_d=c[u.parents[r]].children_d.concat(h);this.trigger("model",{nodes:h,parent:l}),l!==e.jstree.root?(this._node_changed(l),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==p&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),n.call(this,!0)},_append_json_data:function(t,i,n,a){if(null!==this.element){t=this.get_node(t),t.children=[],t.children_d=[],i.d&&(i=i.d,"string"==typeof i&&(i=JSON.parse(i))),e.isArray(i)||(i=[i]);var r=null,s={df:this._model.default_state,dat:i,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},o=function(e,t){e.data&&(e=e.data);var i,n,a,r,s=e.dat,o=e.par,l=[],d=[],h=[],c=e.df,u=e.t_id,p=e.t_cnt,f=e.m,m=f[o],g=e.sel,x=function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var a,r,s,o,l=e.id.toString(),d={id:l,text:e.text||"",icon:e.icon!==t?e.icon:!0,parent:i,parents:n,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(a in c)c.hasOwnProperty(a)&&(d.state[a]=c[a]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon),(d.icon===t||null===d.icon||""===d.icon)&&(d.icon=!0),e&&e.data&&(d.data=e.data,e.data.jstree))for(a in e.data.jstree)e.data.jstree.hasOwnProperty(a)&&(d.state[a]=e.data.jstree[a]);if(e&&"object"==typeof e.state)for(a in e.state)e.state.hasOwnProperty(a)&&(d.state[a]=e.state[a]);if(e&&"object"==typeof e.li_attr)for(a in e.li_attr)e.li_attr.hasOwnProperty(a)&&(d.li_attr[a]=e.li_attr[a]);if(d.li_attr.id||(d.li_attr.id=l),e&&"object"==typeof e.a_attr)for(a in e.a_attr)e.a_attr.hasOwnProperty(a)&&(d.a_attr[a]=e.a_attr[a]);for(e&&e.children&&e.children===!0&&(d.state.loaded=!1,d.children=[],d.children_d=[]),f[d.id]=d,a=0,r=d.children.length;r>a;a++)s=x(f[d.children[a]],d.id,n),o=f[s],d.children_d.push(s),o.children_d.length&&(d.children_d=d.children_d.concat(o.children_d));return delete e.data,delete e.children,f[d.id].original=e,d.state.selected&&h.push(d.id),d.id},y=function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var a,r,s,o,l,d=!1;do d="j"+u+"_"+ ++p;while(f[d]);l={id:!1,text:"string"==typeof e?e:"",icon:"object"==typeof e&&e.icon!==t?e.icon:!0,parent:i,parents:n,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(a in c)c.hasOwnProperty(a)&&(l.state[a]=c[a]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),(l.icon===t||null===l.icon||""===l.icon)&&(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(a in e.data.jstree)e.data.jstree.hasOwnProperty(a)&&(l.state[a]=e.data.jstree[a]);if(e&&"object"==typeof e.state)for(a in e.state)e.state.hasOwnProperty(a)&&(l.state[a]=e.state[a]);if(e&&"object"==typeof e.li_attr)for(a in e.li_attr)e.li_attr.hasOwnProperty(a)&&(l.li_attr[a]=e.li_attr[a]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=d),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(a in e.a_attr)e.a_attr.hasOwnProperty(a)&&(l.a_attr[a]=e.a_attr[a]);if(e&&e.children&&e.children.length){for(a=0,r=e.children.length;r>a;a++)s=y(e.children[a],l.id,n),o=f[s],l.children.push(s),o.children_d.length&&(l.children_d=l.children_d.concat(o.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&e.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,f[l.id]=l,l.state.selected&&h.push(l.id),l.id};if(s.length&&s[0].id!==t&&s[0].parent!==t){for(n=0,a=s.length;a>n;n++)s[n].children||(s[n].children=[]),f[s[n].id.toString()]=s[n];for(n=0,a=s.length;a>n;n++)f[s[n].parent.toString()].children.push(s[n].id.toString()),m.children_d.push(s[n].id.toString());for(n=0,a=m.children.length;a>n;n++)i=x(f[m.children[n]],o,m.parents.concat()),d.push(i),f[i].children_d.length&&(d=d.concat(f[i].children_d));for(n=0,a=m.parents.length;a>n;n++)f[m.parents[n]].children_d=f[m.parents[n]].children_d.concat(d);r={cnt:p,mod:f,sel:g,par:o,dpc:d,add:h}}else{for(n=0,a=s.length;a>n;n++)i=y(s[n],o,m.parents.concat()),i&&(l.push(i),d.push(i),f[i].children_d.length&&(d=d.concat(f[i].children_d)));for(m.children=l,m.children_d=d,n=0,a=m.parents.length;a>n;n++)f[m.parents[n]].children_d=f[m.parents[n]].children_d.concat(d);r={cnt:p,mod:f,sel:g,par:o,dpc:d,add:h}}return"undefined"!=typeof window&&"undefined"!=typeof window.document?r:void postMessage(r)},l=function(t,i){if(null!==this.element){this._cnt=t.cnt;var a,r=this._model.data;for(a in r)r.hasOwnProperty(a)&&r[a].state&&r[a].state.loading&&t.mod[a]&&(t.mod[a].state.loading=!0);if(this._model.data=t.mod,i){var s,o=t.add,l=t.sel,d=this._data.core.selected.slice();if(r=this._model.data,l.length!==d.length||e.vakata.array_unique(l.concat(d)).length!==l.length){for(a=0,s=l.length;s>a;a++)-1===e.inArray(l[a],o)&&-1===e.inArray(l[a],d)&&(r[l[a]].state.selected=!1);for(a=0,s=d.length;s>a;a++)-1===e.inArray(d[a],l)&&(r[d[a]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),t.par!==e.jstree.root?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),n.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+o.toString()],{type:"text/javascript"}))),!this._data.core.working||a?(this._data.core.working=!0,r=new window.Worker(this._wrk),r.onmessage=e.proxy(function(e){l.call(this,e.data,!0);try{r.terminate(),r=null}catch(t){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),s.par?r.postMessage(s):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([t,i,n,!0])}catch(d){l.call(this,o(s),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else l.call(this,o(s),!1)}},_parse_model_from_html:function(i,n,a){a=a?[].concat(a):[],n&&a.unshift(n);var r,s,o,l,d,h=this._model.data,c={id:!1,text:!1,icon:!0,parent:n,parents:a,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in this._model.default_state)this._model.default_state.hasOwnProperty(o)&&(c.state[o]=this._model.default_state[o]);if(l=e.vakata.attributes(i,!0),e.each(l,function(t,i){return i=e.trim(i),i.length?(c.li_attr[t]=i,void("id"===t&&(c.id=i.toString()))):!0}),l=i.children("a").first(),l.length&&(l=e.vakata.attributes(l,!0),e.each(l,function(t,i){i=e.trim(i),i.length&&(c.a_attr[t]=i)})),l=i.children("a").first().length?i.children("a").first().clone():i.clone(),l.children("ins, i, ul").remove(),l=l.html(),l=e("<div />").html(l),c.text=this.settings.core.force_text?l.text():l.html(),l=i.data(),c.data=l?e.extend(!0,{},l):null,c.state.opened=i.hasClass("jstree-open"),c.state.selected=i.children("a").hasClass("jstree-clicked"),c.state.disabled=i.children("a").hasClass("jstree-disabled"),c.data&&c.data.jstree)for(o in c.data.jstree)c.data.jstree.hasOwnProperty(o)&&(c.state[o]=c.data.jstree[o]);l=i.children("a").children(".jstree-themeicon"),l.length&&(c.icon=l.hasClass("jstree-themeicon-hidden")?!1:l.attr("rel")),c.state.icon!==t&&(c.icon=c.state.icon),(c.icon===t||null===c.icon||""===c.icon)&&(c.icon=!0),l=i.children("ul").children("li");do d="j"+this._id+"_"+ ++this._cnt;while(h[d]);return c.id=c.li_attr.id?c.li_attr.id.toString():d,l.length?(l.each(e.proxy(function(t,i){r=this._parse_model_from_html(e(i),c.id,a),s=this._model.data[r],c.children.push(r),s.children_d.length&&(c.children_d=c.children_d.concat(s.children_d))},this)),c.children_d=c.children_d.concat(c.children)):i.hasClass("jstree-closed")&&(c.state.loaded=!1),c.li_attr["class"]&&(c.li_attr["class"]=c.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")),c.a_attr["class"]&&(c.a_attr["class"]=c.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")),h[c.id]=c,c.state.selected&&this._data.core.selected.push(c.id),c.id},_parse_model_from_flat_json:function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var a,r,s,o,l=e.id.toString(),d=this._model.data,h=this._model.default_state,c={id:l,text:e.text||"",icon:e.icon!==t?e.icon:!0,parent:i,parents:n,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(a in h)h.hasOwnProperty(a)&&(c.state[a]=h[a]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(c.icon=e.data.jstree.icon),(c.icon===t||null===c.icon||""===c.icon)&&(c.icon=!0),e&&e.data&&(c.data=e.data,e.data.jstree))for(a in e.data.jstree)e.data.jstree.hasOwnProperty(a)&&(c.state[a]=e.data.jstree[a]);if(e&&"object"==typeof e.state)for(a in e.state)e.state.hasOwnProperty(a)&&(c.state[a]=e.state[a]);if(e&&"object"==typeof e.li_attr)for(a in e.li_attr)e.li_attr.hasOwnProperty(a)&&(c.li_attr[a]=e.li_attr[a]);if(c.li_attr.id||(c.li_attr.id=l),e&&"object"==typeof e.a_attr)for(a in e.a_attr)e.a_attr.hasOwnProperty(a)&&(c.a_attr[a]=e.a_attr[a]);for(e&&e.children&&e.children===!0&&(c.state.loaded=!1,c.children=[],c.children_d=[]),d[c.id]=c,a=0,r=c.children.length;r>a;a++)s=this._parse_model_from_flat_json(d[c.children[a]],c.id,n),o=d[s],c.children_d.push(s),o.children_d.length&&(c.children_d=c.children_d.concat(o.children_d));return delete e.data,delete e.children,d[c.id].original=e,c.state.selected&&this._data.core.selected.push(c.id),c.id},_parse_model_from_json:function(e,i,n){n=n?n.concat():[],i&&n.unshift(i);var a,r,s,o,l,d=!1,h=this._model.data,c=this._model.default_state;do d="j"+this._id+"_"+ ++this._cnt;while(h[d]);l={id:!1,text:"string"==typeof e?e:"",icon:"object"==typeof e&&e.icon!==t?e.icon:!0,parent:i,parents:n,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(a in c)c.hasOwnProperty(a)&&(l.state[a]=c[a]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),(l.icon===t||null===l.icon||""===l.icon)&&(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(a in e.data.jstree)e.data.jstree.hasOwnProperty(a)&&(l.state[a]=e.data.jstree[a]);if(e&&"object"==typeof e.state)for(a in e.state)e.state.hasOwnProperty(a)&&(l.state[a]=e.state[a]);if(e&&"object"==typeof e.li_attr)for(a in e.li_attr)e.li_attr.hasOwnProperty(a)&&(l.li_attr[a]=e.li_attr[a]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=d),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(a in e.a_attr)e.a_attr.hasOwnProperty(a)&&(l.a_attr[a]=e.a_attr[a]);if(e&&e.children&&e.children.length){for(a=0,r=e.children.length;r>a;a++)s=this._parse_model_from_json(e.children[a],l.id,n),o=h[s],l.children.push(s),o.children_d.length&&(l.children_d=l.children_d.concat(o.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&e.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,h[l.id]=l,l.state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){var t,i,n,a=this._model.force_full_redraw?this._model.data[e.jstree.root].children.concat([]):this._model.changed.concat([]),r=h.createElement("UL"),s=this._data.core.focused;for(i=0,n=a.length;n>i;i++)t=this.redraw_node(a[i],!0,this._model.force_full_redraw),t&&this._model.force_full_redraw&&r.appendChild(t);this._model.force_full_redraw&&(r.className=this.get_container_ul()[0].className,r.setAttribute("role","group"),this.element.empty().append(r)),null!==s&&(t=this.get_node(s,!0),t&&t.length&&t.children(".jstree-anchor")[0]!==h.activeElement?t.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{
nodes:a})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(t){var i=this.get_node(t),n=!1,a=!1,r=!1,s=h;if(!i)return!1;if(i.id===e.jstree.root)return this.redraw(!0);if(t=this.get_node(t,!0),!t||!t.length)return!1;if(t.children(".jstree-children").remove(),t=t[0],i.children.length&&i.state.loaded){for(r=s.createElement("UL"),r.setAttribute("role","group"),r.className="jstree-children",n=0,a=i.children.length;a>n;n++)r.appendChild(this.redraw_node(i.children[n],!0,!0));t.appendChild(r)}},redraw_node:function(t,i,n,a){var r=this.get_node(t),s=!1,o=!1,l=!1,d=!1,u=!1,p=!1,f="",m=h,g=this._model.data,x=!1,y=null,v=0,_=0,b=!1,w=!1;if(!r)return!1;if(r.id===e.jstree.root)return this.redraw(!0);if(i=i||0===r.children.length,t=h.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(r.id[0])?"\\3"+r.id[0]+" "+r.id.substr(1).replace(e.jstree.idregex,"\\$&"):r.id.replace(e.jstree.idregex,"\\$&"))):h.getElementById(r.id))t=e(t),n||(s=t.parent().parent()[0],s===this.element[0]&&(s=null),o=t.index()),i||!r.children.length||t.children(".jstree-children").length||(i=!0),i||(l=t.children(".jstree-children")[0]),x=t.children(".jstree-anchor")[0]===h.activeElement,t.remove();else if(i=!0,!n){if(s=r.parent!==e.jstree.root?e("#"+r.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null,!(null===s||s&&g[r.parent].state.opened))return!1;o=e.inArray(r.id,null===s?g[e.jstree.root].children:g[r.parent].children)}t=c.cloneNode(!0),f="jstree-node ";for(d in r.li_attr)if(r.li_attr.hasOwnProperty(d)){if("id"===d)continue;"class"!==d?t.setAttribute(d,r.li_attr[d]):f+=r.li_attr[d]}for(r.a_attr.id||(r.a_attr.id=r.id+"_anchor"),t.setAttribute("aria-selected",!!r.state.selected),t.setAttribute("aria-level",r.parents.length),t.setAttribute("aria-labelledby",r.a_attr.id),r.state.disabled&&t.setAttribute("aria-disabled",!0),d=0,u=r.children.length;u>d;d++)if(!g[r.children[d]].state.hidden){b=!0;break}if(null!==r.parent&&g[r.parent]&&!r.state.hidden&&(d=e.inArray(r.id,g[r.parent].children),w=r.id,-1!==d))for(d++,u=g[r.parent].children.length;u>d&&(g[g[r.parent].children[d]].state.hidden||(w=g[r.parent].children[d]),w===r.id);d++);r.state.hidden&&(f+=" jstree-hidden"),r.state.loaded&&!b?f+=" jstree-leaf":(f+=r.state.opened&&r.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",r.state.opened&&r.state.loaded)),w===r.id&&(f+=" jstree-last"),t.id=r.id,t.className=f,f=(r.state.selected?" jstree-clicked":"")+(r.state.disabled?" jstree-disabled":"");for(u in r.a_attr)if(r.a_attr.hasOwnProperty(u)){if("href"===u&&"#"===r.a_attr[u])continue;"class"!==u?t.childNodes[1].setAttribute(u,r.a_attr[u]):f+=" "+r.a_attr[u]}if(f.length&&(t.childNodes[1].className="jstree-anchor "+f),(r.icon&&r.icon!==!0||r.icon===!1)&&(r.icon===!1?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===r.icon.indexOf("/")&&-1===r.icon.indexOf(".")?t.childNodes[1].childNodes[0].className+=" "+r.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage='url("'+r.icon+'")',t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(m.createTextNode(r.text)):t.childNodes[1].innerHTML+=r.text,i&&r.children.length&&(r.state.opened||a)&&r.state.loaded){for(p=m.createElement("UL"),p.setAttribute("role","group"),p.className="jstree-children",d=0,u=r.children.length;u>d;d++)p.appendChild(this.redraw_node(r.children[d],i,!0));t.appendChild(p)}if(l&&t.appendChild(l),!n){for(s||(s=this.element[0]),d=0,u=s.childNodes.length;u>d;d++)if(s.childNodes[d]&&s.childNodes[d].className&&-1!==s.childNodes[d].className.indexOf("jstree-children")){y=s.childNodes[d];break}y||(y=m.createElement("UL"),y.setAttribute("role","group"),y.className="jstree-children",s.appendChild(y)),s=y,o<s.childNodes.length?s.insertBefore(t,s.childNodes[o]):s.appendChild(t),x&&(v=this.element[0].scrollTop,_=this.element[0].scrollLeft,t.childNodes[1].focus(),this.element[0].scrollTop=v,this.element[0].scrollLeft=_)}return r.state.opened&&!r.state.loaded&&(r.state.opened=!1,setTimeout(e.proxy(function(){this.open_node(r.id,!1,0)},this),0)),t},open_node:function(i,n,a){var r,s,o,l;if(e.isArray(i)){for(i=i.slice(),r=0,s=i.length;s>r;r++)this.open_node(i[r],n,a);return!0}return i=this.get_node(i),i&&i.id!==e.jstree.root?(a=a===t?this.settings.core.animation:a,this.is_closed(i)?this.is_loaded(i)?(o=this.get_node(i,!0),l=this,o.length&&(a&&o.children(".jstree-children").length&&o.children(".jstree-children").stop(!0,!0),i.children.length&&!this._firstChild(o.children(".jstree-children")[0])&&this.draw_children(i),a?(this.trigger("before_open",{node:i}),o.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(a,function(){this.style.display="",l.trigger("after_open",{node:i})})):(this.trigger("before_open",{node:i}),o[0].className=o[0].className.replace("jstree-closed","jstree-open"),o[0].setAttribute("aria-expanded",!0))),i.state.opened=!0,n&&n.call(this,i,!0),o.length||this.trigger("before_open",{node:i}),this.trigger("open_node",{node:i}),a&&o.length||this.trigger("after_open",{node:i}),!0):this.is_loading(i)?setTimeout(e.proxy(function(){this.open_node(i,n,a)},this),500):void this.load_node(i,function(e,t){return t?this.open_node(e,n,a):n?n.call(this,e,!1):!1}):(n&&n.call(this,i,!1),!1)):!1},_open_to:function(t){if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;var i,n,a=t.parents;for(i=0,n=a.length;n>i;i+=1)i!==e.jstree.root&&this.open_node(a[i],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(i,n){var a,r,s,o;if(e.isArray(i)){for(i=i.slice(),a=0,r=i.length;r>a;a++)this.close_node(i[a],n);return!0}return i=this.get_node(i),i&&i.id!==e.jstree.root?this.is_closed(i)?!1:(n=n===t?this.settings.core.animation:n,s=this,o=this.get_node(i,!0),i.state.opened=!1,this.trigger("close_node",{node:i}),void(o.length?n?o.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(n,function(){this.style.display="",o.children(".jstree-children").remove(),s.trigger("after_close",{node:i})}):(o[0].className=o[0].className.replace("jstree-open","jstree-closed"),o.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:i})):this.trigger("after_close",{node:i}))):!1},toggle_node:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.toggle_node(t[i]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(t,i,n){if(t||(t=e.jstree.root),t=this.get_node(t),!t)return!1;var a,r,s,o=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0);if(!o.length){for(a=0,r=t.children_d.length;r>a;a++)this.is_closed(this._model.data[t.children_d[a]])&&(this._model.data[t.children_d[a]].state.opened=!0);return this.trigger("open_all",{node:t})}n=n||o,s=this,o=this.is_closed(t)?o.find(".jstree-closed").addBack():o.find(".jstree-closed"),o.each(function(){s.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,i,n)},i||0)}),0===n.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(n)})},close_all:function(t,i){if(t||(t=e.jstree.root),t=this.get_node(t),!t)return!1;var n,a,r=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0),s=this;for(r.length&&(r=this.is_open(t)?r.find(".jstree-open").addBack():r.find(".jstree-open"),e(r.get().reverse()).each(function(){s.close_node(this,i||0)})),n=0,a=t.children_d.length;a>n;n++)this._model.data[t.children_d[n]].state.opened=!1;this.trigger("close_all",{node:t})},is_disabled:function(e){return e=this.get_node(e),e&&e.state&&e.state.disabled},enable_node:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.enable_node(t[i]);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),void this.trigger("enable_node",{node:t})):!1},disable_node:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.disable_node(t[i]);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),void this.trigger("disable_node",{node:t})):!1},is_hidden:function(e){return e=this.get_node(e),e.state.hidden===!0},hide_node:function(t,i){var n,a;if(e.isArray(t)){for(t=t.slice(),n=0,a=t.length;a>n;n++)this.hide_node(t[n],!0);return i||this.redraw(),!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?void(t.state.hidden||(t.state.hidden=!0,this._node_changed(t.parent),i||this.redraw(),this.trigger("hide_node",{node:t}))):!1},show_node:function(t,i){var n,a;if(e.isArray(t)){for(t=t.slice(),n=0,a=t.length;a>n;n++)this.show_node(t[n],!0);return i||this.redraw(),!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?void(t.state.hidden&&(t.state.hidden=!1,this._node_changed(t.parent),i||this.redraw(),this.trigger("show_node",{node:t}))):!1},hide_all:function(t){var i,n=this._model.data,a=[];for(i in n)n.hasOwnProperty(i)&&i!==e.jstree.root&&!n[i].state.hidden&&(n[i].state.hidden=!0,a.push(i));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("hide_all",{nodes:a}),a},show_all:function(t){var i,n=this._model.data,a=[];for(i in n)n.hasOwnProperty(i)&&i!==e.jstree.root&&n[i].state.hidden&&(n[i].state.hidden=!1,a.push(i));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("show_all",{nodes:a}),a},activate_node:function(e,i){if(this.is_disabled(e))return!1;if(i&&"object"==typeof i||(i={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==t?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(i.metaKey||i.ctrlKey||i.shiftKey)&&(!i.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(i.shiftKey){var n,a,r=this.get_node(e).id,s=this._data.core.last_clicked.id,o=this.get_node(this._data.core.last_clicked.parent).children,l=!1;for(n=0,a=o.length;a>n;n+=1)o[n]===r&&(l=!l),o[n]===s&&(l=!l),this.is_disabled(o[n])||!l&&o[n]!==r&&o[n]!==s?this.deselect_node(o[n],!0,i):this.is_hidden(o[n])||this.select_node(o[n],!0,!1,i);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:i})}else this.is_selected(e)?this.deselect_node(e,!1,i):this.select_node(e,!1,!1,i);else!this.settings.core.multiple&&(i.metaKey||i.ctrlKey||i.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,i):(this.deselect_all(!0),this.select_node(e,!1,!1,i),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:i})},hover_node:function(e){if(e=this.get_node(e,!0),!e||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),i=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){i.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){return e=this.get_node(e,!0),e&&e.length&&e.children(".jstree-hovered").length?(e.children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(e)})):!1},select_node:function(t,i,n,a){var r,s,o;if(e.isArray(t)){for(t=t.slice(),s=0,o=t.length;o>s;s++)this.select_node(t[s],i,n,a);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(r=this.get_node(t,!0),void(t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),n||(r=this._open_to(t)),r&&r.length&&r.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:a}),i||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:a})))):!1},deselect_node:function(t,i,n){var a,r,s;if(e.isArray(t)){for(t=t.slice(),a=0,r=t.length;r>a;a++)this.deselect_node(t[a],i,n);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(s=this.get_node(t,!0),void(t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),s.length&&s.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:n}),i||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:n})))):!1},select_all:function(t){var i,n,a=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[e.jstree.root].children_d.concat(),i=0,n=this._data.core.selected.length;n>i;i++)this._model.data[this._data.core.selected[i]]&&(this._model.data[this._data.core.selected[i]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),t||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:a})},deselect_all:function(e){var t,i,n=this._data.core.selected.concat([]);for(t=0,i=this._data.core.selected.length;i>t;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:n}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:n})},is_selected:function(t){return t=this.get_node(t),t&&t.id!==e.jstree.root?t.state.selected:!1},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(t){var i,n,a,r,s=this.get_selected(!0),o={};for(i=0,n=s.length;n>i;i++)o[s[i].id]=s[i];for(i=0,n=s.length;n>i;i++)for(a=0,r=s[i].children_d.length;r>a;a++)o[s[i].children_d[a]]&&delete o[s[i].children_d[a]];s=[];for(i in o)o.hasOwnProperty(i)&&s.push(i);return t?e.map(s,e.proxy(function(e){return this.get_node(e)},this)):s},get_bottom_selected:function(t){var i,n,a=this.get_selected(!0),r=[];for(i=0,n=a.length;n>i;i++)a[i].children.length||r.push(a[i].id);return t?e.map(r,e.proxy(function(e){return this.get_node(e)},this)):r},get_state:function(){var t,i={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(t in this._model.data)this._model.data.hasOwnProperty(t)&&t!==e.jstree.root&&(this._model.data[t].state.opened&&i.core.open.push(t),this._model.data[t].state.selected&&i.core.selected.push(t));return i},set_state:function(i,n){if(i){if(i.core){var a,r;if(i.core.open)return e.isArray(i.core.open)&&i.core.open.length?this._load_nodes(i.core.open,function(e){this.open_node(e,!1,0),delete i.core.open,this.set_state(i,n)},!0):(delete i.core.open,this.set_state(i,n)),!1;if(i.core.scroll)return i.core.scroll&&i.core.scroll.left!==t&&this.element.scrollLeft(i.core.scroll.left),i.core.scroll&&i.core.scroll.top!==t&&this.element.scrollTop(i.core.scroll.top),delete i.core.scroll,this.set_state(i,n),!1;if(i.core.selected)return a=this,this.deselect_all(),e.each(i.core.selected,function(e,t){a.select_node(t,!1,!0)}),delete i.core.selected,this.set_state(i,n),!1;for(r in i)i.hasOwnProperty(r)&&"core"!==r&&-1===e.inArray(r,this.settings.plugins)&&delete i[r];if(e.isEmptyObject(i.core))return delete i.core,this.set_state(i,n),!1}return e.isEmptyObject(i)?(i=null,n&&n.call(this),this.trigger("set_state"),!1):!0}return!1},refresh:function(t,i){this._data.core.state=i===!0?{}:this.get_state(),i&&e.isFunction(i)&&(this._data.core.state=i.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var n=this.get_container_ul()[0].className;t||(this.element.html("<ul class='"+n+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(e.jstree.root,function(t,i){i&&(this.get_container_ul()[0].className=n,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(e.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;var i=[],n=[],a=this._data.core.selected.concat([]);n.push(t.id),t.state.opened===!0&&i.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){n.push(this.id),i.push(this.id)}),this._load_nodes(n,e.proxy(function(e){this.open_node(i,!1,0),this.select_node(a),this.trigger("refresh_node",{node:t,nodes:e})},this),!1,!0)},set_id:function(t,i){if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;var n,a,r=this._model.data,s=t.id;for(i=i.toString(),r[t.parent].children[e.inArray(t.id,r[t.parent].children)]=i,n=0,a=t.parents.length;a>n;n++)r[t.parents[n]].children_d[e.inArray(t.id,r[t.parents[n]].children_d)]=i;for(n=0,a=t.children.length;a>n;n++)r[t.children[n]].parent=i;for(n=0,a=t.children_d.length;a>n;n++)r[t.children_d[n]].parents[e.inArray(t.id,r[t.children_d[n]].parents)]=i;return n=e.inArray(t.id,this._data.core.selected),-1!==n&&(this._data.core.selected[n]=i),n=this.get_node(t.id,!0),n&&(n.attr("id",i),this.element.attr("aria-activedescendant")===t.id&&this.element.attr("aria-activedescendant",i)),delete r[t.id],t.id=i,t.li_attr.id=i,r[i]=t,this.trigger("set_id",{node:t,"new":t.id,old:s}),!0},get_text:function(t){return t=this.get_node(t),t&&t.id!==e.jstree.root?t.text:!1},set_text:function(t,i){var n,a;if(e.isArray(t)){for(t=t.slice(),n=0,a=t.length;a>n;n++)this.set_text(t[n],i);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(t.text=i,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:i}),!0):!1},get_json:function(t,i,n){if(t=this.get_node(t||e.jstree.root),!t)return!1;i&&i.flat&&!n&&(n=[]);var a,r,s={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:e.extend(!0,{},t.li_attr),a_attr:e.extend(!0,{},t.a_attr),state:{},data:i&&i.no_data?!1:e.extend(!0,{},t.data)};if(i&&i.flat?s.parent=t.parent:s.children=[],!i||!i.no_state)for(a in t.state)t.state.hasOwnProperty(a)&&(s.state[a]=t.state[a]);if(i&&i.no_id&&(delete s.id,s.li_attr&&s.li_attr.id&&delete s.li_attr.id,s.a_attr&&s.a_attr.id&&delete s.a_attr.id),i&&i.flat&&t.id!==e.jstree.root&&n.push(s),!i||!i.no_children)for(a=0,r=t.children.length;r>a;a++)i&&i.flat?this.get_json(t.children[a],i,n):s.children.push(this.get_json(t.children[a],i));return i&&i.flat?n:t.id===e.jstree.root?s.children:s},create_node:function(i,n,a,r,s){if(null===i&&(i=e.jstree.root),i=this.get_node(i),!i)return!1;if(a=a===t?"last":a,!a.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(i))return this.load_node(i,function(){this.create_node(i,n,a,r,!0)});n||(n={text:this.get_string("New node")}),"string"==typeof n&&(n={text:n}),n.text===t&&(n.text=this.get_string("New node"));var o,l,d,h;switch(i.id===e.jstree.root&&("before"===a&&(a="first"),"after"===a&&(a="last")),a){case"before":o=this.get_node(i.parent),a=e.inArray(i.id,o.children),i=o;break;case"after":o=this.get_node(i.parent),a=e.inArray(i.id,o.children)+1,i=o;break;case"inside":case"first":a=0;break;case"last":a=i.children.length;break;default:a||(a=0)}if(a>i.children.length&&(a=i.children.length),n.id||(n.id=!0),!this.check("create_node",n,i,a))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(n.id===!0&&delete n.id,n=this._parse_model_from_json(n,i.id,i.parents.concat()),!n)return!1;for(o=this.get_node(n),l=[],l.push(n),l=l.concat(o.children_d),this.trigger("model",{nodes:l,parent:i.id}),i.children_d=i.children_d.concat(l),d=0,h=i.parents.length;h>d;d++)this._model.data[i.parents[d]].children_d=this._model.data[i.parents[d]].children_d.concat(l);for(n=o,o=[],d=0,h=i.children.length;h>d;d++)o[d>=a?d+1:d]=i.children[d];return o[a]=n.id,i.children=o,this.redraw_node(i,!0),r&&r.call(this,this.get_node(n)),this.trigger("create_node",{node:this.get_node(n),parent:i.id,position:a}),n.id},rename_node:function(t,i){var n,a,r;if(e.isArray(t)){for(t=t.slice(),n=0,a=t.length;a>n;n++)this.rename_node(t[n],i);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(r=t.text,this.check("rename_node",t,this.get_parent(t),i)?(this.set_text(t,i),this.trigger("rename_node",{node:t,text:i,old:r}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1)):!1},delete_node:function(t){var i,n,a,r,s,o,l,d,h,c,u,p;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.delete_node(t[i]);return!0}if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;if(a=this.get_node(t.parent),r=e.inArray(t.id,a.children),c=!1,!this.check("delete_node",t,a,r))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==r&&(a.children=e.vakata.array_remove(a.children,r)),s=t.children_d.concat([]),s.push(t.id),o=0,l=t.parents.length;l>o;o++)this._model.data[t.parents[o]].children_d=e.vakata.array_filter(this._model.data[t.parents[o]].children_d,function(t){return-1===e.inArray(t,s)});for(d=0,h=s.length;h>d;d++)if(this._model.data[s[d]].state.selected){c=!0;break}for(c&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(t){return-1===e.inArray(t,s)})),this.trigger("delete_node",{node:t,parent:a.id}),c&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:a.id}),d=0,h=s.length;h>d;d++)delete this._model.data[s[d]];return-1!==e.inArray(this._data.core.focused,s)&&(this._data.core.focused=null,u=this.element[0].scrollTop,p=this.element[0].scrollLeft,a.id===e.jstree.root?this._model.data[e.jstree.root].children[0]&&this.get_node(this._model.data[e.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(a,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=u,this.element[0].scrollLeft=p),this.redraw_node(a,!0),!0},check:function(t,i,n,a,r){i=i&&i.id?i:this.get_node(i),n=n&&n.id?n:this.get_node(n);var s=t.match(/^move_node|copy_node|create_node$/i)?n:i,o=this.settings.core.check_callback;return"move_node"!==t&&"copy_node"!==t||r&&r.is_multi||i.id!==n.id&&("move_node"!==t||e.inArray(i.id,n.children)!==a)&&-1===e.inArray(n.id,i.children_d)?(s&&s.data&&(s=s.data),s&&s.functions&&(s.functions[t]===!1||s.functions[t]===!0)?(s.functions[t]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:a,obj:i&&i.id?i.id:!1,par:n&&n.id?n.id:!1})}),s.functions[t]):o===!1||e.isFunction(o)&&o.call(this,t,i,n,a,r)===!1||o&&o[t]===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:a,obj:i&&i.id?i.id:!1,par:n&&n.id?n.id:!1})},!1):!0):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:a,obj:i&&i.id?i.id:!1,par:n&&n.id?n.id:!1})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(i,n,a,r,s,o,l){var d,h,c,u,p,f,m,g,x,y,v,_,b,w;if(n=this.get_node(n),a=a===t?0:a,!n)return!1;if(!a.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(n))return this.load_node(n,function(){this.move_node(i,n,a,r,!0,!1,l)});if(e.isArray(i)){if(1!==i.length){for(d=0,h=i.length;h>d;d++)(x=this.move_node(i[d],n,a,r,s,!1,l))&&(n=x,a="after");return this.redraw(),!0}i=i[0]}if(i=i&&i.id?i:this.get_node(i),!i||i.id===e.jstree.root)return!1;if(c=(i.parent||e.jstree.root).toString(),p=a.toString().match(/^(before|after)$/)&&n.id!==e.jstree.root?this.get_node(n.parent):n,f=l?l:this._model.data[i.id]?this:e.jstree.reference(i.id),m=!f||!f._id||this._id!==f._id,u=f&&f._id&&c&&f._model.data[c]&&f._model.data[c].children?e.inArray(i.id,f._model.data[c].children):-1,f&&f._id&&(i=f._model.data[i.id]),m)return(x=this.copy_node(i,n,a,r,s,!1,l))?(f&&f.delete_node(i),x):!1;switch(n.id===e.jstree.root&&("before"===a&&(a="first"),"after"===a&&(a="last")),a){case"before":a=e.inArray(n.id,p.children);break;case"after":a=e.inArray(n.id,p.children)+1;break;case"inside":case"first":a=0;break;case"last":a=p.children.length;break;default:a||(a=0)}if(a>p.children.length&&(a=p.children.length),!this.check("move_node",i,p,a,{core:!0,origin:l,is_multi:f&&f._id&&f._id!==this._id,is_foreign:!f||!f._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(i.parent===p.id){for(g=p.children.concat(),x=e.inArray(i.id,g),-1!==x&&(g=e.vakata.array_remove(g,x),a>x&&a--),x=[],y=0,v=g.length;v>y;y++)x[y>=a?y+1:y]=g[y];x[a]=i.id,p.children=x,this._node_changed(p.id),this.redraw(p.id===e.jstree.root)}else{for(x=i.children_d.concat(),x.push(i.id),y=0,v=i.parents.length;v>y;y++){for(g=[],w=f._model.data[i.parents[y]].children_d,_=0,b=w.length;b>_;_++)-1===e.inArray(w[_],x)&&g.push(w[_]);f._model.data[i.parents[y]].children_d=g}for(f._model.data[c].children=e.vakata.array_remove_item(f._model.data[c].children,i.id),y=0,v=p.parents.length;v>y;y++)this._model.data[p.parents[y]].children_d=this._model.data[p.parents[y]].children_d.concat(x);for(g=[],y=0,v=p.children.length;v>y;y++)g[y>=a?y+1:y]=p.children[y];for(g[a]=i.id,p.children=g,p.children_d.push(i.id),p.children_d=p.children_d.concat(i.children_d),i.parent=p.id,x=p.parents.concat(),x.unshift(p.id),w=i.parents.length,i.parents=x,x=x.concat(),y=0,v=i.children_d.length;v>y;y++)this._model.data[i.children_d[y]].parents=this._model.data[i.children_d[y]].parents.slice(0,-1*w),Array.prototype.push.apply(this._model.data[i.children_d[y]].parents,x);(c===e.jstree.root||p.id===e.jstree.root)&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(c),this._node_changed(p.id)),o||this.redraw()}return r&&r.call(this,i,p,a),this.trigger("move_node",{node:i,parent:p.id,position:a,old_parent:c,old_position:u,is_multi:f&&f._id&&f._id!==this._id,is_foreign:!f||!f._id,old_instance:f,new_instance:this}),i.id},copy_node:function(i,n,a,r,s,o,l){var d,h,c,u,p,f,m,g,x,y,v;if(n=this.get_node(n),a=a===t?0:a,!n)return!1;if(!a.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(n))return this.load_node(n,function(){this.copy_node(i,n,a,r,!0,!1,l)});if(e.isArray(i)){if(1!==i.length){for(d=0,h=i.length;h>d;d++)(u=this.copy_node(i[d],n,a,r,s,!0,l))&&(n=u,a="after");return this.redraw(),!0}i=i[0]}if(i=i&&i.id?i:this.get_node(i),!i||i.id===e.jstree.root)return!1;switch(g=(i.parent||e.jstree.root).toString(),x=a.toString().match(/^(before|after)$/)&&n.id!==e.jstree.root?this.get_node(n.parent):n,y=l?l:this._model.data[i.id]?this:e.jstree.reference(i.id),v=!y||!y._id||this._id!==y._id,y&&y._id&&(i=y._model.data[i.id]),n.id===e.jstree.root&&("before"===a&&(a="first"),"after"===a&&(a="last")),a){case"before":a=e.inArray(n.id,x.children);break;case"after":a=e.inArray(n.id,x.children)+1;break;case"inside":case"first":a=0;break;case"last":a=x.children.length;break;default:a||(a=0)}if(a>x.children.length&&(a=x.children.length),!this.check("copy_node",i,x,a,{core:!0,origin:l,is_multi:y&&y._id&&y._id!==this._id,is_foreign:!y||!y._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(m=y?y.get_json(i,{no_id:!0,no_data:!0,no_state:!0}):i,!m)return!1;if(m.id===!0&&delete m.id,m=this._parse_model_from_json(m,x.id,x.parents.concat()),!m)return!1;for(u=this.get_node(m),i&&i.state&&i.state.loaded===!1&&(u.state.loaded=!1),c=[],c.push(m),c=c.concat(u.children_d),this.trigger("model",{nodes:c,parent:x.id}),p=0,f=x.parents.length;f>p;p++)this._model.data[x.parents[p]].children_d=this._model.data[x.parents[p]].children_d.concat(c);for(c=[],p=0,f=x.children.length;f>p;p++)c[p>=a?p+1:p]=x.children[p];return c[a]=u.id,x.children=c,x.children_d.push(u.id),x.children_d=x.children_d.concat(u.children_d),x.id===e.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(x.id),o||this.redraw(x.id===e.jstree.root),r&&r.call(this,u,x,a),this.trigger("copy_node",{node:u,original:i,parent:x.id,position:a,old_parent:g,old_position:y&&y._id&&g&&y._model.data[g]&&y._model.data[g].children?e.inArray(i.id,y._model.data[g].children):-1,is_multi:y&&y._id&&y._id!==this._id,is_foreign:!y||!y._id,old_instance:y,new_instance:this}),u.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var i,n,a,l=[];for(n=0,a=t.length;a>n;n++)i=this.get_node(t[n]),i&&i.id&&i.id!==e.jstree.root&&l.push(i);return l.length?(r=l,o=this,s="move_node",void this.trigger("cut",{node:t})):!1},copy:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var i,n,a,l=[];for(n=0,a=t.length;a>n;n++)i=this.get_node(t[n]),i&&i.id&&i.id!==e.jstree.root&&l.push(i);return l.length?(r=l,o=this,s="copy_node",void this.trigger("copy",{node:t})):!1},get_buffer:function(){return{mode:s,node:r,inst:o}},can_paste:function(){return s!==!1&&r!==!1},paste:function(e,t){return e=this.get_node(e),e&&s&&s.match(/^(copy_node|move_node)$/)&&r?(this[s](r,e,t,!1,!1,!1,o)&&this.trigger("paste",{parent:e.id,node:r,mode:s}),r=!1,s=!1,void(o=!1)):!1},clear_buffer:function(){r=!1,s=!1,o=!1,this.trigger("clear_buffer")},edit:function(t,i,n){var a,r,s,o,l,d,c,u,p,f=!1;return(t=this.get_node(t))?this.settings.core.check_callback===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1):(p=t,i="string"==typeof i?i:t.text,this.set_text(t,""),t=this._open_to(t),p.text=i,a=this._data.core.rtl,r=this.element.width(),this._data.core.focused=p.id,s=t.children(".jstree-anchor").focus(),o=e("<span>"),l=i,d=e("<div />",{css:{position:"absolute",top:"-200px",left:a?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),c=e("<input />",{value:l,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy(function(i){i.stopImmediatePropagation(),i.preventDefault();var a,r=o.children(".jstree-rename-input"),h=r.val(),u=this.settings.core.force_text;""===h&&(h=l),d.remove(),o.replaceWith(s),o.remove(),l=u?l:e("<div></div>").append(e.parseHTML(l)).html(),this.set_text(t,l),a=!!this.rename_node(t,u?e("<div></div>").text(h).text():e("<div></div>").append(e.parseHTML(h)).html()),a||this.set_text(t,l),this._data.core.focused=p.id,setTimeout(e.proxy(function(){var e=this.get_node(p.id,!0);e.length&&(this._data.core.focused=p.id,e.children(".jstree-anchor").focus())},this),0),n&&n.call(this,p,a,f),c=null},this),keydown:function(e){var t=e.which;27===t&&(f=!0,this.value=l),(27===t||13===t||37===t||38===t||39===t||40===t||32===t)&&e.stopImmediatePropagation(),(27===t||13===t)&&(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){c.width(Math.min(d.text("pW"+this.value).width(),r))},keypress:function(e){return 13===e.which?!1:void 0}}),u={fontFamily:s.css("fontFamily")||"",fontSize:s.css("fontSize")||"",fontWeight:s.css("fontWeight")||"",fontStyle:s.css("fontStyle")||"",fontStretch:s.css("fontStretch")||"",fontVariant:s.css("fontVariant")||"",letterSpacing:s.css("letterSpacing")||"",wordSpacing:s.css("wordSpacing")||""
},o.attr("class",s.attr("class")).append(s.contents().clone()).append(c),s.replaceWith(o),d.css(u),c.css(u).width(Math.min(d.text("pW"+c[0].value).width(),r))[0].select(),void e(h).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(t){c&&t.target!==c&&e(c).blur()})):!1},set_theme:function(t,i){if(!t)return!1;if(i===!0){var n=this.settings.core.themes.dir;n||(n=e.jstree.path+"/themes"),i=n+"/"+t+"/style.css"}i&&-1===e.inArray(i,l)&&(e("head").append('<link rel="stylesheet" href="'+i+'" type="text/css" />'),l.push(i)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(i,n){var a,r,s,o;if(e.isArray(i)){for(i=i.slice(),a=0,r=i.length;r>a;a++)this.set_icon(i[a],n);return!0}return i=this.get_node(i),i&&i.id!==e.jstree.root?(o=i.icon,i.icon=n===!0||null===n||n===t||""===n?!0:n,s=this.get_node(i,!0).children(".jstree-anchor").children(".jstree-themeicon"),n===!1?this.hide_icon(i):n===!0||null===n||n===t||""===n?(s.removeClass("jstree-themeicon-custom "+o).css("background","").removeAttr("rel"),o===!1&&this.show_icon(i)):-1===n.indexOf("/")&&-1===n.indexOf(".")?(s.removeClass(o).css("background",""),s.addClass(n+" jstree-themeicon-custom").attr("rel",n),o===!1&&this.show_icon(i)):(s.removeClass(o).css("background",""),s.addClass("jstree-themeicon-custom").css("background","url('"+n+"') center center no-repeat").attr("rel",n),o===!1&&this.show_icon(i)),!0):!1},get_icon:function(t){return t=this.get_node(t),t&&t.id!==e.jstree.root?t.icon:!1},hide_icon:function(t){var i,n;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.hide_icon(t[i]);return!0}return t=this.get_node(t),t&&t!==e.jstree.root?(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0):!1},show_icon:function(t){var i,n,a;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.show_icon(t[i]);return!0}return t=this.get_node(t),t&&t!==e.jstree.root?(a=this.get_node(t,!0),t.icon=a.length?a.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"):!0,t.icon||(t.icon=!0),a.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0):!1}},e.vakata={},e.vakata.attributes=function(t,i){t=e(t)[0];var n=i?{}:[];return t&&t.attributes&&e.each(t.attributes,function(t,a){-1===e.inArray(a.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==a.value&&""!==e.trim(a.value)&&(i?n[a.name]=a.value:n.push(a.name))}),n},e.vakata.array_unique=function(e){var i,n,a=[],r={};for(i=0,n=e.length;n>i;i++)r[e[i]]===t&&(a.push(e[i]),r[e[i]]=!0);return a},e.vakata.array_remove=function(e,t){return e.splice(t,1),e},e.vakata.array_remove_item=function(t,i){var n=e.inArray(i,t);return-1!==n?e.vakata.array_remove(t,n):t},e.vakata.array_filter=function(e,t,i,n,a){if(e.filter)return e.filter(t,i);n=[];for(a in e)~~a+""==a+""&&a>=0&&t.call(i,e[a],+a,e)&&n.push(e[a]);return n},e.jstree.plugins.changed=function(e,t){var i=[];this.trigger=function(e,n){var a,r;if(n||(n={}),"changed"===e.replace(".jstree","")){n.changed={selected:[],deselected:[]};var s={};for(a=0,r=i.length;r>a;a++)s[i[a]]=1;for(a=0,r=n.selected.length;r>a;a++)s[n.selected[a]]?s[n.selected[a]]=2:n.changed.selected.push(n.selected[a]);for(a=0,r=i.length;r>a;a++)1===s[i[a]]&&n.changed.deselected.push(i[a]);i=n.selected.slice()}t.trigger.call(this,e,n)},this.refresh=function(e,n){return i=[],t.refresh.apply(this,arguments)}};var u=h.createElement("I");u.className="jstree-icon jstree-checkbox",u.setAttribute("role","presentation"),e.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0},e.jstree.plugins.checkbox=function(i,n){this.bind=function(){n.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",e.proxy(function(e,t){var i,n,a=this._model.data,r=(a[t.parent],t.nodes);for(i=0,n=r.length;n>i;i++)a[r[i]].state.checked=a[r[i]].state.checked||a[r[i]].original&&a[r[i]].original.state&&a[r[i]].original.state.checked,a[r[i]].state.checked&&this._data.checkbox.selected.push(r[i])},this)),(-1!==this.settings.checkbox.cascade.indexOf("up")||-1!==this.settings.checkbox.cascade.indexOf("down"))&&this.element.on("model.jstree",e.proxy(function(t,i){var n,a,r,s,o,l,d=this._model.data,h=d[i.parent],c=i.nodes,u=[],p=this.settings.checkbox.cascade,f=this.settings.checkbox.tie_selection;if(-1!==p.indexOf("down"))if(h.state[f?"selected":"checked"]){for(a=0,r=c.length;r>a;a++)d[c[a]].state[f?"selected":"checked"]=!0;this._data[f?"core":"checkbox"].selected=this._data[f?"core":"checkbox"].selected.concat(c)}else for(a=0,r=c.length;r>a;a++)if(d[c[a]].state[f?"selected":"checked"]){for(s=0,o=d[c[a]].children_d.length;o>s;s++)d[d[c[a]].children_d[s]].state[f?"selected":"checked"]=!0;this._data[f?"core":"checkbox"].selected=this._data[f?"core":"checkbox"].selected.concat(d[c[a]].children_d)}if(-1!==p.indexOf("up")){for(a=0,r=h.children_d.length;r>a;a++)d[h.children_d[a]].children.length||u.push(d[h.children_d[a]].parent);for(u=e.vakata.array_unique(u),s=0,o=u.length;o>s;s++)for(h=d[u[s]];h&&h.id!==e.jstree.root;){for(n=0,a=0,r=h.children.length;r>a;a++)n+=d[h.children[a]].state[f?"selected":"checked"];if(n!==r)break;h.state[f?"selected":"checked"]=!0,this._data[f?"core":"checkbox"].selected.push(h.id),l=this.get_node(h,!0),l&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(f?"jstree-clicked":"jstree-checked"),h=this.get_node(h.parent)}}this._data[f?"core":"checkbox"].selected=e.vakata.array_unique(this._data[f?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy(function(t,i){var n,a,r,s,o=i.node,l=this._model.data,d=this.get_node(o.parent),h=this.get_node(o,!0),c=this.settings.checkbox.cascade,u=this.settings.checkbox.tie_selection,p={},f=this._data[u?"core":"checkbox"].selected;for(n=0,a=f.length;a>n;n++)p[f[n]]=!0;if(-1!==c.indexOf("down"))for(n=0,a=o.children_d.length;a>n;n++)p[o.children_d[n]]=!0,s=l[o.children_d[n]],s.state[u?"selected":"checked"]=!0,s&&s.original&&s.original.state&&s.original.state.undetermined&&(s.original.state.undetermined=!1);if(-1!==c.indexOf("up"))for(;d&&d.id!==e.jstree.root;){for(r=0,n=0,a=d.children.length;a>n;n++)r+=l[d.children[n]].state[u?"selected":"checked"];if(r!==a)break;d.state[u?"selected":"checked"]=!0,p[d.id]=!0,s=this.get_node(d,!0),s&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"),d=this.get_node(d.parent)}f=[];for(n in p)p.hasOwnProperty(n)&&f.push(n);this._data[u?"core":"checkbox"].selected=f,-1!==c.indexOf("down")&&h.length&&h.find(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!0)},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy(function(t,i){var n,a,r,s=this.get_node(e.jstree.root),o=this._model.data;for(n=0,a=s.children_d.length;a>n;n++)r=o[s.children_d[n]],r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy(function(t,i){var n,a,r,s=i.node,o=this.get_node(s,!0),l=this.settings.checkbox.cascade,d=this.settings.checkbox.tie_selection,h=this._data[d?"core":"checkbox"].selected,c={};if(s&&s.original&&s.original.state&&s.original.state.undetermined&&(s.original.state.undetermined=!1),-1!==l.indexOf("down"))for(n=0,a=s.children_d.length;a>n;n++)r=this._model.data[s.children_d[n]],r.state[d?"selected":"checked"]=!1,r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1);if(-1!==l.indexOf("up"))for(n=0,a=s.parents.length;a>n;n++)r=this._model.data[s.parents[n]],r.state[d?"selected":"checked"]=!1,r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1),r=this.get_node(s.parents[n],!0),r&&r.length&&r.attr("aria-selected",!1).children(".jstree-anchor").removeClass(d?"jstree-clicked":"jstree-checked");for(c={},n=0,a=h.length;a>n;n++)-1!==l.indexOf("down")&&-1!==e.inArray(h[n],s.children_d)||-1!==l.indexOf("up")&&-1!==e.inArray(h[n],s.parents)||(c[h[n]]=!0);h=[];for(n in c)c.hasOwnProperty(n)&&h.push(n);this._data[d?"core":"checkbox"].selected=h,-1!==l.indexOf("down")&&o.length&&o.find(".jstree-anchor").removeClass(d?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!1)},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",e.proxy(function(t,i){for(var n,a,r,s,o=this.get_node(i.parent),l=this._model.data,d=this.settings.checkbox.tie_selection;o&&o.id!==e.jstree.root&&!o.state[d?"selected":"checked"];){for(r=0,n=0,a=o.children.length;a>n;n++)r+=l[o.children[n]].state[d?"selected":"checked"];if(!(a>0&&r===a))break;o.state[d?"selected":"checked"]=!0,this._data[d?"core":"checkbox"].selected.push(o.id),s=this.get_node(o,!0),s&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked"),o=this.get_node(o.parent)}},this)).on("move_node.jstree",e.proxy(function(t,i){var n,a,r,s,o,l=i.is_multi,d=i.old_parent,h=this.get_node(i.parent),c=this._model.data,u=this.settings.checkbox.tie_selection;if(!l)for(n=this.get_node(d);n&&n.id!==e.jstree.root&&!n.state[u?"selected":"checked"];){for(a=0,r=0,s=n.children.length;s>r;r++)a+=c[n.children[r]].state[u?"selected":"checked"];if(!(s>0&&a===s))break;n.state[u?"selected":"checked"]=!0,this._data[u?"core":"checkbox"].selected.push(n.id),o=this.get_node(n,!0),o&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"),n=this.get_node(n.parent)}for(n=h;n&&n.id!==e.jstree.root;){for(a=0,r=0,s=n.children.length;s>r;r++)a+=c[n.children[r]].state[u?"selected":"checked"];if(a===s)n.state[u?"selected":"checked"]||(n.state[u?"selected":"checked"]=!0,this._data[u?"core":"checkbox"].selected.push(n.id),o=this.get_node(n,!0),o&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"));else{if(!n.state[u?"selected":"checked"])break;n.state[u?"selected":"checked"]=!1,this._data[u?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[u?"core":"checkbox"].selected,n.id),o=this.get_node(n,!0),o&&o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass(u?"jstree-clicked":"jstree-checked")}n=this.get_node(n.parent)}},this))},this._undetermined=function(){if(null!==this.element){var i,n,a,r,s={},o=this._model.data,l=this.settings.checkbox.tie_selection,d=this._data[l?"core":"checkbox"].selected,h=[],c=this;for(i=0,n=d.length;n>i;i++)if(o[d[i]]&&o[d[i]].parents)for(a=0,r=o[d[i]].parents.length;r>a&&s[o[d[i]].parents[a]]===t;a++)o[d[i]].parents[a]!==e.jstree.root&&(s[o[d[i]].parents[a]]=!0,h.push(o[d[i]].parents[a]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var l,d=c.get_node(this);if(d.state.loaded){for(i=0,n=d.children_d.length;n>i;i++)if(l=o[d.children_d[i]],!l.state.loaded&&l.original&&l.original.state&&l.original.state.undetermined&&l.original.state.undetermined===!0)for(s[l.id]===t&&l.id!==e.jstree.root&&(s[l.id]=!0,h.push(l.id)),a=0,r=l.parents.length;r>a;a++)s[l.parents[a]]===t&&l.parents[a]!==e.jstree.root&&(s[l.parents[a]]=!0,h.push(l.parents[a]))}else if(d.original&&d.original.state&&d.original.state.undetermined&&d.original.state.undetermined===!0)for(s[d.id]===t&&d.id!==e.jstree.root&&(s[d.id]=!0,h.push(d.id)),a=0,r=d.parents.length;r>a;a++)s[d.parents[a]]===t&&d.parents[a]!==e.jstree.root&&(s[d.parents[a]]=!0,h.push(d.parents[a]))}),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),i=0,n=h.length;n>i;i++)o[h[i]].state[l?"selected":"checked"]||(d=this.get_node(h[i],!0),d&&d.length&&d.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined"))}},this.redraw_node=function(t,i,a,r){if(t=n.redraw_node.apply(this,arguments)){var s,o,l=null,d=null;for(s=0,o=t.childNodes.length;o>s;s++)if(t.childNodes[s]&&t.childNodes[s].className&&-1!==t.childNodes[s].className.indexOf("jstree-anchor")){l=t.childNodes[s];break}l&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(l.className+=" jstree-checked"),d=u.cloneNode(!1),this._model.data[t.id].state.checkbox_disabled&&(d.className+=" jstree-checkbox-disabled"),l.insertBefore(d,l.childNodes[0]))}return a||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),t},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(t){t=this.get_node(t);var i,n,a=this.settings.checkbox.cascade,r=this.settings.checkbox.tie_selection,s=this._data[r?"core":"checkbox"].selected,o=this._model.data;if(!t||t.state[r?"selected":"checked"]===!0||-1===a.indexOf("undetermined")||-1===a.indexOf("down")&&-1===a.indexOf("up"))return!1;if(!t.state.loaded&&t.original.state.undetermined===!0)return!0;for(i=0,n=t.children_d.length;n>i;i++)if(-1!==e.inArray(t.children_d[i],s)||!o[t.children_d[i]].state.loaded&&o[t.children_d[i]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(t){var i,n,a;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.disable_checkbox(t[i]);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(a=this.get_node(t,!0),void(t.state.checkbox_disabled||(t.state.checkbox_disabled=!0,a&&a.length&&a.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:t})))):!1},this.enable_checkbox=function(t){var i,n,a;if(e.isArray(t)){for(t=t.slice(),i=0,n=t.length;n>i;i++)this.enable_checkbox(t[i]);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(a=this.get_node(t,!0),void(t.state.checkbox_disabled&&(t.state.checkbox_disabled=!1,a&&a.length&&a.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:t})))):!1},this.activate_node=function(t,i){return e(i.target).hasClass("jstree-checkbox-disabled")?!1:(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(i.target).hasClass("jstree-checkbox"))&&(i.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!e(i.target).hasClass("jstree-checkbox")?n.activate_node.call(this,t,i):this.is_disabled(t)?!1:(this.is_checked(t)?this.uncheck_node(t,i):this.check_node(t,i),void this.trigger("activate_node",{node:this.get_node(t)})))},this.check_node=function(t,i){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,i);var n,a,r;if(e.isArray(t)){for(t=t.slice(),a=0,r=t.length;r>a;a++)this.check_node(t[a],i);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(n=this.get_node(t,!0),void(t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),n&&n.length&&n.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:i})))):!1},this.uncheck_node=function(t,i){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,i);var n,a,r;if(e.isArray(t)){for(t=t.slice(),n=0,a=t.length;a>n;n++)this.uncheck_node(t[n],i);return!0}return t=this.get_node(t),t&&t.id!==e.jstree.root?(r=this.get_node(t,!0),void(t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,t.id),r.length&&r.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:i})))):!1},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var t,i;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data[e.jstree.root].children_d.concat(),t=0,i=this._data.checkbox.selected.length;i>t;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e,t,i=this._data.checkbox.selected.concat([]);for(e=0,t=this._data.checkbox.selected.length;t>e;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:i})},this.is_checked=function(t){return this.settings.checkbox.tie_selection?this.is_selected(t):(t=this.get_node(t),t&&t.id!==e.jstree.root?t.state.checked:!1)},this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?e.map(this._data.checkbox.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected},this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);var i,n,a,r,s=this.get_checked(!0),o={};for(i=0,n=s.length;n>i;i++)o[s[i].id]=s[i];for(i=0,n=s.length;n>i;i++)for(a=0,r=s[i].children_d.length;r>a;a++)o[s[i].children_d[a]]&&delete o[s[i].children_d[a]];s=[];for(i in o)o.hasOwnProperty(i)&&s.push(i);return t?e.map(s,e.proxy(function(e){return this.get_node(e)},this)):s},this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);var i,n,a=this.get_checked(!0),r=[];for(i=0,n=a.length;n>i;i++)a[i].children.length||r.push(a[i].id);return t?e.map(r,e.proxy(function(e){return this.get_node(e)},this)):r},this.load_node=function(t,i){var a,r,s,o;if(!e.isArray(t)&&!this.settings.checkbox.tie_selection&&(o=this.get_node(t),o&&o.state.loaded))for(a=0,r=o.children_d.length;r>a;a++)this._model.data[o.children_d[a]].state.checked&&(s=!0,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,o.children_d[a]));return n.load_node.apply(this,arguments)},this.get_state=function(){var e=n.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?e:(e.checkbox=this._data.checkbox.selected.slice(),e)},this.set_state=function(t,i){var a=n.set_state.apply(this,arguments);if(a&&t.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var r=this;e.each(t.checkbox,function(e,t){r.check_node(t)})}return delete t.checkbox,this.set_state(t,i),!1}return a},this.refresh=function(e,t){return this.settings.checkbox.tie_selection||(this._data.checkbox.selected=[]),n.refresh.apply(this,arguments)}},e.jstree.defaults.conditionalselect=function(){return!0},e.jstree.plugins.conditionalselect=function(e,t){this.activate_node=function(e,i){this.settings.conditionalselect.call(this,this.get_node(e),i)&&t.activate_node.call(this,e,i)}},e.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(t,i){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(t){var i=e.jstree.reference(t.reference),n=i.get_node(t.reference);i.create_node(n,{},"last",function(e){setTimeout(function(){i.edit(e)},0)})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(t){var i=e.jstree.reference(t.reference),n=i.get_node(t.reference);i.edit(n)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(t){var i=e.jstree.reference(t.reference),n=i.get_node(t.reference);i.is_selected(n)?i.delete_node(i.get_selected()):i.delete_node(n)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){var i=e.jstree.reference(t.reference),n=i.get_node(t.reference);i.is_selected(n)?i.cut(i.get_top_selected()):i.cut(n)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){var i=e.jstree.reference(t.reference),n=i.get_node(t.reference);i.is_selected(n)?i.copy(i.get_top_selected()):i.copy(n)}},paste:{separator_before:!1,icon:!1,_disabled:function(t){return!e.jstree.reference(t.reference).can_paste()},separator_after:!1,label:"Paste",action:function(t){var i=e.jstree.reference(t.reference),n=i.get_node(t.reference);i.paste(n)}}}}}}},e.jstree.plugins.contextmenu=function(i,n){this.bind=function(){n.bind.call(this);var t,i,a=0,r=null;this.element.on("contextmenu.jstree",".jstree-anchor",e.proxy(function(e,t){e.preventDefault(),a=e.ctrlKey?+new Date:0,(t||r)&&(a=+new Date+1e4),r&&clearTimeout(r),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e)},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){this._data.contextmenu.visible&&(!a||+new Date-a>250)&&e.vakata.context.hide(),a=0},this)).on("touchstart.jstree",".jstree-anchor",function(n){n.originalEvent&&n.originalEvent.changedTouches&&n.originalEvent.changedTouches[0]&&(t=n.pageX,i=n.pageY,r=setTimeout(function(){e(n.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(e){r&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(Math.abs(t-e.pageX)>50||Math.abs(i-e.pageY)>50)&&clearTimeout(r)}).on("touchend.vakata.jstree",function(e){r&&clearTimeout(r)}),e(h).on("context_hide.vakata.jstree",e.proxy(function(e,t){this._data.contextmenu.visible=!1,t.reference.removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&e.vakata.context.hide(),n.teardown.call(this)},this.show_contextmenu=function(i,n,a,r){if(i=this.get_node(i),!i||i.id===e.jstree.root)return!1;var s=this.settings.contextmenu,o=this.get_node(i,!0),l=o.children(".jstree-anchor"),d=!1,h=!1;(s.show_at_node||n===t||a===t)&&(d=l.offset(),n=d.left,a=d.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(i)&&this.activate_node(i,r),h=s.items,e.isFunction(h)&&(h=h.call(this,i,e.proxy(function(e){this._show_contextmenu(i,n,a,e)},this))),e.isPlainObject(h)&&this._show_contextmenu(i,n,a,h)},this._show_contextmenu=function(t,i,n,a){var r=this.get_node(t,!0),s=r.children(".jstree-anchor");e(h).one("context_show.vakata.jstree",e.proxy(function(t,i){var n="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";e(i.element).addClass(n),s.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,e.vakata.context.show(s,{x:i,y:n},a),this.trigger("show_contextmenu",{node:t,x:i,y:n})}},function(e){var t=!1,i={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(t){e(h).triggerHandler("context_"+t+".vakata",{reference:i.reference,element:i.element,position:{x:i.position_x,y:i.position_y}})},_execute:function(t){return t=i.items[t],t&&(!t._disabled||e.isFunction(t._disabled)&&!t._disabled({item:t,reference:i.reference,element:i.element}))&&t.action?t.action.call(null,{item:t,reference:i.reference,element:i.element,position:{x:i.position_x,y:i.position_y}}):!1},_parse:function(t,n){if(!t)return!1;n||(i.html="",i.items=[]);var a,r="",s=!1;return n&&(r+="<ul>"),e.each(t,function(t,n){return n?(i.items.push(n),!s&&n.separator_before&&(r+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),s=!1,r+="<li class='"+(n._class||"")+(n._disabled===!0||e.isFunction(n._disabled)&&n._disabled({item:n,reference:i.reference,element:i.element})?" vakata-contextmenu-disabled ":"")+"' "+(n.shortcut?" data-shortcut='"+n.shortcut+"' ":"")+">",r+="<a href='#' rel='"+(i.items.length-1)+"'>",e.vakata.context.settings.icons&&(r+="<i ",n.icon&&(r+=-1!==n.icon.indexOf("/")||-1!==n.icon.indexOf(".")?" style='background:url(\""+n.icon+"\") center center no-repeat' ":" class='"+n.icon+"' "),r+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),r+=(e.isFunction(n.label)?n.label({item:t,reference:i.reference,element:i.element}):n.label)+(n.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+n.shortcut+'">'+(n.shortcut_label||"")+"</span>":"")+"</a>",n.submenu&&(a=e.vakata.context._parse(n.submenu,!0),a&&(r+=a)),r+="</li>",void(n.separator_after&&(r+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",s=!0))):!0}),r=r.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),n&&(r+="</ul>"),n||(i.html=r,e.vakata.context._trigger("parse")),r.length>10?r:!1},_show_submenu:function(i){if(i=e(i),i.length&&i.children("ul").length){var n=i.children("ul"),a=i.offset().left,r=a+i.outerWidth(),s=i.offset().top,o=n.width(),l=n.height(),d=e(window).width()+e(window).scrollLeft(),h=e(window).height()+e(window).scrollTop();t?i[r-(o+10+i.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):i[r+o>d&&a>d-r?"addClass":"removeClass"]("vakata-context-right"),s+l+10>h&&n.css("bottom","-1px"),i.hasClass("vakata-context-right")?o>a&&n.css("margin-right",a-o):o>d-r&&n.css("margin-left",d-r-o),n.show()}},show:function(n,a,r){var s,o,l,d,h,c,u,p,f=!0;switch(i.element&&i.element.length&&i.element.width(""),f){case!a&&!n:return!1;case!!a&&!!n:i.reference=n,i.position_x=a.x,i.position_y=a.y;break;case!a&&!!n:i.reference=n,s=n.offset(),i.position_x=s.left+n.outerHeight(),i.position_y=s.top;break;case!!a&&!n:i.position_x=a.x,i.position_y=a.y}n&&!r&&e(n).data("vakata_contextmenu")&&(r=e(n).data("vakata_contextmenu")),e.vakata.context._parse(r)&&i.element.html(i.html),i.items.length&&(i.element.appendTo("body"),o=i.element,l=i.position_x,d=i.position_y,h=o.width(),c=o.height(),u=e(window).width()+e(window).scrollLeft(),p=e(window).height()+e(window).scrollTop(),t&&(l-=o.outerWidth()-e(n).outerWidth(),l<e(window).scrollLeft()+20&&(l=e(window).scrollLeft()+20)),l+h+20>u&&(l=u-(h+20)),d+c+20>p&&(d=p-(c+20)),i.element.css({left:l,top:d}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),i.is_visible=!0,e.vakata.context._trigger("show"))},hide:function(){i.is_visible&&(i.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),i.is_visible=!1,e.vakata.context._trigger("hide"))}},e(function(){t="rtl"===e("body").css("direction");var n=!1;i.element=e("<ul class='vakata-context'></ul>"),i.element.on("mouseenter","li",function(t){t.stopImmediatePropagation(),e.contains(this,t.relatedTarget)||(n&&clearTimeout(n),i.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this))}).on("mouseleave","li",function(t){e.contains(this,t.relatedTarget)||e(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(t){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(n=setTimeout(function(t){return function(){e.vakata.context.hide()}}(this),e.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(t){t.preventDefault(),e(this).blur().parent().hasClass("vakata-context-disabled")||e.vakata.context._execute(e(this).attr("rel"))===!1||e.vakata.context.hide()}).on("keydown","a",function(t){var n=null;switch(t.which){case 13:case 32:t.type="mouseup",t.preventDefault(),e(t.currentTarget).trigger(t);break;case 37:i.is_visible&&(i.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 38:i.is_visible&&(n=i.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),n.length||(n=i.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),n.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 39:i.is_visible&&(i.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 40:i.is_visible&&(n=i.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),n.length||(n=i.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),n.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 27:e.vakata.context.hide(),t.preventDefault()}}).on("keydown",function(e){e.preventDefault();var t=i.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();t.parent().not(".vakata-context-disabled")&&t.click()}),e(h).on("mousedown.vakata.jstree",function(t){i.is_visible&&!e.contains(i.element[0],t.target)&&e.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,n){i.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),t&&i.element.addClass("vakata-context-rtl").css("direction","rtl"),i.element.find("ul").hide().end()})})}(e),e.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1};var p,f;e.jstree.plugins.dnd=function(t,i){
this.init=function(e,t){i.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in h.createElement("span")},this.bind=function(){i.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",e.proxy(function(t){if(this.settings.dnd.large_drag_target&&e(t.target).closest(".jstree-node")[0]!==t.currentTarget)return!0;if("touchstart"===t.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var i=this.get_node(t.target),n=this.is_selected(i)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,a=n>1?n+" "+this.get_string("nodes"):this.get_text(t.currentTarget);if(this.settings.core.force_text&&(a=e.vakata.html.escape(a)),i&&i.id&&i.id!==e.jstree.root&&(1===t.which||"touchstart"===t.type||"dragstart"===t.type)&&(this.settings.dnd.is_draggable===!0||e.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,n>1?this.get_top_selected(!0):[i],t))){if(p={jstree:!0,origin:this,obj:this.get_node(i,!0),nodes:n>1?this.get_top_selected():[i.id]},f=t.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),e.vakata.dnd.start(t,p,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+a+'<ins class="jstree-copy" style="display:none;">+</ins></div>');e.vakata.dnd._trigger("start",t,{helper:e(),element:f,data:p})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(t){return t.preventDefault(),e.vakata.dnd._trigger("move",t,{helper:e(),element:f,data:p}),!1}).on("drop.jstree",e.proxy(function(t){return t.preventDefault(),e.vakata.dnd._trigger("stop",t,{helper:e(),element:f,data:p}),!1},this))},this.redraw_node=function(e,t,n,a){if(e=i.redraw_node.apply(this,arguments),e&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{var r,s,o=null;for(r=0,s=e.childNodes.length;s>r;r++)if(e.childNodes[r]&&e.childNodes[r].className&&-1!==e.childNodes[r].className.indexOf("jstree-anchor")){o=e.childNodes[r];break}o&&o.setAttribute("draggable",!0)}return e}},e(function(){var i=!1,n=!1,a=!1,r=!1,s=e('<div id="jstree-marker">&#160;</div>').hide();e(h).on("dnd_start.vakata.jstree",function(e,t){i=!1,a=!1,t&&t.data&&t.data.jstree&&s.appendTo("body")}).on("dnd_move.vakata.jstree",function(o,l){if(r&&(l.event&&"dragover"===l.event.type&&l.event.target===a.target||clearTimeout(r)),l&&l.data&&l.data.jstree&&(!l.event.target.id||"jstree-marker"!==l.event.target.id)){a=l.event;var d,h,c,u,p,f,m,g,x,y,v,_,b,w,k,T=e.jstree.reference(l.event.target),M=!1,C=!1,S=!1;if(T&&T._data&&T._data.dnd)if(s.attr("class","jstree-"+T.get_theme()+(T.settings.core.themes.responsive?" jstree-dnd-responsive":"")),k=l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey)),l.helper.children().attr("class","jstree-"+T.get_theme()+" jstree-"+T.get_theme()+"-"+T.get_theme_variant()+" "+(T.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[k?"show":"hide"](),l.event.target!==T.element[0]&&l.event.target!==T.get_container_ul()[0]||0!==T.get_container_ul().children().length){if(M=T.settings.dnd.large_drop_target?e(l.event.target).closest(".jstree-node").children(".jstree-anchor"):e(l.event.target).closest(".jstree-anchor"),M&&M.length&&M.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(C=M.offset(),S=(l.event.pageY!==t?l.event.pageY:l.event.originalEvent.pageY)-C.top,c=M.outerHeight(),f=c/3>S?["b","i","a"]:S>c-c/3?["a","i","b"]:S>c/2?["i","a","b"]:["i","b","a"],e.each(f,function(t,a){switch(a){case"b":d=C.left-6,h=C.top,u=T.get_parent(M),p=M.parent().index();break;case"i":b=T.settings.dnd.inside_pos,w=T.get_node(M.parent()),d=C.left-2,h=C.top+c/2+1,u=w.id,p="first"===b?0:"last"===b?w.children.length:Math.min(b,w.children.length);break;case"a":d=C.left-6,h=C.top+c,u=T.get_parent(M),p=M.parent().index()+1}for(m=!0,g=0,x=l.data.nodes.length;x>g;g++)if(y=l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node",v=p,"move_node"===y&&"a"===a&&l.data.origin&&l.data.origin===T&&u===T.get_parent(l.data.nodes[g])&&(_=T.get_node(u),v>e.inArray(l.data.nodes[g],_.children)&&(v-=1)),m=m&&(T&&T.settings&&T.settings.dnd&&T.settings.dnd.check_while_dragging===!1||T.check(y,l.data.origin&&l.data.origin!==T?l.data.origin.get_node(l.data.nodes[g]):l.data.nodes[g],u,v,{dnd:!0,ref:T.get_node(M.parent()),pos:a,origin:l.data.origin,is_multi:l.data.origin&&l.data.origin!==T,is_foreign:!l.data.origin})),!m){T&&T.last_error&&(n=T.last_error());break}return"i"===a&&M.parent().is(".jstree-closed")&&T.settings.dnd.open_timeout&&(r=setTimeout(function(e,t){return function(){e.open_node(t)}}(T,M),T.settings.dnd.open_timeout)),m?(i={ins:T,par:u,pos:"i"!==a||"last"!==b||0!==p||T.is_loaded(w)?p:"last"},s.css({left:d+"px",top:h+"px"}).show(),l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect=k?"copy":"move"),n={},f=!0,!1):void 0}),f===!0))return}else{for(m=!0,g=0,x=l.data.nodes.length;x>g&&(m=m&&T.check(l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node",l.data.origin&&l.data.origin!==T?l.data.origin.get_node(l.data.nodes[g]):l.data.nodes[g],e.jstree.root,"last",{dnd:!0,ref:T.get_node(e.jstree.root),pos:"i",origin:l.data.origin,is_multi:l.data.origin&&l.data.origin!==T,is_foreign:!l.data.origin}),m);g++);if(m)return i={ins:T,par:e.jstree.root,pos:"last"},s.hide(),l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect=k?"copy":"move"))}i=!1,l.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect="none"),s.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(s.hide(),i=!1,a=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(t,o){if(r&&clearTimeout(r),o&&o.data&&o.data.jstree){s.hide().detach();var l,d,h=[];if(i){for(l=0,d=o.data.nodes.length;d>l;l++)h[l]=o.data.origin?o.data.origin.get_node(o.data.nodes[l]):o.data.nodes[l];i.ins[o.data.origin&&(o.data.origin.settings.dnd.always_copy||o.data.origin.settings.dnd.copy&&(o.event.metaKey||o.event.ctrlKey))?"copy_node":"move_node"](h,i.par,i.pos,!1,!1,!1,o.data.origin)}else l=e(o.event.target).closest(".jstree"),l.length&&n&&n.error&&"check"===n.error&&(l=l.jstree(!0),l&&l.settings.core.error.call(this,n));a=!1,i=!1}}).on("keyup.jstree keydown.jstree",function(t,o){o=e.vakata.dnd._get(),o&&o.data&&o.data.jstree&&("keyup"===t.type&&27===t.which?(r&&clearTimeout(r),i=!1,n=!1,a=!1,r=!1,s.hide().detach(),e.vakata.dnd._clean()):(o.helper.find(".jstree-copy").first()[o.data.origin&&(o.data.origin.settings.dnd.always_copy||o.data.origin.settings.dnd.copy&&(t.metaKey||t.ctrlKey))?"show":"hide"](),a&&(a.metaKey=t.metaKey,a.ctrlKey=t.ctrlKey,e.vakata.dnd._trigger("move",a))))})}),function(e){e.vakata.html={div:e("<div />"),escape:function(t){return e.vakata.html.div.text(t).html()},strip:function(t){return e.vakata.html.div.empty().append(e.parseHTML(t)).text()}};var i={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};e.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(i,n,a){a===t&&(a=e.vakata.dnd._get()),a.event=n,e(h).triggerHandler("dnd_"+i+".vakata",a)},_get:function(){return{data:i.data,element:i.element,helper:i.helper}},_clean:function(){i.helper&&i.helper.remove(),i.scroll_i&&(clearInterval(i.scroll_i),i.scroll_i=!1),i={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},e(h).off("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(h).off("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop)},_scroll:function(t){if(!i.scroll_e||!i.scroll_l&&!i.scroll_t)return i.scroll_i&&(clearInterval(i.scroll_i),i.scroll_i=!1),!1;if(!i.scroll_i)return i.scroll_i=setInterval(e.vakata.dnd._scroll,100),!1;if(t===!0)return!1;var n=i.scroll_e.scrollTop(),a=i.scroll_e.scrollLeft();i.scroll_e.scrollTop(n+i.scroll_t*e.vakata.dnd.settings.scroll_speed),i.scroll_e.scrollLeft(a+i.scroll_l*e.vakata.dnd.settings.scroll_speed),(n!==i.scroll_e.scrollTop()||a!==i.scroll_e.scrollLeft())&&e.vakata.dnd._trigger("scroll",i.scroll_e)},start:function(t,n,a){"touchstart"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=h.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),i.is_drag&&e.vakata.dnd.stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.touchAction="none",t.currentTarget.style.msTouchAction="none",t.currentTarget.style.MozUserSelect="none")}catch(r){}return i.init_x=t.pageX,i.init_y=t.pageY,i.data=n,i.is_down=!0,i.element=t.currentTarget,i.target=t.target,i.is_touch="touchstart"===t.type,a!==!1&&(i.helper=e("<div id='vakata-dnd'></div>").html(a).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),e(h).on("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(h).on("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop),!1},drag:function(t){if("touchmove"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=h.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),i.is_down){if(!i.is_drag){if(!(Math.abs(t.pageX-i.init_x)>(i.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)||Math.abs(t.pageY-i.init_y)>(i.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)))return;i.helper&&(i.helper.appendTo("body"),i.helper_w=i.helper.outerWidth()),i.is_drag=!0,e.vakata.dnd._trigger("start",t)}var n=!1,a=!1,r=!1,s=!1,o=!1,l=!1,d=!1,c=!1,u=!1,p=!1;return i.scroll_t=0,i.scroll_l=0,i.scroll_e=!1,e(e(t.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(e(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var n=e(this),a=n.offset();return this.scrollHeight>this.offsetHeight&&(a.top+n.height()-t.pageY<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_t=1),t.pageY-a.top<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(a.left+n.width()-t.pageX<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_l=1),t.pageX-a.left<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_l=-1)),i.scroll_t||i.scroll_l?(i.scroll_e=e(this),!1):void 0}),i.scroll_e||(n=e(h),a=e(window),r=n.height(),s=a.height(),o=n.width(),l=a.width(),d=n.scrollTop(),c=n.scrollLeft(),r>s&&t.pageY-d<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_t=-1),r>s&&s-(t.pageY-d)<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_t=1),o>l&&t.pageX-c<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_l=-1),o>l&&l-(t.pageX-c)<e.vakata.dnd.settings.scroll_proximity&&(i.scroll_l=1),(i.scroll_t||i.scroll_l)&&(i.scroll_e=n)),i.scroll_e&&e.vakata.dnd._scroll(!0),i.helper&&(u=parseInt(t.pageY+e.vakata.dnd.settings.helper_top,10),p=parseInt(t.pageX+e.vakata.dnd.settings.helper_left,10),r&&u+25>r&&(u=r-50),o&&p+i.helper_w>o&&(p=o-(i.helper_w+2)),i.helper.css({left:p+"px",top:u+"px"})),e.vakata.dnd._trigger("move",t),!1}},stop:function(t){if("touchend"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=h.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),i.is_drag)e.vakata.dnd._trigger("stop",t);else if("touchend"===t.type&&t.target===i.target){var n=setTimeout(function(){e(t.target).click()},100);e(t.target).one("click",function(){n&&clearTimeout(n)})}return e.vakata.dnd._clean(),!1}}}(e),e.jstree.defaults.massload=null,e.jstree.plugins.massload=function(t,i){this.init=function(e,t){this._data.massload={},i.init.call(this,e,t)},this._load_nodes=function(t,n,a,r){var s,o,l,d=this.settings.massload,h=(JSON.stringify(t),[]),c=this._model.data;if(!a){for(s=0,o=t.length;o>s;s++)(!c[t[s]]||!c[t[s]].state.loaded&&!c[t[s]].state.failed||r)&&(h.push(t[s]),l=this.get_node(t[s],!0),l&&l.length&&l.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},h.length){if(e.isFunction(d))return d.call(this,h,e.proxy(function(e){var s,o;if(e)for(s in e)e.hasOwnProperty(s)&&(this._data.massload[s]=e[s]);for(s=0,o=t.length;o>s;s++)l=this.get_node(t[s],!0),l&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);i._load_nodes.call(this,t,n,a,r)},this));if("object"==typeof d&&d&&d.url)return d=e.extend(!0,{},d),e.isFunction(d.url)&&(d.url=d.url.call(this,h)),e.isFunction(d.data)&&(d.data=d.data.call(this,h)),e.ajax(d).done(e.proxy(function(e,s,o){var d,h;if(e)for(d in e)e.hasOwnProperty(d)&&(this._data.massload[d]=e[d]);for(d=0,h=t.length;h>d;d++)l=this.get_node(t[d],!0),l&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);i._load_nodes.call(this,t,n,a,r)},this)).fail(e.proxy(function(e){i._load_nodes.call(this,t,n,a,r)},this))}}return i._load_nodes.call(this,t,n,a,r)},this._load_node=function(t,n){var a,r=this._data.massload[t.id],s=null;return r?(s=this["string"==typeof r?"_append_html_data":"_append_json_data"](t,"string"==typeof r?e(e.parseHTML(r)).filter(function(){return 3!==this.nodeType}):r,function(e){n.call(this,e)}),a=this.get_node(t.id,!0),a&&a.length&&a.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[t.id],s):i._load_node.call(this,t,n)}},e.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},e.jstree.plugins.search=function(i,n){this.bind=function(){n.bind.call(this),this._data.search.str="",this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",e.proxy(function(t,i){if(this._data.search.som&&i.res.length){var n,a,r=this._model.data,s=[];for(n=0,a=i.res.length;a>n;n++)r[i.res[n]]&&!r[i.res[n]].state.hidden&&(s.push(i.res[n]),s=s.concat(r[i.res[n]].parents),this._data.search.smc&&(s=s.concat(r[i.res[n]].children_d)));s=e.vakata.array_remove_item(e.vakata.array_unique(s),e.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(s,!0),this.redraw(!0)}},this)).on("clear_search.jstree",e.proxy(function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(i,n,a,r,s,o){if(i===!1||""===e.trim(i.toString()))return this.clear_search();r=this.get_node(r),r=r&&r.id?r.id:null,i=i.toString();var l,d,h=this.settings.search,c=h.ajax?h.ajax:!1,u=this._model.data,p=null,f=[],m=[];if(this._data.search.res.length&&!s&&this.clear_search(),a===t&&(a=h.show_only_matches),o===t&&(o=h.show_only_matches_children),!n&&c!==!1)return e.isFunction(c)?c.call(this,i,e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(i,!0,a,r,s)})},this),r):(c=e.extend({},c),c.data||(c.data={}),c.data.str=i,r&&(c.data.inside=r),e.ajax(c).fail(e.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(c)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(i,!0,a,r,s)})},this)));if(s||(this._data.search.str=i,this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=a,this._data.search.smc=o),p=new e.vakata.search(i,!0,{caseSensitive:h.case_sensitive,fuzzy:h.fuzzy}),e.each(u[r?r:e.jstree.root].children_d,function(e,t){var n=u[t];n.text&&(!h.search_leaves_only||n.state.loaded&&0===n.children.length)&&(h.search_callback&&h.search_callback.call(this,i,n)||!h.search_callback&&p.search(n.text).isMatch)&&(f.push(t),m=m.concat(n.parents))}),f.length){for(m=e.vakata.array_unique(m),l=0,d=m.length;d>l;l++)m[l]!==e.jstree.root&&u[m[l]]&&this.open_node(m[l],null,0)===!0&&this._data.search.opn.push(m[l]);s?(this._data.search.dom=this._data.search.dom.add(e(this.element[0].querySelectorAll("#"+e.map(f,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=e.vakata.array_unique(this._data.search.res.concat(f))):(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(f,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=f),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:i,res:this._data.search.res,show_only_matches:a})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(this._data.search.res,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=e()},this.redraw_node=function(t,i,a,r){if(t=n.redraw_node.apply(this,arguments),t&&-1!==e.inArray(t.id,this._data.search.res)){var s,o,l=null;for(s=0,o=t.childNodes.length;o>s;s++)if(t.childNodes[s]&&t.childNodes[s].className&&-1!==t.childNodes[s].className.indexOf("jstree-anchor")){l=t.childNodes[s];break}l&&(l.className+=" jstree-search")}return t}},function(e){e.vakata.search=function(t,i,n){n=n||{},n=e.extend({},e.vakata.search.defaults,n),n.fuzzy!==!1&&(n.fuzzy=!0),t=n.caseSensitive?t:t.toLowerCase();var a,r,s,o,l=n.location,d=n.distance,h=n.threshold,c=t.length;return c>32&&(n.fuzzy=!1),n.fuzzy&&(a=1<<c-1,r=function(){var e={},i=0;for(i=0;c>i;i++)e[t.charAt(i)]=0;for(i=0;c>i;i++)e[t.charAt(i)]|=1<<c-i-1;return e}(),s=function(e,t){var i=e/c,n=Math.abs(l-t);return d?i+n/d:n?1:i}),o=function(e){if(e=n.caseSensitive?e:e.toLowerCase(),t===e||-1!==e.indexOf(t))return{isMatch:!0,score:0};if(!n.fuzzy)return{isMatch:!1,score:1};var i,o,d,u,p,f,m,g,x,y=e.length,v=h,_=e.indexOf(t,l),b=c+y,w=1,k=[];for(-1!==_&&(v=Math.min(s(0,_),v),_=e.lastIndexOf(t,l+c),-1!==_&&(v=Math.min(s(0,_),v))),_=-1,i=0;c>i;i++){for(d=0,u=b;u>d;)s(i,l+u)<=v?d=u:b=u,u=Math.floor((b-d)/2+d);for(b=u,f=Math.max(1,l-u+1),m=Math.min(l+u,y)+c,g=new Array(m+2),g[m+1]=(1<<i)-1,o=m;o>=f;o--)if(x=r[e.charAt(o-1)],0===i?g[o]=(g[o+1]<<1|1)&x:g[o]=(g[o+1]<<1|1)&x|((p[o+1]|p[o])<<1|1)|p[o+1],g[o]&a&&(w=s(i,o-1),v>=w)){if(v=w,_=o-1,k.push(_),!(_>l))break;f=Math.max(1,2*l-_)}if(s(i+1,l)>v)break;p=g}return{isMatch:_>=0,score:w}},i===!0?{search:o}:o(i)},e.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}}(e),e.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},e.jstree.plugins.sort=function(t,i){this.bind=function(){i.bind.call(this),this.element.on("model.jstree",e.proxy(function(e,t){this.sort(t.parent,!0)},this)).on("rename_node.jstree create_node.jstree",e.proxy(function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",e.proxy(function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)},this))},this.sort=function(t,i){var n,a;if(t=this.get_node(t),t&&t.children&&t.children.length&&(t.children.sort(e.proxy(this.settings.sort,this)),i))for(n=0,a=t.children_d.length;a>n;n++)this.sort(t.children_d[n],!1)}};var m=!1;e.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1},e.jstree.plugins.state=function(t,i){this.bind=function(){i.bind.call(this);var t=e.proxy(function(){this.element.on(this.settings.state.events,e.proxy(function(){m&&clearTimeout(m),m=setTimeout(e.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",e.proxy(function(e,i){this.element.one("restore_state.jstree",t),this.restore_state()||t()},this))},this.save_state=function(){var t={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};e.vakata.storage.set(this.settings.state.key,JSON.stringify(t))},this.restore_state=function(){var t=e.vakata.storage.get(this.settings.state.key);if(t)try{t=JSON.parse(t)}catch(i){return!1}return t&&t.ttl&&t.sec&&+new Date-t.sec>t.ttl?!1:(t&&t.state&&(t=t.state),t&&e.isFunction(this.settings.state.filter)&&(t=this.settings.state.filter.call(this,t)),t?(this.element.one("set_state.jstree",function(i,n){n.instance.trigger("restore_state",{state:e.extend(!0,{},t)})}),this.set_state(t),!0):!1)},this.clear_state=function(){return e.vakata.storage.del(this.settings.state.key)}},function(e,t){e.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}}}(e),e.jstree.defaults.types={"default":{}},e.jstree.defaults.types[e.jstree.root]={},e.jstree.plugins.types=function(i,n){this.init=function(i,a){var r,s;if(a&&a.types&&a.types["default"])for(r in a.types)if("default"!==r&&r!==e.jstree.root&&a.types.hasOwnProperty(r))for(s in a.types["default"])a.types["default"].hasOwnProperty(s)&&a.types[r][s]===t&&(a.types[r][s]=a.types["default"][s]);n.init.call(this,i,a),this._model.data[e.jstree.root].type=e.jstree.root},this.refresh=function(t,i){n.refresh.call(this,t,i),this._model.data[e.jstree.root].type=e.jstree.root},this.bind=function(){this.element.on("model.jstree",e.proxy(function(i,n){var a,r,s,o=this._model.data,l=n.nodes,d=this.settings.types,h="default";for(a=0,r=l.length;r>a;a++){if(h="default",o[l[a]].original&&o[l[a]].original.type&&d[o[l[a]].original.type]&&(h=o[l[a]].original.type),o[l[a]].data&&o[l[a]].data.jstree&&o[l[a]].data.jstree.type&&d[o[l[a]].data.jstree.type]&&(h=o[l[a]].data.jstree.type),o[l[a]].type=h,o[l[a]].icon===!0&&d[h].icon!==t&&(o[l[a]].icon=d[h].icon),d[h].li_attr!==t&&"object"==typeof d[h].li_attr)for(s in d[h].li_attr)if(d[h].li_attr.hasOwnProperty(s)){if("id"===s)continue;o[l[a]].li_attr[s]===t?o[l[a]].li_attr[s]=d[h].li_attr[s]:"class"===s&&(o[l[a]].li_attr["class"]=d[h].li_attr["class"]+" "+o[l[a]].li_attr["class"])}if(d[h].a_attr!==t&&"object"==typeof d[h].a_attr)for(s in d[h].a_attr)if(d[h].a_attr.hasOwnProperty(s)){if("id"===s)continue;o[l[a]].a_attr[s]===t?o[l[a]].a_attr[s]=d[h].a_attr[s]:"href"===s&&"#"===o[l[a]].a_attr[s]?o[l[a]].a_attr.href=d[h].a_attr.href:"class"===s&&(o[l[a]].a_attr["class"]=d[h].a_attr["class"]+" "+o[l[a]].a_attr["class"])}}o[e.jstree.root].type=e.jstree.root},this)),n.bind.call(this)},this.get_json=function(t,i,a){var r,s,o=this._model.data,l=i?e.extend(!0,{},i,{no_id:!1}):{},d=n.get_json.call(this,t,l,a);if(d===!1)return!1;if(e.isArray(d))for(r=0,s=d.length;s>r;r++)d[r].type=d[r].id&&o[d[r].id]&&o[d[r].id].type?o[d[r].id].type:"default",i&&i.no_id&&(delete d[r].id,d[r].li_attr&&d[r].li_attr.id&&delete d[r].li_attr.id,d[r].a_attr&&d[r].a_attr.id&&delete d[r].a_attr.id);else d.type=d.id&&o[d.id]&&o[d.id].type?o[d.id].type:"default",i&&i.no_id&&(d=this._delete_ids(d));return d},this._delete_ids=function(t){if(e.isArray(t)){for(var i=0,n=t.length;n>i;i++)t[i]=this._delete_ids(t[i]);return t}return delete t.id,t.li_attr&&t.li_attr.id&&delete t.li_attr.id,t.a_attr&&t.a_attr.id&&delete t.a_attr.id,t.children&&e.isArray(t.children)&&(t.children=this._delete_ids(t.children)),t},this.check=function(i,a,r,s,o){if(n.check.call(this,i,a,r,s,o)===!1)return!1;a=a&&a.id?a:this.get_node(a),r=r&&r.id?r:this.get_node(r);var l,d,h,c,u=a&&a.id?o&&o.origin?o.origin:e.jstree.reference(a.id):null;switch(u=u&&u._model&&u._model.data?u._model.data:null,i){case"create_node":case"move_node":case"copy_node":if("move_node"!==i||-1===e.inArray(a.id,r.children)){if(l=this.get_rules(r),l.max_children!==t&&-1!==l.max_children&&l.max_children===r.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+i,data:JSON.stringify({chk:i,pos:s,obj:a&&a.id?a.id:!1,par:r&&r.id?r.id:!1})},!1;if(l.valid_children!==t&&-1!==l.valid_children&&-1===e.inArray(a.type||"default",l.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+i,data:JSON.stringify({chk:i,pos:s,obj:a&&a.id?a.id:!1,par:r&&r.id?r.id:!1})},!1;if(u&&a.children_d&&a.parents){for(d=0,h=0,c=a.children_d.length;c>h;h++)d=Math.max(d,u[a.children_d[h]].parents.length);d=d-a.parents.length+1}(0>=d||d===t)&&(d=1);do{if(l.max_depth!==t&&-1!==l.max_depth&&l.max_depth<d)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+i,data:JSON.stringify({chk:i,pos:s,obj:a&&a.id?a.id:!1,par:r&&r.id?r.id:!1})},!1;r=this.get_node(r.parent),l=this.get_rules(r),d++}while(r)}}return!0},this.get_rules=function(e){if(e=this.get_node(e),!e)return!1;var i=this.get_type(e,!0);return i.max_depth===t&&(i.max_depth=-1),i.max_children===t&&(i.max_children=-1),i.valid_children===t&&(i.valid_children=-1),i},this.get_type=function(t,i){return t=this.get_node(t),t?i?e.extend({type:t.type},this.settings.types[t.type]):t.type:!1},this.set_type=function(i,n){var a,r,s,o,l,d,h,c,u=this._model.data;if(e.isArray(i)){for(i=i.slice(),r=0,s=i.length;s>r;r++)this.set_type(i[r],n);return!0}if(a=this.settings.types,i=this.get_node(i),!a[n]||!i)return!1;if(h=this.get_node(i,!0),h&&h.length&&(c=h.children(".jstree-anchor")),o=i.type,l=this.get_icon(i),i.type=n,(l===!0||a[o]&&a[o].icon!==t&&l===a[o].icon)&&this.set_icon(i,a[n].icon!==t?a[n].icon:!0),a[o].li_attr!==t&&"object"==typeof a[o].li_attr)for(d in a[o].li_attr)if(a[o].li_attr.hasOwnProperty(d)){if("id"===d)continue;"class"===d?(u[i.id].li_attr["class"]=(u[i.id].li_attr["class"]||"").replace(a[o].li_attr[d],""),h&&h.removeClass(a[o].li_attr[d])):u[i.id].li_attr[d]===a[o].li_attr[d]&&(u[i.id].li_attr[d]=null,h&&h.removeAttr(d))}if(a[o].a_attr!==t&&"object"==typeof a[o].a_attr)for(d in a[o].a_attr)if(a[o].a_attr.hasOwnProperty(d)){if("id"===d)continue;"class"===d?(u[i.id].a_attr["class"]=(u[i.id].a_attr["class"]||"").replace(a[o].a_attr[d],""),c&&c.removeClass(a[o].a_attr[d])):u[i.id].a_attr[d]===a[o].a_attr[d]&&("href"===d?(u[i.id].a_attr[d]="#",c&&c.attr("href","#")):(delete u[i.id].a_attr[d],c&&c.removeAttr(d)))}if(a[n].li_attr!==t&&"object"==typeof a[n].li_attr)for(d in a[n].li_attr)if(a[n].li_attr.hasOwnProperty(d)){if("id"===d)continue;u[i.id].li_attr[d]===t?(u[i.id].li_attr[d]=a[n].li_attr[d],h&&("class"===d?h.addClass(a[n].li_attr[d]):h.attr(d,a[n].li_attr[d]))):"class"===d&&(u[i.id].li_attr["class"]=a[n].li_attr[d]+" "+u[i.id].li_attr["class"],h&&h.addClass(a[n].li_attr[d]))}if(a[n].a_attr!==t&&"object"==typeof a[n].a_attr)for(d in a[n].a_attr)if(a[n].a_attr.hasOwnProperty(d)){if("id"===d)continue;u[i.id].a_attr[d]===t?(u[i.id].a_attr[d]=a[n].a_attr[d],c&&("class"===d?c.addClass(a[n].a_attr[d]):c.attr(d,a[n].a_attr[d]))):"href"===d&&"#"===u[i.id].a_attr[d]?(u[i.id].a_attr.href=a[n].a_attr.href,c&&c.attr("href",a[n].a_attr.href)):"class"===d&&(u[i.id].a_attr["class"]=a[n].a_attr["class"]+" "+u[i.id].a_attr["class"],c&&c.addClass(a[n].a_attr[d]))}return!0}},e.jstree.defaults.unique={case_sensitive:!1,duplicate:function(e,t){return e+" ("+t+")"}},e.jstree.plugins.unique=function(i,n){this.check=function(t,i,a,r,s){if(n.check.call(this,t,i,a,r,s)===!1)return!1;if(i=i&&i.id?i:this.get_node(i),a=a&&a.id?a:this.get_node(a),!a||!a.children)return!0;var o,l,d="rename_node"===t?r:i.text,h=[],c=this.settings.unique.case_sensitive,u=this._model.data;for(o=0,l=a.children.length;l>o;o++)h.push(c?u[a.children[o]].text:u[a.children[o]].text.toLowerCase());switch(c||(d=d.toLowerCase()),t){case"delete_node":return!0;case"rename_node":return o=-1===e.inArray(d,h)||i.text&&i.text[c?"toString":"toLowerCase"]()===d,o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+d+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:r,obj:i&&i.id?i.id:!1,par:a&&a.id?a.id:!1})}),o;case"create_node":return o=-1===e.inArray(d,h),o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+d+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:r,obj:i&&i.id?i.id:!1,par:a&&a.id?a.id:!1})}),o;case"copy_node":return o=-1===e.inArray(d,h),o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+d+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:r,obj:i&&i.id?i.id:!1,par:a&&a.id?a.id:!1})}),o;case"move_node":return o=i.parent===a.id&&(!s||!s.is_multi)||-1===e.inArray(d,h),o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+d+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:r,obj:i&&i.id?i.id:!1,par:a&&a.id?a.id:!1})}),o}return!0},this.create_node=function(i,a,r,s,o){if(!a||a.text===t){if(null===i&&(i=e.jstree.root),i=this.get_node(i),!i)return n.create_node.call(this,i,a,r,s,o);if(r=r===t?"last":r,!r.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(i))return n.create_node.call(this,i,a,r,s,o);a||(a={});var l,d,h,c,u,p=this._model.data,f=this.settings.unique.case_sensitive,m=this.settings.unique.duplicate;for(d=l=this.get_string("New node"),h=[],c=0,u=i.children.length;u>c;c++)h.push(f?p[i.children[c]].text:p[i.children[c]].text.toLowerCase());for(c=1;-1!==e.inArray(f?d:d.toLowerCase(),h);)d=m.call(this,l,++c).toString();a.text=d}return n.create_node.call(this,i,a,r,s,o)}};var g=h.createElement("DIV");if(g.setAttribute("unselectable","on"),g.setAttribute("role","presentation"),g.className="jstree-wholerow",g.innerHTML="&#160;",e.jstree.plugins.wholerow=function(t,i){this.bind=function(){i.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var i,n,a=!1;for(i=0,n=t.selected.length;n>i;i++)a=this.get_node(t.selected[i],!0),a&&a.length&&a.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",e.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked");
},this)).on("hover_node.jstree dehover_node.jstree",e.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy(function(t){if(this._data.contextmenu){t.preventDefault();var i=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i)}},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var i=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy(function(t){t.stopImmediatePropagation();var i=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(i).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),i.teardown.call(this)},this.redraw_node=function(t,n,a,r){if(t=i.redraw_node.apply(this,arguments)){var s=g.cloneNode(!0);-1!==e.inArray(t.id,this._data.core.selected)&&(s.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===t.id&&(s.className+=" jstree-wholerow-hovered"),t.insertBefore(s,t.childNodes[0])}return t}},h.registerElement&&Object&&Object.create){var x=Object.create(HTMLElement.prototype);x.createdCallback=function(){var t,i={core:{},plugins:[]};for(t in e.jstree.plugins)e.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(i.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(i[t]=JSON.parse(this.getAttribute(t))));for(t in e.jstree.defaults.core)e.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(i.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));e(this).jstree(i)};try{h.registerElement("vakata-jstree",{prototype:x})}catch(y){}}}});